<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"> 
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <meta name="Description" content="Documentation on the Roundup issue tracker, version 2.1.0."> 
  <title>Developing Roundup - Roundup 2.1.0 documentation</title> 
  <link rel="stylesheet" href="../_static/style.css" type="text/css"> 
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css"> 
  <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '2.1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script> 
  <script type="text/javascript" src="../_static/jquery.js"></script> 
  <script type="text/javascript" src="../_static/underscore.js"></script> 
  <script type="text/javascript" src="../_static/doctools.js"></script> 
  <script type="text/javascript" src="../_static/language_data.js"></script> 
  <link rel="canonical" href="https://www.roundup-tracker.org/docs/developers.html"> 
  <link rel="index" title="Index" href="../genindex.html"> 
  <link rel="search" title="Search" href="../search.html"> 
  <link rel="top" title="Roundup 2.1.0 documentation" href="../index.html"> 
  <link rel="up" title="Docs" href="../docs.html"> 
  <link rel="next" title="MySQL Backend" href="mysql.html"> 
  <link rel="prev" title="Roundup - An Issue-Tracking System for Knowledge Workers" href="design.html"> 
 </head> 
 <body> 
  <div class="header">
   <h1>Roundup</h1> 
   <div id="searchbox" style="display: none"> 
    <form class="search" action="../search.html" method="get"> 
     <input type="text" aria-label="Enter search terms" name="q" size="18"> 
     <input type="submit" value="Search"> 
     <input type="hidden" name="check_keywords" value="yes"> 
     <input type="hidden" name="area" value="default"> 
    </form> 
   </div> 
   <script type="text/javascript">$('#searchbox').show(0);</script> 
  </div> 
  <div class="navigation"> 
   <div class="menu"> 
    <ul class="current"> 
     <li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li> 
     <li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/roundup/">Download</a></li> 
     <li class="toctree-l1 current"><a class="reference internal" href="../docs.html">Docs</a>
      <ul class="current"> 
       <li class="toctree-l2"><a class="reference internal" href="features.html">Roundup Features</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="installation.html">Installing Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="upgrading.html">Upgrading to newer versions of Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="FAQ.html">Roundup FAQ</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="user_guide.html">User Guide</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="customizing.html">Customising Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="admin_guide.html">Administration Guide</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging Aids</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="xmlrpc.html">XML-RPC access to Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="rest.html">REST API for Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="tracker_templates.html">Roundup Tracker Templates</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="glossary.html">Roundup Glossary</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="license.html">License</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="overview.html">Design Overview</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="design.html">Design (original)</a></li> 
       <li class="toctree-l2 current"><a class="current reference internal" href="#">Developing Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="mysql.html">Notes about the MySQL Database backend</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="postgresql.html">Notes about the PostgreSQL Database backend</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="implementation.html">Richard Jones implementation notes</a></li> 
      </ul> </li> 
     <li class="toctree-l1"><a class="reference external" href="https://issues.roundup-tracker.org">Issues</a></li> 
     <li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact</a></li> 
     <li class="toctree-l1"><a class="reference external" href="https://wiki.roundup-tracker.org">Wiki</a></li> 
     <li class="toctree-l1"><a class="reference internal" href="../code.html">Code</a></li> 
    </ul> 
   </div> 
  </div> 
  <div class="content"> 
   <div id="subnav"> <a title="Roundup - An Issue-Tracking System for Knowledge Workers" href="design.html"> Prev</a> <a title="MySQL Backend" href="mysql.html"> Next</a> <a title="Index" href="../genindex.html"> Index</a> 
   </div> 
   <div class="section" id="developing-roundup"> 
    <h1>Developing Roundup</h1> 
    <div class="admonition note"> 
     <p class="first admonition-title">Note</p> 
     <p class="last">The intended audience of this document is the developers of the core Roundup code. If you just wish to alter some behaviour of your Roundup installation, see <a class="reference external" href="customizing.html">customising roundup</a>.</p> 
    </div> 
    <p>Contents</p> 
    <div class="contents local topic" id="contents"> 
     <ul class="simple"> 
      <li><a class="reference internal" href="#getting-started" id="id2">Getting Started</a></li> 
      <li><a class="reference internal" href="#small-changes" id="id3">Small Changes</a></li> 
      <li><a class="reference internal" href="#source-repository-access" id="id4">Source Repository Access</a></li> 
      <li><a class="reference internal" href="#project-rules" id="id5">Project Rules</a></li> 
      <li><a class="reference internal" href="#debugging-aids" id="id6">Debugging Aids</a></li> 
      <li><a class="reference internal" href="#internationalization-notes" id="id7">Internationalization Notes</a>
       <ul> 
        <li><a class="reference internal" href="#gnu-gettext-package" id="id8">GNU gettext package</a></li> 
        <li><a class="reference internal" href="#marking-strings-for-translation" id="id9">Marking Strings for Translation</a></li> 
        <li><a class="reference internal" href="#command-line-interfaces" id="id10">Command Line Interfaces</a></li> 
        <li><a class="reference internal" href="#deferred-translations" id="id11">Deferred Translations</a></li> 
        <li><a class="reference internal" href="#web-user-interface" id="id12">Web User Interface</a>
         <ul> 
          <li><a class="reference internal" href="#extracting-translatable-messages" id="id13">Extracting Translatable Messages</a></li> 
          <li><a class="reference internal" href="#translating-messages" id="id14">Translating Messages</a></li> 
          <li><a class="reference internal" href="#compiling-message-catalogs" id="id15">Compiling Message Catalogs</a></li> 
         </ul> </li> 
       </ul> </li> 
     </ul> 
    </div> 
    <p>If you are looking for info on managing the roundup-tracker.org infrastructure, that information has migrated to website/README.txt in the roundup repo.</p> 
    <div class="section" id="getting-started"> 
     <h2><a class="toc-backref" href="#id2">Getting Started</a></h2> 
     <p>Anyone wishing to help in the development of Roundup must read <a class="reference external" href="spec.html">Roundup’s Design Document</a> and the <a class="reference external" href="implementation.html">implementation notes</a>.</p> 
     <p>All development is coordinated through two resources:</p> 
     <ul class="simple"> 
      <li>roundup-devel mailing list at <a class="reference external" href="https://sourceforge.net/projects/roundup/lists/roundup-devel">https://sourceforge.net/projects/roundup/lists/roundup-devel</a></li> 
      <li>The issue tracker running at <a class="reference external" href="https://issues.roundup-tracker.org/">https://issues.roundup-tracker.org/</a></li> 
     </ul> 
    </div> 
    <div class="section" id="small-changes"> 
     <h2><a class="toc-backref" href="#id3">Small Changes</a></h2> 
     <p>Most small changes can be submitted as patches through the <a class="reference external" href="https://issues.roundup-tracker.org/">issue tracker</a> or sent to <a class="reference external" href="https://sourceforge.net/projects/roundup/lists/roundup-devel">roundup-devel mailing list</a>.</p> 
    </div> 
    <div class="section" id="source-repository-access"> 
     <h2><a class="toc-backref" href="#id4">Source Repository Access</a></h2> 
     <p>See <a class="reference external" href="https://www.roundup-tracker.org/code.html">https://www.roundup-tracker.org/code.html</a>. For all other questions ask on the development mailinglist.</p> 
    </div> 
    <div class="section" id="project-rules"> 
     <h2><a class="toc-backref" href="#id5">Project Rules</a></h2> 
     <p>Mostly the project follows Guido’s Style (though naming tends to be a little relaxed sometimes). In short:</p> 
     <ul class="simple"> 
      <li>80 column width code</li> 
      <li>4-space indentations</li> 
      <li>All modules must have an Id line near the top</li> 
     </ul> 
     <p>Other project rules:</p> 
     <ul class="simple"> 
      <li>New functionality must be documented, even briefly (so at least we know where there’s missing documentation) and changes to tracker configuration must be logged in the upgrading document.</li> 
      <li>subscribe to roundup-checkins to receive checkin notifications from the other developers with write access to the source-code repository.</li> 
      <li>discuss any changes with the other developers on roundup-dev. If nothing else, this makes sure there’s no rude shocks</li> 
      <li>write unit tests for changes you make (where possible), and ensure that all unit tests run before committing changes</li> 
      <li>run pychecker over changed code</li> 
     </ul> 
     <p>The administrators of the project reserve the right to boot developers who consistently check in code which is either broken or takes the codebase in directions that have not been agreed to.</p> 
    </div> 
    <div class="section" id="debugging-aids"> 
     <h2><a class="toc-backref" href="#id6">Debugging Aids</a></h2> 
     <p>See <a class="reference internal" href="debugging.html"><span class="doc">debugging</span></a>.</p> 
    </div> 
    <div class="section" id="internationalization-notes"> 
     <h2><a class="toc-backref" href="#id7">Internationalization Notes</a></h2> 
     <p>How stuff works:</p> 
     <ol class="arabic simple"> 
      <li>Strings that may require translation (messages in human language) are marked in the source code. This step is discussed in <a class="reference internal" href="#marking-strings-for-translation">Marking Strings for Translation</a> section.</li> 
      <li>These strings are all extracted into Message Template File <code class="docutils literal notranslate"><span class="pre">locale/roundup.pot</span></code> (<span class="target" id="pot">POT</span> file). See <a class="reference internal" href="#extracting-translatable-messages">Extracting Translatable Messages</a> below.</li> 
      <li>Language teams use POT file to make Message Files for national languages (<span class="target" id="po">PO</span> files). All PO files for Roundup are kept in the <code class="docutils literal notranslate"><span class="pre">locale</span></code> directory. Names of these files are target locale names, usually just 2-letter language codes. <a class="reference internal" href="#translating-messages">Translating Messages</a> section of this chapter gives useful hints for message translators.</li> 
      <li>Translated Message Files are compiled into binary form (<span class="target" id="mo">MO</span> files) and stored in <code class="docutils literal notranslate"><span class="pre">locale</span></code> directory (but not kept in the source code repository, as they may be easily made from PO files). See <a class="reference internal" href="#compiling-message-catalogs">Compiling Message Catalogs</a> section.</li> 
      <li>Roundup installer creates runtime locale structure on the file system, putting MO files in their appropriate places.</li> 
      <li>Runtime internationalization (<span class="target" id="i18n">I18N</span>) services use these MO files to translate program messages into language selected by current Roundup user. Roundup command line interface uses locale name set in OS environment variable <code class="docutils literal notranslate"><span class="pre">LANGUAGE</span></code>, <code class="docutils literal notranslate"><span class="pre">LC_ALL</span></code>, <code class="docutils literal notranslate"><span class="pre">LC_MESSAGES</span></code>, or <code class="docutils literal notranslate"><span class="pre">LANG</span></code> (in that order). Roundup Web User Interface uses language selected by currently authenticated user.</li> 
     </ol> 
     <p>Additional details may be found in <a class="reference internal" href="#gnu-gettext">GNU gettext</a> and Python <a class="reference external" href="https://docs.python.org/2/library/gettext.html">gettext module</a> documentation.</p> 
     <p><a class="reference external" href="https://sourceforge.net/projects/roundup/files/">Roundup source distribution</a> includes POT and PO files for message translators, and also pre-built MO files to facilitate installations from source. Roundup binary distribution includes MO files only.</p> 
     <div class="section" id="gnu-gettext-package"> <span id="gnu-gettext"></span>
      <h3><a class="toc-backref" href="#id8">GNU gettext package</a></h3> 
      <p>This chapter is full of references to GNU <a class="reference external" href="http://www.gnu.org/savannah-checkouts/gnu/gettext/manual/gettext.html">gettext package</a>. GNU gettext is a “must have” for nearly all steps of internationalizing any program, and it’s manual is definetely a recommended reading for people involved in <a class="reference internal" href="#i18n">I18N</a>.</p> 
      <p>There are GNU gettext ports to all major OS platforms. Windows binaries are available from <a class="reference external" href="http://www.gnu.org/prep/ftp.html">GNU mirror sites</a>.</p> 
      <p>Roundup does not use GNU gettext at runtime, but it’s tools are used for <a class="reference internal" href="#extracting-translatable-messages">extracting translatable messages</a>, <a class="reference internal" href="#compiling-message-catalogs">compiling message catalogs</a> and, optionally, for <a class="reference internal" href="#translating-messages">translating messages</a>.</p> 
      <p>Note that <code class="docutils literal notranslate"><span class="pre">gettext</span></code> package in some OS distributions means just runtime tools and libraries. In such cases gettext development tools are usually distributed in separate package named <code class="docutils literal notranslate"><span class="pre">gettext-devel</span></code>.</p> 
     </div> 
     <div class="section" id="marking-strings-for-translation"> 
      <h3><a class="toc-backref" href="#id9">Marking Strings for Translation</a></h3> 
      <p>Strings that need translation must be marked in the source code. Following subsections explain how this is done in different cases.</p> 
      <p>If translatable string is used as a format string, it is recommended to always use <em>named</em> format specifiers:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="n">_</span><span class="p">(</span><span class="s1">'Index of </span><span class="si">%(classname)s</span><span class="s1">'</span><span class="p">)</span> <span class="o">%</span> <span class="nb">locals</span><span class="p">()</span>
</pre>
       </div> 
      </div> 
      <p>This helps translators to better understand the context of the message and, with Python formatting, remove format specifier altogether (which is sometimes useful, especially in singular cases of <a class="reference external" href="http://www.gnu.org/savannah-checkouts/gnu/gettext/manual/gettext.html">Plural Forms</a>).</p> 
      <p>When there is more than one format specifier in the translatable format string, named format specifiers <strong>must</strong> be used almost always, because translation may require different order of items.</p> 
      <p>It is better to <em>not</em> mark for translation strings that are not locale-dependent, as this makes it more difficult to keep track of translation completeness. For example, string <code class="docutils literal notranslate"><span class="pre">&lt;/ol&gt;&lt;/body&gt;&lt;/html&gt;</span></code> (in <code class="docutils literal notranslate"><span class="pre">index()</span></code> method of the request handler in <code class="docutils literal notranslate"><span class="pre">roundup_server</span></code> script) has no human readable parts at all, and needs no translations. Such strings are left untranslated in PO files, and are reported as such by PO status checkers (e.g. <code class="docutils literal notranslate"><span class="pre">msgfmt</span> <span class="pre">--statistics</span></code>).</p> 
     </div> 
     <div class="section" id="command-line-interfaces"> 
      <h3><a class="toc-backref" href="#id10">Command Line Interfaces</a></h3> 
      <p>Scripts and routines run from the command line use “static” language defined by environment variables recognized by <code class="docutils literal notranslate"><span class="pre">gettext</span></code> module from Python library (<code class="docutils literal notranslate"><span class="pre">LANGUAGE</span></code>, <code class="docutils literal notranslate"><span class="pre">LC_ALL</span></code>, <code class="docutils literal notranslate"><span class="pre">LC_MESSAGES</span></code>, and <code class="docutils literal notranslate"><span class="pre">LANG</span></code>). Primarily, these are <code class="docutils literal notranslate"><span class="pre">roundup-admin</span></code> script and <code class="docutils literal notranslate"><span class="pre">admin.py</span></code> module, but also help texts and startup error messages in other scripts and their supporting modules.</p> 
      <p>For these interfaces, Python <code class="docutils literal notranslate"><span class="pre">gettext</span></code> engine must be initialized to use Roundup message catalogs. This is normally done by including the following line in the module imports:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="kn">from</span> <span class="nn">i18n</span> <span class="k">import</span> <span class="n">_</span><span class="p">,</span> <span class="n">ngettext</span>
</pre>
       </div> 
      </div> 
      <p>Simple translations are automatically marked by calls to builtin message translation function <code class="docutils literal notranslate"><span class="pre">_()</span></code>:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">"This message is translated"</span><span class="p">))</span>
</pre>
       </div> 
      </div> 
      <p>Translations for messages whose grammatical depends on a number must be done by <code class="docutils literal notranslate"><span class="pre">ngettext()</span></code> function:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ngettext</span><span class="p">(</span><span class="s2">"Nuked </span><span class="si">%i</span><span class="s2"> file"</span><span class="p">,</span> <span class="s2">"Nuked </span><span class="si">%i</span><span class="s2"> files"</span><span class="p">,</span> <span class="n">number_of_files_nuked</span><span class="p">))</span>
</pre>
       </div> 
      </div> 
     </div> 
     <div class="section" id="deferred-translations"> 
      <h3><a class="toc-backref" href="#id11">Deferred Translations</a></h3> 
      <p>Sometimes translatable strings appear in the source code in untranslated form <a class="footnote-reference" href="#note-admin-py" id="id1">[1]</a> and must be translated elsewhere. Example:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="k">for</span> <span class="n">meal</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"spam"</span><span class="p">,</span> <span class="s2">"egg"</span><span class="p">,</span> <span class="s2">"beacon"</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="n">meal</span><span class="p">))</span>
</pre>
       </div> 
      </div> 
      <p>In such cases, strings must be marked for translation without actual call to the translating function. To mark these strings, we use Python feature of automatic concatenation of adjacent strings and different types of string quotes:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="n">strings_to_translate</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">''</span><span class="s2">"This string will be translated"</span><span class="p">,</span>
    <span class="s2">""</span><span class="s1">'me too'</span><span class="p">,</span>
    <span class="s1">''</span><span class="sa">r</span><span class="s2">"\raw string"</span><span class="p">,</span>
    <span class="s1">''</span><span class="s2">"""</span>
<span class="s2">    multiline string"""</span>
<span class="p">)</span>
</pre>
       </div> 
      </div> 
      <table class="docutils footnote" frame="void" id="note-admin-py" rules="none"> 
       <colgroup>
        <col class="label">
        <col>
       </colgroup> 
       <tbody valign="top"> 
        <tr>
         <td class="label"><a class="fn-backref" href="#id1">[1]</a></td>
         <td>In current Roundup sources, this feature is extensively used in the <code class="docutils literal notranslate"><span class="pre">admin</span></code> module using method docstrings as help messages.</td>
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="section" id="web-user-interface"> 
      <h3><a class="toc-backref" href="#id12">Web User Interface</a></h3> 
      <p>For Web User Interface, translation services are provided by Client object. Action classes have methods <code class="docutils literal notranslate"><span class="pre">_()</span></code> and <code class="docutils literal notranslate"><span class="pre">gettext()</span></code>, delegating translation to the Client instance. In HTML templates, translator object is available as context variable <code class="docutils literal notranslate"><span class="pre">i18n</span></code>.</p> 
      <p>HTML templates have special markup for translatable strings. The syntax for this markup is discussed at <a class="reference external" href="http://grok.zope.org/documentation/how-to/how-to-internationalize-your-application/view">ZPTInternationalization</a>. (Originally documented at <a class="reference external" href="http://dev.zope.org/Wikis/DevSite/Projects/ComponentArchitecture/ZPTInternationalizationSupport">http://dev.zope.org/Wikis/DevSite/Projects/ComponentArchitecture/ZPTInternationalizationSupport</a> which is now gone.) Roundup translation service currently ignores values for <code class="docutils literal notranslate"><span class="pre">i18n:domain</span></code>, <code class="docutils literal notranslate"><span class="pre">i18n:source</span></code> and <code class="docutils literal notranslate"><span class="pre">i18n:target</span></code>.</p> 
      <p>Template markup examples:</p> 
      <ul> 
       <li><p class="first">simplest case:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span>&lt;div i18n:translate=""&gt;
 Say
 no
 more!
&lt;/div&gt;
</pre>
         </div> 
        </div> <p>this will result in msgid <code class="docutils literal notranslate"><span class="pre">"Say</span> <span class="pre">no</span> <span class="pre">more!"</span></code>, with all leading and trailing whitespace stripped, and inner blanks replaced with single space character.</p> </li> 
       <li><p class="first">using variable slots:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">i18n</span><span class="p">:</span><span class="n">translate</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span>
 <span class="n">And</span> <span class="n">now</span><span class="o">...&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
 <span class="n">No</span><span class="o">.&lt;</span><span class="n">span</span> <span class="n">tal</span><span class="p">:</span><span class="n">replace</span><span class="o">=</span><span class="s2">"number"</span> <span class="n">i18n</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="s2">"slideNo"</span> <span class="o">/&gt;&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
 <span class="n">THE</span> <span class="n">LARCH</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre>
         </div> 
        </div> <p>Msgid will be: <code class="docutils literal notranslate"><span class="pre">"And</span> <span class="pre">now...&lt;br</span> <span class="pre">/&gt;</span> <span class="pre">No.${slideNo}&lt;br</span> <span class="pre">/&gt;</span> <span class="pre">THE</span> <span class="pre">LARCH"</span></code>. Template rendering will use context variable <code class="docutils literal notranslate"><span class="pre">number</span></code> (you may use any expression) to put instead of <code class="docutils literal notranslate"><span class="pre">${slideNo}</span></code> in translation.</p> </li> 
       <li><p class="first">attribute translation:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="o">&lt;</span><span class="n">button</span> <span class="n">name</span><span class="o">=</span><span class="s2">"btn_wink"</span> <span class="n">value</span><span class="o">=</span><span class="s2">" Wink "</span> <span class="n">i18n</span><span class="p">:</span><span class="n">attributes</span><span class="o">=</span><span class="s2">"value"</span> <span class="o">/&gt;</span>
</pre>
         </div> 
        </div> <p>will translate the caption (and return value) for the “wink” button.</p> </li> 
       <li><p class="first">explicit msgids. Sometimes it may be useful to specify msgid for the element translation explicitely, like this:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="o">&lt;</span><span class="n">span</span> <span class="n">i18n</span><span class="p">:</span><span class="n">translate</span><span class="o">=</span><span class="s2">"know what i mean?"</span><span class="o">&gt;</span><span class="n">this</span> <span class="n">text</span> <span class="ow">is</span> <span class="n">ignored</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</pre>
         </div> 
        </div> <p>When rendered, element contents will be replaced by translation of the string specified in <code class="docutils literal notranslate"><span class="pre">i18n:translate</span></code> attribute.</p> </li> 
       <li><p class="first"><code class="docutils literal notranslate"><span class="pre">i18n</span></code> in <a class="reference external" href="https://pagetemplates.readthedocs.io/en/latest/history/TALESSpecification13.html">TALES</a>. You may translate strings in <a class="reference external" href="https://pagetemplates.readthedocs.io/en/latest/history/TALESSpecification13.html">TALES</a> python expressions:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="o">&lt;</span><span class="n">span</span> <span class="n">tal</span><span class="p">:</span><span class="n">replace</span><span class="o">=</span><span class="s2">"python: i18n.gettext('Oh, wicked.')"</span> <span class="o">/&gt;</span>
</pre>
         </div> 
        </div> </li> 
       <li><p class="first">plural forms. There is no markup for plural forms in <a class="reference external" href="https://pagetemplates.readthedocs.io/en/latest/history/TALSpecification14.html">TAL</a> i18n. You must use python expression for that:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="o">&lt;</span><span class="n">span</span> <span class="n">tal</span><span class="p">:</span><span class="n">replace</span><span class="o">=</span><span class="s2">"python: i18n.ngettext(</span>
  <span class="s1">'Oh but it</span><span class="se">\'</span><span class="s1">s only </span><span class="si">%i</span><span class="s1"> shilling.'</span><span class="p">,</span>
  <span class="s1">'Oh but it</span><span class="se">\'</span><span class="s1">s only </span><span class="si">%i</span><span class="s1"> shillings.'</span><span class="p">,</span>
  <span class="n">fine</span><span class="p">)</span> <span class="o">%</span> <span class="n">fine</span><span class="s2">"</span>
<span class="o">/&gt;</span>
</pre>
         </div> 
        </div> </li> 
      </ul> 
      <div class="section" id="extracting-translatable-messages"> 
       <h4><a class="toc-backref" href="#id13">Extracting Translatable Messages</a></h4> 
       <p>The most common tool for message extraction is <code class="docutils literal notranslate"><span class="pre">xgettext</span></code> utility from <a class="reference internal" href="#gnu-gettext-package">GNU gettext package</a>. Unfortunately, this utility has no means of <a class="reference internal" href="#deferred-translations">Deferred Translations</a> in Python sources. There is <code class="docutils literal notranslate"><span class="pre">xpot</span></code> tool from Francois Pinard free <a class="reference external" href="https://github.com/pinard/po-utils">PO utilities</a> that allows to mark strings for deferred translations, but it does not handle <a class="reference external" href="http://www.gnu.org/savannah-checkouts/gnu/gettext/manual/gettext.html">plural forms</a>.</p> 
       <p>Roundup overcomes these limitations by using both of these utilities. This means that you need both <a class="reference internal" href="#gnu-gettext">GNU gettext</a> tools and <a class="reference external" href="https://github.com/pinard/po-utils">PO utilities</a> to build the Message Template File yourself.</p> 
       <p>Latest Message Template File is kept in the source code repository and distributed with <a class="reference external" href="https://sourceforge.net/projects/roundup/files/">Roundup Source</a>. If you wish to rebuild the template yourself, make sure that you have both <code class="docutils literal notranslate"><span class="pre">xpot</span></code> and <code class="docutils literal notranslate"><span class="pre">xgettext</span></code> installed and just run <code class="docutils literal notranslate"><span class="pre">gmake</span></code> (or <code class="docutils literal notranslate"><span class="pre">make</span></code>, if you are on a <a class="reference external" href="http://www.gnu.org/">GNU</a> system like <a class="reference external" href="https://www.linux.org/">linux</a> or <a class="reference external" href="https://www.cygwin.com/">cygwin</a>) in the <code class="docutils literal notranslate"><span class="pre">locale</span></code> directory.</p> 
       <p>For on-site i18n, Roundup provides command-line utility:</p> 
       <div class="highlight-default notranslate">
        <div class="highlight">
         <pre><span></span><span class="n">roundup</span><span class="o">-</span><span class="n">gettext</span> <span class="o">&lt;</span><span class="n">tracker_home</span><span class="o">&gt;</span>
</pre>
        </div> 
       </div> 
       <p>extracting translatable messages from tracker’s html templates. This utility creates message template file <code class="docutils literal notranslate"><span class="pre">messages.pot</span></code> in <code class="docutils literal notranslate"><span class="pre">locale</span></code> subdirectory of the tracker home directory. Translated messages may be put in <em>locale</em>.po files (where <em>locale</em> is selected locale name) in the same directory, e.g.: <code class="docutils literal notranslate"><span class="pre">locale/ru.po</span></code>. These message catalogs are searched prior to system-wide translations kept in the <code class="docutils literal notranslate"><span class="pre">share</span></code> directory.</p> 
      </div> 
      <div class="section" id="translating-messages"> 
       <h4><a class="toc-backref" href="#id14">Translating Messages</a></h4> 
       <p>Gettext Message File (<a class="reference internal" href="#po">PO</a> file) is a plain text file, that can be created by simple copying <code class="docutils literal notranslate"><span class="pre">roundup.pot</span></code> to new .po file, like this:</p> 
       <div class="highlight-default notranslate">
        <div class="highlight">
         <pre><span></span>$ cp roundup.pot ru.po
</pre>
        </div> 
       </div> 
       <p>The name of PO file is target locale name, usually just 2-letter language code (<code class="docutils literal notranslate"><span class="pre">ru</span></code> for Russian in the above example). Alternatively, PO file may be initialized by <code class="docutils literal notranslate"><span class="pre">msginit</span></code> utility from <a class="reference internal" href="#gnu-gettext">GNU gettext</a> tools:</p> 
       <div class="highlight-default notranslate">
        <div class="highlight">
         <pre><span></span>$ msginit -i roundup.pot
</pre>
        </div> 
       </div> 
       <p><code class="docutils literal notranslate"><span class="pre">msginit</span></code> will check your current locale, and initialize the header entry, setting language name, rules for <a class="reference external" href="http://www.gnu.org/savannah-checkouts/gnu/gettext/manual/gettext.html">plural forms</a> and, if available, translator’s name and email address. The name for PO file is also chosen based on current locale.</p> 
       <p>Next, you will need to edit this file, filling all <code class="docutils literal notranslate"><span class="pre">msgstr</span></code> lines with translations of the above <code class="docutils literal notranslate"><span class="pre">msgid</span></code> entries. PO file is a plain text file that can be edited with any text editor. However, there are several tools that may help you with this process:</p> 
       <blockquote> 
        <div>
         <ul class="simple"> 
          <li><a class="reference external" href="https://poedit.net/">poEdit</a> by Vaclav Slavik. Very nice cross-platform GUI editor.</li> 
          <li>
           <dl class="first docutils"> 
            <dt>
             <a class="reference external" href="Lokalize">Lokalize</a>. A replacement for KBabel. Being part of <a class="reference external" href="https://kde.org/">KDE</a>, it
            </dt> 
            <dd>
             works in X windows only. Haven’t had much experience with it, though.
            </dd> 
           </dl> </li> 
          <li><code class="docutils literal notranslate"><span class="pre">po-mode</span></code> for <a class="reference external" href="https://www.gnu.org/software/emacs/">emacs</a>. One of <a class="reference internal" href="#gnu-gettext">GNU gettext</a> tools. Very handy, definitely recommended if you are comfortable with emacs. Cannot handle <a class="reference external" href="http://www.gnu.org/savannah-checkouts/gnu/gettext/manual/gettext.html">plural forms</a> per se, but allows to edit them in simple text mode.</li> 
          <li><a class="reference external" href="https://vim.sourceforge.io/scripts/script.php?script_id=695">po filetype plugin</a> for <a class="reference external" href="https://www.vim.org/">vim</a>. Does not do as much as <code class="docutils literal notranslate"><span class="pre">po-mode</span></code>, but helps in finding untranslated and fuzzy strings, and checking code references. Please contact <a class="reference external" href="https://sourceforge.net/u/a1s/profile/">alexander smishlajev</a> if you prefer this, as i have patched this plugin a bit. I have also informed the original plugin author about these changes, but got no reply so far.</li> 
         </ul> 
        </div>
       </blockquote> 
      </div> 
      <div class="section" id="compiling-message-catalogs"> 
       <h4><a class="toc-backref" href="#id15">Compiling Message Catalogs</a></h4> 
       <p>Message catalogs (<a class="reference internal" href="#po">PO</a> files) must be compiled into binary form (<a class="reference internal" href="#mo">MO</a> files) before they can be used in the application. This compilation is handled by <code class="docutils literal notranslate"><span class="pre">msgfmt</span></code> utility from <a class="reference internal" href="#gnu-gettext">GNU gettext</a> tools. <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code> in the <code class="docutils literal notranslate"><span class="pre">locale</span></code> directory automatically compiles all existing message catalogs after updating them from Roundup source files. If you wish to rebuild an individual <a class="reference internal" href="#mo">MO</a> file without making everything else, you may, for example:</p> 
       <div class="highlight-default notranslate">
        <div class="highlight">
         <pre><span></span>$ msgfmt --statistics -o ru.mo ru.po
</pre>
        </div> 
       </div> 
       <p>This way, message translators can check their <a class="reference internal" href="#po">PO</a> files without extracting strings from source. (Note: String extraction requires additional utility that is not part of <a class="reference internal" href="#gnu-gettext">GNU gettext</a>. See <a class="reference internal" href="#extracting-translatable-messages">Extracting Translatable Messages</a>.)</p> 
       <p>At run time, Roundup automatically compiles message catalogs whenever <a class="reference internal" href="#po">PO</a> file is changed.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="footer"> 
   <div> <span class="source">[<a href="../_sources/docs/developers.txt" rel="nofollow">page source</a>]</span> © Copyright 2009-2021, Richard Jones, Roundup-Team. 
   </div> 
   <div>
     Last updated on May 09, 2022. <span>Hosted by <a href="https://sourceforge.net"><img src="https://sflogo.sourceforge.net/sflogo.php?group_id=31577&amp;type=1" width="88" height="31" border="0" alt="SourceForge.net Logo"></a></span> 
   </div> 
  </div> 
  <script>
      /* locally hosted goatcounter https://www.goatcounter.com/ */
      /* include site info in path url to allow multiple sites to be
      tracked together */
      window.goatcounter = {
      path: function(p) { return location.host + p }
      }
    </script> 
  <script data-goatcounter="https://stats.rouilj.dynamic-dns.net/count" integrity="sha384-QGgNMMRFTi8ul5kHJ+vXysPe8gySvSA/Y3rpXZiRLzKPIw8CWY+a3ObKmQsyDr+a" async src="/_static/goatcounter_count.v3.js">
    </script>  
 </body>
</html>