<!doctype html>
<html> 
 <head> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/"> 
  <title>What’s New In Python 3.11 — Python 3.11.0b1 documentation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="stylesheet" type="text/css" href="../_static/pygments.css"> 
  <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?2022.1"> 
  <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script> 
  <script src="../_static/jquery.js"></script> 
  <script src="../_static/underscore.js"></script> 
  <script src="../_static/doctools.js"></script> 
  <script src="../_static/sidebar.js"></script> 
  <link rel="search" type="application/opensearchdescription+xml" title="Search within Python 3.11.0b1 documentation" href="../_static/opensearch.xml"> 
  <link rel="author" title="About these documents" href="../about.html"> 
  <link rel="index" title="Index" href="../genindex.html"> 
  <link rel="search" title="Search" href="../search.html"> 
  <link rel="copyright" title="Copyright" href="../copyright.html"> 
  <link rel="next" title="What’s New In Python 3.10" href="3.10.html"> 
  <link rel="prev" title="What’s New in Python" href="index.html"> 
  <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.11.html"> 
  <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style> 
  <link rel="shortcut icon" type="image/png" href="../_static/py.svg"> 
  <script type="text/javascript" src="../_static/copybutton.js"></script> 
  <script type="text/javascript" src="../_static/menu.js"></script> 
 </head> 
 <body> 
  <div class="mobile-nav"> 
   <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation" aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu"> <label for="menuToggler" class="toggler__label"> <span></span> </label> 
   <nav class="nav-content" role="navigation"> <a href="https://www.python.org/" class="nav-logo"> <img src="../_static/py.svg" alt="Logo"> </a> 
    <div class="version_switcher_placeholder"></div> 
    <form role="search" class="search" action="../search.html" method="get"> 
     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewbox="0 0 24 24" class="search-icon"> <path fill-rule="nonzero" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path> 
     </svg> 
     <input type="text" name="q" aria-label="Quick search"> 
     <input type="submit" value="Go"> 
    </form> 
   </nav> 
   <div class="menu-wrapper"> 
    <nav class="menu" role="navigation" aria-label="main navigation"> 
     <div class="language_switcher_placeholder"></div> 
     <div> 
      <h3><a href="../contents.html">Table of Contents</a></h3> 
      <ul> 
       <li><a class="reference internal" href="#">What’s New In Python 3.11</a>
        <ul> 
         <li><a class="reference internal" href="#summary-release-highlights">Summary – Release highlights</a></li> 
         <li><a class="reference internal" href="#new-features">New Features</a>
          <ul> 
           <li><a class="reference internal" href="#enhanced-error-locations-in-tracebacks">Enhanced error locations in tracebacks</a>
            <ul> 
             <li><a class="reference internal" href="#column-information-for-code-objects">Column information for code objects</a></li> 
             <li><a class="reference internal" href="#exceptions-can-be-enriched-with-notes-pep-678">Exceptions can be enriched with notes (PEP 678)</a></li> 
            </ul> </li> 
          </ul> </li> 
         <li><a class="reference internal" href="#new-features-related-to-type-hints">New Features Related to Type Hints</a>
          <ul> 
           <li><a class="reference internal" href="#pep-646-variadic-generics">PEP 646: Variadic generics</a></li> 
           <li><a class="reference internal" href="#pep-655-marking-individual-typeddict-items-as-required-or-not-required">PEP 655: Marking individual <code class="docutils literal notranslate"><span class="pre">TypedDict</span></code> items as required or not-required</a></li> 
           <li><a class="reference internal" href="#pep-673-self-type">PEP 673: <code class="docutils literal notranslate"><span class="pre">Self</span></code> type</a></li> 
           <li><a class="reference internal" href="#pep-675-arbitrary-literal-string-type">PEP 675: Arbitrary literal string type</a></li> 
           <li><a class="reference internal" href="#pep-681-data-class-transforms">PEP 681: Data Class Transforms</a></li> 
          </ul> </li> 
         <li><a class="reference internal" href="#other-language-changes">Other Language Changes</a></li> 
         <li><a class="reference internal" href="#other-cpython-implementation-changes">Other CPython Implementation Changes</a></li> 
         <li><a class="reference internal" href="#new-modules">New Modules</a></li> 
         <li><a class="reference internal" href="#improved-modules">Improved Modules</a>
          <ul> 
           <li><a class="reference internal" href="#asyncio">asyncio</a></li> 
           <li><a class="reference internal" href="#datetime">datetime</a></li> 
           <li><a class="reference internal" href="#fractions">fractions</a></li> 
           <li><a class="reference internal" href="#functools">functools</a></li> 
           <li><a class="reference internal" href="#hashlib">hashlib</a></li> 
           <li><a class="reference internal" href="#idle-and-idlelib">IDLE and idlelib</a></li> 
           <li><a class="reference internal" href="#inspect">inspect</a></li> 
           <li><a class="reference internal" href="#locale">locale</a></li> 
           <li><a class="reference internal" href="#math">math</a></li> 
           <li><a class="reference internal" href="#operator">operator</a></li> 
           <li><a class="reference internal" href="#os">os</a></li> 
           <li><a class="reference internal" href="#pathlib">pathlib</a></li> 
           <li><a class="reference internal" href="#re">re</a></li> 
           <li><a class="reference internal" href="#shutil">shutil</a></li> 
           <li><a class="reference internal" href="#socket">socket</a></li> 
           <li><a class="reference internal" href="#sqlite3">sqlite3</a></li> 
           <li><a class="reference internal" href="#sys">sys</a></li> 
           <li><a class="reference internal" href="#sysconfig">sysconfig</a></li> 
           <li><a class="reference internal" href="#threading">threading</a></li> 
           <li><a class="reference internal" href="#time">time</a></li> 
           <li><a class="reference internal" href="#typing">typing</a></li> 
           <li><a class="reference internal" href="#tkinter">tkinter</a></li> 
           <li><a class="reference internal" href="#unicodedata">unicodedata</a></li> 
           <li><a class="reference internal" href="#unittest">unittest</a></li> 
           <li><a class="reference internal" href="#venv">venv</a></li> 
           <li><a class="reference internal" href="#warnings">warnings</a></li> 
           <li><a class="reference internal" href="#zipfile">zipfile</a></li> 
           <li><a class="reference internal" href="#fcntl">fcntl</a></li> 
          </ul> </li> 
         <li><a class="reference internal" href="#optimizations">Optimizations</a></li> 
         <li><a class="reference internal" href="#faster-cpython">Faster CPython</a>
          <ul> 
           <li><a class="reference internal" href="#faster-startup">Faster Startup</a>
            <ul> 
             <li><a class="reference internal" href="#frozen-imports-static-code-objects">Frozen imports / Static code objects</a></li> 
            </ul> </li> 
           <li><a class="reference internal" href="#faster-runtime">Faster Runtime</a>
            <ul> 
             <li><a class="reference internal" href="#cheaper-lazy-python-frames">Cheaper, lazy Python frames</a></li> 
             <li><a class="reference internal" href="#inlined-python-function-calls">Inlined Python function calls</a></li> 
             <li><a class="reference internal" href="#pep-659-specializing-adaptive-interpreter">PEP 659: Specializing Adaptive Interpreter</a></li> 
            </ul> </li> 
           <li><a class="reference internal" href="#misc">Misc</a></li> 
           <li><a class="reference internal" href="#faq">FAQ</a></li> 
           <li><a class="reference internal" href="#about">About</a></li> 
          </ul> </li> 
         <li><a class="reference internal" href="#cpython-bytecode-changes">CPython bytecode changes</a></li> 
         <li><a class="reference internal" href="#deprecated">Deprecated</a></li> 
         <li><a class="reference internal" href="#pending-removal-in-python-3-12">Pending Removal in Python 3.12</a></li> 
         <li><a class="reference internal" href="#removed">Removed</a></li> 
         <li><a class="reference internal" href="#porting-to-python-3-11">Porting to Python 3.11</a>
          <ul> 
           <li><a class="reference internal" href="#changes-in-the-python-api">Changes in the Python API</a></li> 
          </ul> </li> 
         <li><a class="reference internal" href="#build-changes">Build Changes</a></li> 
         <li><a class="reference internal" href="#c-api-changes">C API Changes</a>
          <ul> 
           <li><a class="reference internal" href="#id5">New Features</a></li> 
           <li><a class="reference internal" href="#id6">Porting to Python 3.11</a></li> 
           <li><a class="reference internal" href="#id7">Deprecated</a></li> 
           <li><a class="reference internal" href="#id8">Removed</a></li> 
          </ul> </li> 
        </ul> </li> 
      </ul> 
     </div> 
     <div> 
      <h4>Previous topic</h4> 
      <p class="topless"><a href="index.html" title="previous chapter">What’s New in Python</a></p> 
     </div> 
     <div> 
      <h4>Next topic</h4> 
      <p class="topless"><a href="3.10.html" title="next chapter">What’s New In Python 3.10</a></p> 
     </div> 
     <div role="note" aria-label="source link"> 
      <h3>This Page</h3> 
      <ul class="this-page-menu"> 
       <li><a href="../bugs.html">Report a Bug</a></li> 
       <li> <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.11.rst" rel="nofollow">Show Source </a> </li> 
      </ul> 
     </div> 
    </nav> 
   </div> 
  </div> 
  <div class="related" role="navigation" aria-label="related navigation"> 
   <h3>Navigation</h3> 
   <ul> 
    <li class="right" style="margin-right: 10px"> <a href="../genindex.html" title="General Index" accesskey="I">index</a></li> 
    <li class="right"> <a href="../py-modindex.html" title="Python Module Index">modules</a> |</li> 
    <li class="right"> <a href="3.10.html" title="What’s New In Python 3.10" accesskey="N">next</a> |</li> 
    <li class="right"> <a href="index.html" title="What’s New in Python" accesskey="P">previous</a> |</li> 
    <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"></li> 
    <li><a href="https://www.python.org/">Python</a> »</li> 
    <li class="switchers"> 
     <div class="language_switcher_placeholder"></div> 
     <div class="version_switcher_placeholder"></div> </li> 
    <li> </li> 
    <li id="cpython-language-and-version"> <a href="../index.html">3.11.0b1 Documentation</a> » </li> 
    <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">What’s New in Python</a> »</li> 
    <li class="nav-item nav-item-this"><a href="">What’s New In Python 3.11</a></li> 
    <li class="right"> 
     <div class="inline-search" role="search"> 
      <form class="inline-search" action="../search.html" method="get"> 
       <input placeholder="Quick search" aria-label="Quick search" type="text" name="q"> 
       <input type="submit" value="Go"> 
       <input type="hidden" name="check_keywords" value="yes"> 
       <input type="hidden" name="area" value="default"> 
      </form> 
     </div> | </li> 
   </ul> 
  </div> 
  <div class="document"> 
   <div class="documentwrapper"> 
    <div class="bodywrapper"> 
     <div class="body" role="main"> 
      <section id="what-s-new-in-python-3-11"> 
       <h1>What’s New In Python 3.11<a class="headerlink" href="#what-s-new-in-python-3-11" title="Permalink to this headline">¶</a></h1> 
       <dl class="field-list simple"> 
        <dt class="field-odd">
         Release
        </dt> 
        <dd class="field-odd">
         <p>3.11.0b1</p> 
        </dd> 
        <dt class="field-even">
         Date
        </dt> 
        <dd class="field-even">
         <p>May 17, 2022</p> 
        </dd> 
       </dl> 
       <p>This article explains the new features in Python 3.11, compared to 3.10.</p> 
       <p>For full details, see the <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">changelog</span></a>.</p> 
       <div class="admonition note"> 
        <p class="admonition-title">Note</p> 
        <p>Prerelease users should be aware that this document is currently in draft form. It will be updated substantially as Python 3.11 moves towards release, so it’s worth checking back even after reading earlier versions.</p> 
       </div> 
       <section id="summary-release-highlights"> 
        <h2>Summary – Release highlights<a class="headerlink" href="#summary-release-highlights" title="Permalink to this headline">¶</a></h2> 
        <ul class="simple"> 
         <li><p>Python 3.11 is up to 10-60% faster than Python 3.10. On average, we measured a 1.25x speedup on the standard benchmark suite. See <a class="reference internal" href="#faster-cpython">Faster CPython</a> for details.</p></li> 
        </ul> 
        <p>New syntax features:</p> 
        <ul class="simple"> 
         <li><p><span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0654/"><strong>PEP 654</strong></a>: Exception Groups and <code class="docutils literal notranslate"><span class="pre">except*</span></code>. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45292">bpo-45292</a>.)</p></li> 
        </ul> 
        <p>New typing features:</p> 
        <ul class="simple"> 
         <li><p><span class="target" id="index-1"></span><a class="pep reference external" href="https://peps.python.org/pep-0646/"><strong>PEP 646</strong></a>: Variadic generics.</p></li> 
         <li><p><span class="target" id="index-2"></span><a class="pep reference external" href="https://peps.python.org/pep-0655/"><strong>PEP 655</strong></a>: Marking individual TypedDict items as required or potentially-missing.</p></li> 
         <li><p><span class="target" id="index-3"></span><a class="pep reference external" href="https://peps.python.org/pep-0673/"><strong>PEP 673</strong></a>: <code class="docutils literal notranslate"><span class="pre">Self</span></code> type.</p></li> 
         <li><p><span class="target" id="index-4"></span><a class="pep reference external" href="https://peps.python.org/pep-0675/"><strong>PEP 675</strong></a>: Arbitrary literal string type.</p></li> 
        </ul> 
        <p>Security improvements:</p> 
        <ul class="simple"> 
         <li><p>New <a class="reference internal" href="../using/cmdline.html#cmdoption-P"><code class="xref std std-option docutils literal notranslate"><span class="pre">-P</span></code></a> command line option and <span class="target" id="index-5"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONSAFEPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSAFEPATH</span></code></a> environment variable to not prepend a potentially unsafe path to <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> such as the current directory, the script’s directory or an empty string.</p></li> 
        </ul> 
       </section> 
       <section id="new-features"> 
        <h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2> 
        <section id="enhanced-error-locations-in-tracebacks"> <span id="whatsnew311-pep657"></span>
         <h3>Enhanced error locations in tracebacks<a class="headerlink" href="#enhanced-error-locations-in-tracebacks" title="Permalink to this headline">¶</a></h3> 
         <p>When printing tracebacks, the interpreter will now point to the exact expression that caused the error instead of just the line. For example:</p> 
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"distance.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">11</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">manhattan_distance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">))</span>
          <span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
  <span class="n">File</span> <span class="s2">"distance.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">6</span><span class="p">,</span> <span class="ow">in</span> <span class="n">manhattan_distance</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">point_1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">point_2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">point_1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">point_2</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                           <span class="o">^^^^^^^^^</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">'NoneType'</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">'x'</span>
</pre>
          </div> 
         </div> 
         <p>Previous versions of the interpreter would point to just the line making it ambiguous which object was <code class="docutils literal notranslate"><span class="pre">None</span></code>. These enhanced errors can also be helpful when dealing with deeply nested dictionary objects and multiple function calls,</p> 
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"query.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">37</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">magic_arithmetic</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span>
    <span class="o">^^^^^^^^^^^^^^^^^^^^^^^</span>
  <span class="n">File</span> <span class="s2">"query.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">18</span><span class="p">,</span> <span class="ow">in</span> <span class="n">magic_arithmetic</span>
    <span class="k">return</span> <span class="n">add_counts</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">25</span>
           <span class="o">^^^^^^^^^^^^^</span>
  <span class="n">File</span> <span class="s2">"query.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">24</span><span class="p">,</span> <span class="ow">in</span> <span class="n">add_counts</span>
    <span class="k">return</span> <span class="mi">25</span> <span class="o">+</span> <span class="n">query_user</span><span class="p">(</span><span class="n">user1</span><span class="p">)</span> <span class="o">+</span> <span class="n">query_user</span><span class="p">(</span><span class="n">user2</span><span class="p">)</span>
                <span class="o">^^^^^^^^^^^^^^^^^</span>
  <span class="n">File</span> <span class="s2">"query.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">32</span><span class="p">,</span> <span class="ow">in</span> <span class="n">query_user</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">query_count</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">response</span><span class="p">[</span><span class="s1">'a'</span><span class="p">][</span><span class="s1">'b'</span><span class="p">][</span><span class="s1">'c'</span><span class="p">][</span><span class="s1">'user'</span><span class="p">],</span> <span class="n">retry</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                               <span class="o">~~~~~~~~~~~~~~~~~~^^^^^</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">'NoneType'</span> <span class="nb">object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">subscriptable</span>
</pre>
          </div> 
         </div> 
         <p>as well as complex arithmetic expressions:</p> 
         <div class="highlight-python notranslate">
          <div class="highlight">
           <pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"calculation.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">54</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">y</span> <span class="o">/</span> <span class="n">z</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">/</span> <span class="n">b</span> <span class="o">/</span> <span class="n">c</span><span class="p">)</span>
              <span class="o">~~~~~~^~~</span>
<span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>
</pre>
          </div> 
         </div> 
         <p>See <span class="target" id="index-6"></span><a class="pep reference external" href="https://peps.python.org/pep-0657/"><strong>PEP 657</strong></a> for more details. (Contributed by Pablo Galindo, Batuhan Taskaya and Ammar Askar in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43950">bpo-43950</a>.)</p> 
         <div class="admonition note"> 
          <p class="admonition-title">Note</p> 
          <p>This feature requires storing column positions in code objects which may result in a small increase of disk usage of compiled Python files or interpreter memory usage. To avoid storing the extra information and/or deactivate printing the extra traceback information, the <a class="reference internal" href="../using/cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code></a> <code class="docutils literal notranslate"><span class="pre">no_debug_ranges</span></code> command line flag or the <span class="target" id="index-7"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONNODEBUGRANGES"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONNODEBUGRANGES</span></code></a> environment variable can be used.</p> 
         </div> 
         <section id="column-information-for-code-objects"> 
          <h4>Column information for code objects<a class="headerlink" href="#column-information-for-code-objects" title="Permalink to this headline">¶</a></h4> 
          <p>The information used by the enhanced traceback feature is made available as a general API that can be used to correlate bytecode instructions with source code. This information can be retrieved using:</p> 
          <ul class="simple"> 
           <li><p>The <a class="reference internal" href="../reference/datamodel.html#codeobject.co_positions" title="codeobject.co_positions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">codeobject.co_positions()</span></code></a> method in Python.</p></li> 
           <li><p>The <a class="reference internal" href="../c-api/code.html#c.PyCode_Addr2Location" title="PyCode_Addr2Location"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_Addr2Location()</span></code></a> function in the C-API.</p></li> 
          </ul> 
          <p>The <a class="reference internal" href="../using/cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code></a> <code class="docutils literal notranslate"><span class="pre">no_debug_ranges</span></code> option and the environment variable <span class="target" id="index-8"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONNODEBUGRANGES"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONNODEBUGRANGES</span></code></a> can be used to disable this feature.</p> 
          <p>See <span class="target" id="index-9"></span><a class="pep reference external" href="https://peps.python.org/pep-0657/"><strong>PEP 657</strong></a> for more details. (Contributed by Pablo Galindo, Batuhan Taskaya and Ammar Askar in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43950">bpo-43950</a>.)</p> 
         </section> 
         <section id="exceptions-can-be-enriched-with-notes-pep-678"> 
          <h4>Exceptions can be enriched with notes (PEP 678)<a class="headerlink" href="#exceptions-can-be-enriched-with-notes-pep-678" title="Permalink to this headline">¶</a></h4> 
          <p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_note()</span></code> method was added to <a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BaseException</span></code></a>. It can be used to enrich exceptions with context information which is not available at the time when the exception is raised. The notes added appear in the default traceback. See <span class="target" id="index-10"></span><a class="pep reference external" href="https://peps.python.org/pep-0678/"><strong>PEP 678</strong></a> for more details. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45607">bpo-45607</a>.)</p> 
         </section> 
        </section> 
       </section> 
       <section id="new-features-related-to-type-hints"> <span id="new-feat-related-type-hints-311"></span>
        <h2>New Features Related to Type Hints<a class="headerlink" href="#new-features-related-to-type-hints" title="Permalink to this headline">¶</a></h2> 
        <p>This section covers major changes affecting <span class="target" id="index-11"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> type hints and the <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> module.</p> 
        <section id="pep-646-variadic-generics"> 
         <h3>PEP 646: Variadic generics<a class="headerlink" href="#pep-646-variadic-generics" title="Permalink to this headline">¶</a></h3> 
         <p><span class="target" id="index-12"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> introduced <a class="reference internal" href="../library/typing.html#typing.TypeVar" title="typing.TypeVar"><code class="xref py py-data docutils literal notranslate"><span class="pre">TypeVar</span></code></a>, enabling creation of generics parameterised with a single type. <span class="target" id="index-13"></span><a class="pep reference external" href="https://peps.python.org/pep-0646/"><strong>PEP 646</strong></a> introduces <a class="reference internal" href="../library/typing.html#typing.TypeVarTuple" title="typing.TypeVarTuple"><code class="xref py py-data docutils literal notranslate"><span class="pre">TypeVarTuple</span></code></a>, enabling parameterisation with an <em>arbitrary</em> number of types. In other words, a <a class="reference internal" href="../library/typing.html#typing.TypeVarTuple" title="typing.TypeVarTuple"><code class="xref py py-data docutils literal notranslate"><span class="pre">TypeVarTuple</span></code></a> is a <em>variadic</em> type variable, enabling <em>variadic</em> generics. This enables a wide variety of use cases. In particular, it allows the type of array-like structures in numerical computing libraries such as NumPy and TensorFlow to be parameterised with the array <em>shape</em>. Static type checkers will now be able to catch shape-related bugs in code that uses these libraries.</p> 
         <p>See <span class="target" id="index-14"></span><a class="pep reference external" href="https://peps.python.org/pep-0646/"><strong>PEP 646</strong></a> for more details.</p> 
         <p>(Contributed by Matthew Rahtz in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43224">bpo-43224</a>, with contributions by Serhiy Storchaka and Jelle Zijlstra. PEP written by Mark Mendoza, Matthew Rahtz, Pradeep Kumar Srinivasan, and Vincent Siles.)</p> 
        </section> 
        <section id="pep-655-marking-individual-typeddict-items-as-required-or-not-required"> 
         <h3>PEP 655: Marking individual <code class="docutils literal notranslate"><span class="pre">TypedDict</span></code> items as required or not-required<a class="headerlink" href="#pep-655-marking-individual-typeddict-items-as-required-or-not-required" title="Permalink to this headline">¶</a></h3> 
         <p><code class="xref py py-data docutils literal notranslate"><span class="pre">Required</span></code> and <code class="xref py py-data docutils literal notranslate"><span class="pre">NotRequired</span></code> provide a straightforward way to mark whether individual items in a <a class="reference internal" href="../library/typing.html#typing.TypedDict" title="typing.TypedDict"><code class="xref py py-data docutils literal notranslate"><span class="pre">TypedDict</span></code></a> must be present. Previously this was only possible using inheritance.</p> 
         <p>Fields are still required by default, unless the <code class="docutils literal notranslate"><span class="pre">total=False</span></code> parameter is set. For example, the following specifies a dictionary with one required and one not-required key:</p> 
         <div class="highlight-python3 notranslate">
          <div class="highlight">
           <pre><span></span><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
   <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
   <span class="n">year</span><span class="p">:</span> <span class="n">NotRequired</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

<span class="n">m1</span><span class="p">:</span> <span class="n">Movie</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"title"</span><span class="p">:</span> <span class="s2">"Black Panther"</span><span class="p">,</span> <span class="s2">"year"</span><span class="p">:</span> <span class="mi">2018</span><span class="p">}</span>  <span class="c1"># ok</span>
<span class="n">m2</span><span class="p">:</span> <span class="n">Movie</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"title"</span><span class="p">:</span> <span class="s2">"Star Wars"</span><span class="p">}</span>  <span class="c1"># ok (year is not required)</span>
<span class="n">m3</span><span class="p">:</span> <span class="n">Movie</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"year"</span><span class="p">:</span> <span class="mi">2022</span><span class="p">}</span>  <span class="c1"># error (missing required field title)</span>
</pre>
          </div> 
         </div> 
         <p>The following definition is equivalent:</p> 
         <div class="highlight-python3 notranslate">
          <div class="highlight">
           <pre><span></span><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
   <span class="n">title</span><span class="p">:</span> <span class="n">Required</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
   <span class="n">year</span><span class="p">:</span> <span class="nb">int</span>
</pre>
          </div> 
         </div> 
         <p>See <span class="target" id="index-15"></span><a class="pep reference external" href="https://peps.python.org/pep-0655/"><strong>PEP 655</strong></a> for more details.</p> 
         <p>(Contributed by David Foster and Jelle Zijlstra in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47087">bpo-47087</a>. PEP written by David Foster.)</p> 
        </section> 
        <section id="pep-673-self-type"> 
         <h3>PEP 673: <code class="docutils literal notranslate"><span class="pre">Self</span></code> type<a class="headerlink" href="#pep-673-self-type" title="Permalink to this headline">¶</a></h3> 
         <p>The new <a class="reference internal" href="../library/typing.html#typing.Self" title="typing.Self"><code class="xref py py-data docutils literal notranslate"><span class="pre">Self</span></code></a> annotation provides a simple and intuitive way to annotate methods that return an instance of their class. This behaves the same as the <a class="reference internal" href="../library/typing.html#typing.TypeVar" title="typing.TypeVar"><code class="xref py py-data docutils literal notranslate"><span class="pre">TypeVar</span></code></a>-based approach specified in <span class="target" id="index-16"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> but is more concise and easier to follow.</p> 
         <p>Common use cases include alternative constructors provided as classmethods and <a class="reference internal" href="../reference/datamodel.html#object.__enter__" title="object.__enter__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__enter__()</span></code></a> methods that return <code class="docutils literal notranslate"><span class="pre">self</span></code>:</p> 
         <div class="highlight-python3 notranslate">
          <div class="highlight">
           <pre><span></span><span class="k">class</span> <span class="nc">MyLock</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="o">...</span>

<span class="k">class</span> <span class="nc">MyInt</span><span class="p">:</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fromhex</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>

    <span class="o">...</span>
</pre>
          </div> 
         </div> 
         <p><a class="reference internal" href="../library/typing.html#typing.Self" title="typing.Self"><code class="xref py py-data docutils literal notranslate"><span class="pre">Self</span></code></a> can also be used to annotate method parameters or attributes of the same type as their enclosing class.</p> 
         <p>See <span class="target" id="index-17"></span><a class="pep reference external" href="https://peps.python.org/pep-0673/"><strong>PEP 673</strong></a> for more details.</p> 
         <p>(Contributed by James Hilton-Balfe in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46534">bpo-46534</a>. PEP written by Pradeep Kumar Srinivasan and James Hilton-Balfe.)</p> 
        </section> 
        <section id="pep-675-arbitrary-literal-string-type"> 
         <h3>PEP 675: Arbitrary literal string type<a class="headerlink" href="#pep-675-arbitrary-literal-string-type" title="Permalink to this headline">¶</a></h3> 
         <p>The new <a class="reference internal" href="../library/typing.html#typing.LiteralString" title="typing.LiteralString"><code class="xref py py-data docutils literal notranslate"><span class="pre">LiteralString</span></code></a> annotation may be used to indicate that a function parameter can be of any literal string type. This allows a function to accept arbitrary literal string types, as well as strings created from other literal strings. Type checkers can then enforce that sensitive functions, such as those that execute SQL statements or shell commands, are called only with static arguments, providing protection against injection attacks.</p> 
         <p>For example, a SQL query function could be annotated as follows:</p> 
         <div class="highlight-python3 notranslate">
          <div class="highlight">
           <pre><span></span><span class="k">def</span> <span class="nf">run_query</span><span class="p">(</span><span class="n">sql</span><span class="p">:</span> <span class="n">LiteralString</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">caller</span><span class="p">(</span>
    <span class="n">arbitrary_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">query_string</span><span class="p">:</span> <span class="n">LiteralString</span><span class="p">,</span>
    <span class="n">table_name</span><span class="p">:</span> <span class="n">LiteralString</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">run_query</span><span class="p">(</span><span class="s2">"SELECT * FROM students"</span><span class="p">)</span>       <span class="c1"># ok</span>
    <span class="n">run_query</span><span class="p">(</span><span class="n">query_string</span><span class="p">)</span>                   <span class="c1"># ok</span>
    <span class="n">run_query</span><span class="p">(</span><span class="s2">"SELECT * FROM "</span> <span class="o">+</span> <span class="n">table_name</span><span class="p">)</span>  <span class="c1"># ok</span>
    <span class="n">run_query</span><span class="p">(</span><span class="n">arbitrary_string</span><span class="p">)</span>               <span class="c1"># type checker error</span>
    <span class="n">run_query</span><span class="p">(</span>                                <span class="c1"># type checker error</span>
        <span class="sa">f</span><span class="s2">"SELECT * FROM students WHERE name = </span><span class="si">{</span><span class="n">arbitrary_string</span><span class="si">}</span><span class="s2">"</span>
    <span class="p">)</span>
</pre>
          </div> 
         </div> 
         <p>See <span class="target" id="index-18"></span><a class="pep reference external" href="https://peps.python.org/pep-0675/"><strong>PEP 675</strong></a> for more details.</p> 
         <p>(Contributed by Jelle Zijlstra in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47088">bpo-47088</a>. PEP written by Pradeep Kumar Srinivasan and Graham Bleaney.)</p> 
        </section> 
        <section id="pep-681-data-class-transforms"> 
         <h3>PEP 681: Data Class Transforms<a class="headerlink" href="#pep-681-data-class-transforms" title="Permalink to this headline">¶</a></h3> 
         <p>The new <code class="xref py py-data docutils literal notranslate"><span class="pre">dataclass_transform</span></code> annotation may be used to decorate a function that is itself a decorator, a class, or a metaclass. The presence of <code class="docutils literal notranslate"><span class="pre">@dataclass_transform()</span></code> tells a static type checker that the decorated function, class, or metaclass performs runtime “magic” that transforms a class, endowing it with dataclass-like behaviors.</p> 
         <p>For example:</p> 
         <div class="highlight-python3 notranslate">
          <div class="highlight">
           <pre><span></span><span class="c1"># The ``create_model`` decorator is defined by a library.</span>
<span class="nd">@typing</span><span class="o">.</span><span class="n">dataclass_transform</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">create_model</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">_T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">_T</span><span class="p">]:</span>
    <span class="bp">cls</span><span class="o">.</span><span class="fm">__init__</span> <span class="o">=</span> <span class="o">...</span>
    <span class="bp">cls</span><span class="o">.</span><span class="fm">__eq__</span> <span class="o">=</span> <span class="o">...</span>
    <span class="bp">cls</span><span class="o">.</span><span class="fm">__ne__</span> <span class="o">=</span> <span class="o">...</span>
    <span class="k">return</span> <span class="bp">cls</span>

<span class="c1"># The ``create_model`` decorator can now be used to create new model</span>
<span class="c1"># classes, like this:</span>
<span class="nd">@create_model</span>
<span class="k">class</span> <span class="nc">CustomerModel</span><span class="p">:</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">CustomerModel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">327</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"John Smith"</span><span class="p">)</span>
</pre>
          </div> 
         </div> 
         <p>See <span class="target" id="index-19"></span><a class="pep reference external" href="https://peps.python.org/pep-0681/"><strong>PEP 681</strong></a> for more details.</p> 
         <p>(Contributed by Jelle Zijlstra in <a class="reference external" href="https://github.com/python/cpython/issues/91860">gh-91860</a>. PEP written by Erik De Bonte and Eric Traut.)</p> 
        </section> 
       </section> 
       <section id="other-language-changes"> 
        <h2>Other Language Changes<a class="headerlink" href="#other-language-changes" title="Permalink to this headline">¶</a></h2> 
        <ul class="simple"> 
         <li><p>Starred expressions can be used in <a class="reference internal" href="../reference/compound_stmts.html#for"><span class="std std-ref">for statements</span></a>. (See <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46725">bpo-46725</a> for more details.)</p></li> 
         <li><p>Asynchronous comprehensions are now allowed inside comprehensions in asynchronous functions. Outer comprehensions implicitly become asynchronous. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=33346">bpo-33346</a>.)</p></li> 
         <li><p>A <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> is now raised instead of an <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> in <a class="reference internal" href="../library/contextlib.html#contextlib.ExitStack.enter_context" title="contextlib.ExitStack.enter_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contextlib.ExitStack.enter_context()</span></code></a> and <a class="reference internal" href="../library/contextlib.html#contextlib.AsyncExitStack.enter_async_context" title="contextlib.AsyncExitStack.enter_async_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contextlib.AsyncExitStack.enter_async_context()</span></code></a> for objects which do not support the <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">context manager</span></a> or <a class="reference internal" href="../glossary.html#term-asynchronous-context-manager"><span class="xref std std-term">asynchronous context manager</span></a> protocols correspondingly. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44471">bpo-44471</a>.)</p></li> 
         <li><p>A <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> is now raised instead of an <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> in <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> and <a class="reference internal" href="../reference/compound_stmts.html#async-with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code></a> statements for objects which do not support the <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">context manager</span></a> or <a class="reference internal" href="../glossary.html#term-asynchronous-context-manager"><span class="xref std std-term">asynchronous context manager</span></a> protocols correspondingly. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=12022">bpo-12022</a>.)</p></li> 
         <li><p>Added <a class="reference internal" href="../library/pickle.html#object.__getstate__" title="object.__getstate__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__getstate__()</span></code></a> which provides the default implementation of the <code class="docutils literal notranslate"><span class="pre">__getstate__()</span></code> method. <a class="reference internal" href="../library/copy.html#module-copy" title="copy: Shallow and deep copy operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">Copying</span></code></a> and <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickling</span></code></a> instances of subclasses of builtin types <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozenset</span></code></a>, <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></a>, <a class="reference internal" href="../library/collections.html#collections.deque" title="collections.deque"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.deque</span></code></a>, <a class="reference internal" href="../library/weakref.html#weakref.WeakSet" title="weakref.WeakSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">weakref.WeakSet</span></code></a>, and <a class="reference internal" href="../library/datetime.html#datetime.tzinfo" title="datetime.tzinfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.tzinfo</span></code></a> now copies and pickles instance attributes implemented as <a class="reference internal" href="../glossary.html#term-__slots__"><span class="xref std std-term">slots</span></a>. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=26579">bpo-26579</a>.)</p></li> 
         <li><p>Add <a class="reference internal" href="../using/cmdline.html#cmdoption-P"><code class="xref std std-option docutils literal notranslate"><span class="pre">-P</span></code></a> command line option and <span class="target" id="index-20"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONSAFEPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSAFEPATH</span></code></a> environment variable to not prepend a potentially unsafe path to <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> such as the current directory, the script’s directory or an empty string. (Contributed by Victor Stinner in <a class="reference external" href="https://github.com/python/cpython/issues/57684">gh-57684</a>.)</p></li> 
        </ul> 
       </section> 
       <section id="other-cpython-implementation-changes"> 
        <h2>Other CPython Implementation Changes<a class="headerlink" href="#other-cpython-implementation-changes" title="Permalink to this headline">¶</a></h2> 
        <ul class="simple"> 
         <li><p>Special methods <code class="xref py py-meth docutils literal notranslate"><span class="pre">complex.__complex__()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">bytes.__bytes__()</span></code> are implemented to support <a class="reference internal" href="../library/typing.html#typing.SupportsComplex" title="typing.SupportsComplex"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.SupportsComplex</span></code></a> and <a class="reference internal" href="../library/typing.html#typing.SupportsBytes" title="typing.SupportsBytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.SupportsBytes</span></code></a> protocols. (Contributed by Mark Dickinson and Dong-hee Na in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=24234">bpo-24234</a>.)</p></li> 
         <li><p><code class="docutils literal notranslate"><span class="pre">siphash13</span></code> is added as a new internal hashing algorithms. It has similar security properties as <code class="docutils literal notranslate"><span class="pre">siphash24</span></code> but it is slightly faster for long inputs. <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, and some other types now use it as default algorithm for <a class="reference internal" href="../library/functions.html#hash" title="hash"><code class="xref py py-func docutils literal notranslate"><span class="pre">hash()</span></code></a>. <span class="target" id="index-21"></span><a class="pep reference external" href="https://peps.python.org/pep-0552/"><strong>PEP 552</strong></a> hash-based pyc files now use <code class="docutils literal notranslate"><span class="pre">siphash13</span></code>, too. (Contributed by Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=29410">bpo-29410</a>.)</p></li> 
         <li><p>When an active exception is re-raised by a <a class="reference internal" href="../reference/simple_stmts.html#raise"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">raise</span></code></a> statement with no parameters, the traceback attached to this exception is now always <code class="docutils literal notranslate"><span class="pre">sys.exc_info()[1].__traceback__</span></code>. This means that changes made to the traceback in the current <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> clause are reflected in the re-raised exception. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li> 
         <li><p>The interpreter state’s representation of handled exceptions (a.k.a exc_info, or _PyErr_StackItem) now has only the <code class="docutils literal notranslate"><span class="pre">exc_value</span></code> field, <code class="docutils literal notranslate"><span class="pre">exc_type</span></code> and <code class="docutils literal notranslate"><span class="pre">exc_traceback</span></code> have been removed as their values can be derived from <code class="docutils literal notranslate"><span class="pre">exc_value</span></code>. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li> 
         <li><p>A new command line option for the Windows installer <code class="docutils literal notranslate"><span class="pre">AppendPath</span></code> has been added. It behaves similiar to <code class="docutils literal notranslate"><span class="pre">PrependPath</span></code> but appends the install and scripts directories instead of prepending them. (Contributed by Bastian Neuburger in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44934">bpo-44934</a>.)</p></li> 
        </ul> 
       </section> 
       <section id="new-modules"> 
        <h2>New Modules<a class="headerlink" href="#new-modules" title="Permalink to this headline">¶</a></h2> 
        <ul class="simple"> 
         <li><p>A new module, <a class="reference internal" href="../library/tomllib.html#module-tomllib" title="tomllib: Parse TOML files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tomllib</span></code></a>, was added for parsing TOML. (Contributed by Taneli Hukkinen in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40059">bpo-40059</a>.)</p></li> 
         <li><p><a class="reference internal" href="../library/wsgiref.html#module-wsgiref.types" title="wsgiref.types: WSGI types for static type checking"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.types</span></code></a>, containing WSGI-specific types for static type checking, was added. (Contributed by Sebastian Rittau in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=42012">bpo-42012</a>.)</p></li> 
        </ul> 
       </section> 
       <section id="improved-modules"> 
        <h2>Improved Modules<a class="headerlink" href="#improved-modules" title="Permalink to this headline">¶</a></h2> 
        <section id="asyncio"> 
         <h3>asyncio<a class="headerlink" href="#asyncio" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Add raw datagram socket functions to the event loop: <code class="xref py py-meth docutils literal notranslate"><span class="pre">sock_sendto()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">sock_recvfrom()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">sock_recvfrom_into()</span></code>. (Contributed by Alex Grönholm in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46805">bpo-46805</a>.)</p></li> 
          <li><p>Add <code class="xref py py-meth docutils literal notranslate"><span class="pre">start_tls()</span></code> method for upgrading existing stream-based connections to TLS. (Contributed by Ian Good in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=34975">bpo-34975</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="datetime"> 
         <h3>datetime<a class="headerlink" href="#datetime" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Add <a class="reference internal" href="../library/datetime.html#datetime.UTC" title="datetime.UTC"><code class="xref py py-attr docutils literal notranslate"><span class="pre">datetime.UTC</span></code></a>, a convenience alias for <a class="reference internal" href="../library/datetime.html#datetime.timezone.utc" title="datetime.timezone.utc"><code class="xref py py-attr docutils literal notranslate"><span class="pre">datetime.timezone.utc</span></code></a>. (Contributed by Kabir Kwatra in <a class="reference external" href="https://github.com/python/cpython/issues/91973">gh-91973</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/datetime.html#datetime.date.fromisoformat" title="datetime.date.fromisoformat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.date.fromisoformat()</span></code></a>, <a class="reference internal" href="../library/datetime.html#datetime.time.fromisoformat" title="datetime.time.fromisoformat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.time.fromisoformat()</span></code></a> and <a class="reference internal" href="../library/datetime.html#datetime.datetime.fromisoformat" title="datetime.datetime.fromisoformat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.datetime.fromisoformat()</span></code></a> can now be used to parse most ISO 8601 formats (barring only those that support fractional hours and minutes). (Contributed by Paul Ganssle in <a class="reference external" href="https://github.com/python/cpython/issues/80010">gh-80010</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="fractions"> 
         <h3>fractions<a class="headerlink" href="#fractions" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Support <span class="target" id="index-22"></span><a class="pep reference external" href="https://peps.python.org/pep-0515/"><strong>PEP 515</strong></a>-style initialization of <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> from string. (Contributed by Sergey B Kirpichev in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44258">bpo-44258</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> now implements an <code class="docutils literal notranslate"><span class="pre">__int__</span></code> method, so that an <code class="docutils literal notranslate"><span class="pre">isinstance(some_fraction,</span> <span class="pre">typing.SupportsInt)</span></code> check passes. (Contributed by Mark Dickinson in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44547">bpo-44547</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="functools"> 
         <h3>functools<a class="headerlink" href="#functools" title="Permalink to this headline">¶</a></h3> 
         <ul> 
          <li><p><a class="reference internal" href="../library/functools.html#functools.singledispatch" title="functools.singledispatch"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.singledispatch()</span></code></a> now supports <a class="reference internal" href="../library/types.html#types.UnionType" title="types.UnionType"><code class="xref py py-data docutils literal notranslate"><span class="pre">types.UnionType</span></code></a> and <a class="reference internal" href="../library/typing.html#typing.Union" title="typing.Union"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Union</span></code></a> as annotations to the dispatch argument.:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">singledispatch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@singledispatch</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Let me just say,"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">" "</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@fun</span><span class="o">.</span><span class="n">register</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Strength in numbers, eh?"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">" "</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@fun</span><span class="o">.</span><span class="n">register</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">set</span><span class="p">],</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Enumerate this:"</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">elem</span><span class="p">)</span>
<span class="gp">...</span>
</pre>
            </div> 
           </div> <p>(Contributed by Yurii Karabas in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46014">bpo-46014</a>.)</p> </li> 
         </ul> 
        </section> 
        <section id="hashlib"> 
         <h3>hashlib<a class="headerlink" href="#hashlib" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p><a class="reference internal" href="../library/hashlib.html#hashlib.blake2b" title="hashlib.blake2b"><code class="xref py py-func docutils literal notranslate"><span class="pre">hashlib.blake2b()</span></code></a> and <a class="reference internal" href="../library/hashlib.html#hashlib.blake2s" title="hashlib.blake2s"><code class="xref py py-func docutils literal notranslate"><span class="pre">hashlib.blake2s()</span></code></a> now prefer <a class="reference external" href="https://www.blake2.net/">libb2</a> over Python’s vendored copy. (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47095">bpo-47095</a>.)</p></li> 
          <li><p>The internal <code class="docutils literal notranslate"><span class="pre">_sha3</span></code> module with SHA3 and SHAKE algorithms now uses <em>tiny_sha3</em> instead of the <em>Keccak Code Package</em> to reduce code and binary size. The <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> module prefers optimized SHA3 and SHAKE implementations from OpenSSL. The change affects only installations without OpenSSL support. (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47098">bpo-47098</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="idle-and-idlelib"> 
         <h3>IDLE and idlelib<a class="headerlink" href="#idle-and-idlelib" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Apply syntax highlighting to <cite>.pyi</cite> files. (Contributed by Alex Waygood and Terry Jan Reedy in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45447">bpo-45447</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="inspect"> 
         <h3>inspect<a class="headerlink" href="#inspect" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Add <a class="reference internal" href="../library/inspect.html#inspect.getmembers_static" title="inspect.getmembers_static"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getmembers_static()</span></code></a>: return all members without triggering dynamic lookup via the descriptor protocol. (Contributed by Weipeng Hong in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=30533">bpo-30533</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/inspect.html#inspect.ismethodwrapper" title="inspect.ismethodwrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.ismethodwrapper()</span></code></a> for checking if the type of an object is a <a class="reference internal" href="../library/types.html#types.MethodWrapperType" title="types.MethodWrapperType"><code class="xref py py-class docutils literal notranslate"><span class="pre">MethodWrapperType</span></code></a>. (Contributed by Hakan Çelik in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=29418">bpo-29418</a>.)</p></li> 
          <li><p>Change the frame-related functions in the <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> module to return a regular object (that is backwards compatible with the old tuple-like interface) that include the extended <span class="target" id="index-23"></span><a class="pep reference external" href="https://peps.python.org/pep-0657/"><strong>PEP 657</strong></a> position information (end line number, column and end column). The affected functions are: <a class="reference internal" href="../library/inspect.html#inspect.getframeinfo" title="inspect.getframeinfo"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getframeinfo()</span></code></a>, <a class="reference internal" href="../library/inspect.html#inspect.getouterframes" title="inspect.getouterframes"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getouterframes()</span></code></a>, <a class="reference internal" href="../library/inspect.html#inspect.getinnerframes" title="inspect.getinnerframes"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getinnerframes()</span></code></a>, <a class="reference internal" href="../library/inspect.html#inspect.stack" title="inspect.stack"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.stack()</span></code></a> and <a class="reference internal" href="../library/inspect.html#inspect.trace" title="inspect.trace"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.trace()</span></code></a>. (Contributed by Pablo Galindo in <a class="reference external" href="https://github.com/python/cpython/issues/88116">gh-88116</a>)</p></li> 
         </ul> 
        </section> 
        <section id="locale"> 
         <h3>locale<a class="headerlink" href="#locale" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Add <a class="reference internal" href="../library/locale.html#locale.getencoding" title="locale.getencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getencoding()</span></code></a> to get the current locale encoding. It is similar to <code class="docutils literal notranslate"><span class="pre">locale.getpreferredencoding(False)</span></code> but ignores the <a class="reference internal" href="../library/os.html#utf8-mode"><span class="std std-ref">Python UTF-8 Mode</span></a>.</p></li> 
         </ul> 
        </section> 
        <section id="math"> 
         <h3>math<a class="headerlink" href="#math" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Add <a class="reference internal" href="../library/math.html#math.exp2" title="math.exp2"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.exp2()</span></code></a>: return 2 raised to the power of x. (Contributed by Gideon Mitchell in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45917">bpo-45917</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/math.html#math.cbrt" title="math.cbrt"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.cbrt()</span></code></a>: return the cube root of x. (Contributed by Ajith Ramachandran in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44357">bpo-44357</a>.)</p></li> 
          <li><p>The behaviour of two <a class="reference internal" href="../library/math.html#math.pow" title="math.pow"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.pow()</span></code></a> corner cases was changed, for consistency with the IEEE 754 specification. The operations <code class="docutils literal notranslate"><span class="pre">math.pow(0.0,</span> <span class="pre">-math.inf)</span></code> and <code class="docutils literal notranslate"><span class="pre">math.pow(-0.0,</span> <span class="pre">-math.inf)</span></code> now return <code class="docutils literal notranslate"><span class="pre">inf</span></code>. Previously they raised <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>. (Contributed by Mark Dickinson in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44339">bpo-44339</a>.)</p></li> 
          <li><p>The <a class="reference internal" href="../library/math.html#math.nan" title="math.nan"><code class="xref py py-data docutils literal notranslate"><span class="pre">math.nan</span></code></a> value is now always available. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46917">bpo-46917</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="operator"> 
         <h3>operator<a class="headerlink" href="#operator" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>A new function <code class="docutils literal notranslate"><span class="pre">operator.call</span></code> has been added, such that <code class="docutils literal notranslate"><span class="pre">operator.call(obj,</span> <span class="pre">*args,</span> <span class="pre">**kwargs)</span> <span class="pre">==</span> <span class="pre">obj(*args,</span> <span class="pre">**kwargs)</span></code>. (Contributed by Antony Lee in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44019">bpo-44019</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="os"> 
         <h3>os<a class="headerlink" href="#os" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>On Windows, <a class="reference internal" href="../library/os.html#os.urandom" title="os.urandom"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a> now uses <code class="docutils literal notranslate"><span class="pre">BCryptGenRandom()</span></code>, instead of <code class="docutils literal notranslate"><span class="pre">CryptGenRandom()</span></code> which is deprecated. (Contributed by Dong-hee Na in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44611">bpo-44611</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="pathlib"> 
         <h3>pathlib<a class="headerlink" href="#pathlib" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p><a class="reference internal" href="../library/pathlib.html#pathlib.Path.glob" title="pathlib.Path.glob"><code class="xref py py-meth docutils literal notranslate"><span class="pre">glob()</span></code></a> and <a class="reference internal" href="../library/pathlib.html#pathlib.Path.rglob" title="pathlib.Path.rglob"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rglob()</span></code></a> return only directories if <em>pattern</em> ends with a pathname components separator: <a class="reference internal" href="../library/os.html#os.sep" title="os.sep"><code class="xref py py-data docutils literal notranslate"><span class="pre">sep</span></code></a> or <a class="reference internal" href="../library/os.html#os.altsep" title="os.altsep"><code class="xref py py-data docutils literal notranslate"><span class="pre">altsep</span></code></a>. (Contributed by Eisuke Kawasima in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=22276">bpo-22276</a> and <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=33392">bpo-33392</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="re"> 
         <h3>re<a class="headerlink" href="#re" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Atomic grouping (<code class="docutils literal notranslate"><span class="pre">(?&gt;...)</span></code>) and possessive quantifiers (<code class="docutils literal notranslate"><span class="pre">*+</span></code>, <code class="docutils literal notranslate"><span class="pre">++</span></code>, <code class="docutils literal notranslate"><span class="pre">?+</span></code>, <code class="docutils literal notranslate"><span class="pre">{m,n}+</span></code>) are now supported in regular expressions. (Contributed by Jeffrey C. Jacobs and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=433030">bpo-433030</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="shutil"> 
         <h3>shutil<a class="headerlink" href="#shutil" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Add optional parameter <em>dir_fd</em> in <a class="reference internal" href="../library/shutil.html#shutil.rmtree" title="shutil.rmtree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.rmtree()</span></code></a>. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46245">bpo-46245</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="socket"> 
         <h3>socket<a class="headerlink" href="#socket" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Add CAN Socket support for NetBSD. (Contributed by Thomas Klausner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=30512">bpo-30512</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/socket.html#socket.create_connection" title="socket.create_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_connection()</span></code></a> has an option to raise, in case of failure to connect, an <a class="reference internal" href="../library/exceptions.html#ExceptionGroup" title="ExceptionGroup"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ExceptionGroup</span></code></a> containing all errors instead of only raising the last error. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=29980">bpo-29980</a>).</p></li> 
         </ul> 
        </section> 
        <section id="sqlite3"> 
         <h3>sqlite3<a class="headerlink" href="#sqlite3" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>You can now disable the authorizer by passing <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a> to <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.set_authorizer" title="sqlite3.Connection.set_authorizer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_authorizer()</span></code></a>. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44491">bpo-44491</a>.)</p></li> 
          <li><p>Collation name <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.create_collation" title="sqlite3.Connection.create_collation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_collation()</span></code></a> can now contain any Unicode character. Collation names with invalid characters now raise <a class="reference internal" href="../library/exceptions.html#UnicodeEncodeError" title="UnicodeEncodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeEncodeError</span></code></a> instead of <a class="reference internal" href="../library/sqlite3.html#sqlite3.ProgrammingError" title="sqlite3.ProgrammingError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">sqlite3.ProgrammingError</span></code></a>. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44688">bpo-44688</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> exceptions now include the SQLite extended error code as <a class="reference internal" href="../library/sqlite3.html#sqlite3.Error.sqlite_errorcode" title="sqlite3.Error.sqlite_errorcode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sqlite_errorcode</span></code></a> and the SQLite error name as <a class="reference internal" href="../library/sqlite3.html#sqlite3.Error.sqlite_errorname" title="sqlite3.Error.sqlite_errorname"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sqlite_errorname</span></code></a>. (Contributed by Aviv Palivoda, Daniel Shahaf, and Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=16379">bpo-16379</a> and <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=24139">bpo-24139</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.setlimit" title="sqlite3.Connection.setlimit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setlimit()</span></code></a> and <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.getlimit" title="sqlite3.Connection.getlimit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getlimit()</span></code></a> to <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Connection</span></code></a> for setting and getting SQLite limits by connection basis. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45243">bpo-45243</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> now sets <a class="reference internal" href="../library/sqlite3.html#sqlite3.threadsafety" title="sqlite3.threadsafety"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sqlite3.threadsafety</span></code></a> based on the default threading mode the underlying SQLite library has been compiled with. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45613">bpo-45613</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> C callbacks now use unraisable exceptions if callback tracebacks are enabled. Users can now register an <a class="reference internal" href="../library/sys.html#sys.unraisablehook" title="sys.unraisablehook"><code class="xref py py-func docutils literal notranslate"><span class="pre">unraisable</span> <span class="pre">hook</span> <span class="pre">handler</span></code></a> to improve their debug experience. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45828">bpo-45828</a>.)</p></li> 
          <li><p>Fetch across rollback no longer raises <code class="xref py py-exc docutils literal notranslate"><span class="pre">InterfaceError</span></code>. Instead we leave it to the SQLite library to handle these cases. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44092">bpo-44092</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.serialize" title="sqlite3.Connection.serialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">serialize()</span></code></a> and <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.deserialize" title="sqlite3.Connection.deserialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">deserialize()</span></code></a> to <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Connection</span></code></a> for serializing and deserializing databases. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=41930">bpo-41930</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.create_window_function" title="sqlite3.Connection.create_window_function"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_window_function()</span></code></a> to <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Connection</span></code></a> for creating aggregate window functions. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=34916">bpo-34916</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.blobopen" title="sqlite3.Connection.blobopen"><code class="xref py py-meth docutils literal notranslate"><span class="pre">blobopen()</span></code></a> to <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Connection</span></code></a>. <a class="reference internal" href="../library/sqlite3.html#sqlite3.Blob" title="sqlite3.Blob"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlite3.Blob</span></code></a> allows incremental I/O operations on blobs. (Contributed by Aviv Palivoda and Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=24905">bpo-24905</a>)</p></li> 
         </ul> 
        </section> 
        <section id="sys"> 
         <h3>sys<a class="headerlink" href="#sys" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p><a class="reference internal" href="../library/sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_info()</span></code></a> now derives the <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">traceback</span></code> fields from the <code class="docutils literal notranslate"><span class="pre">value</span></code> (the exception instance), so when an exception is modified while it is being handled, the changes are reflected in the results of subsequent calls to <code class="xref py py-func docutils literal notranslate"><span class="pre">exc_info()</span></code>. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/sys.html#sys.exception" title="sys.exception"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exception()</span></code></a> which returns the active exception instance (equivalent to <code class="docutils literal notranslate"><span class="pre">sys.exc_info()[1]</span></code>). (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46328">bpo-46328</a>.)</p></li> 
          <li><p>Add the <a class="reference internal" href="../library/sys.html#sys.flags" title="sys.flags"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.flags.safe_path</span></code></a> flag. (Contributed by Victor Stinner in <a class="reference external" href="https://github.com/python/cpython/issues/57684">gh-57684</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="sysconfig"> 
         <h3>sysconfig<a class="headerlink" href="#sysconfig" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Two new <a class="reference internal" href="../library/sysconfig.html#installation-paths"><span class="std std-ref">installation schemes</span></a> (<em>posix_venv</em>, <em>nt_venv</em> and <em>venv</em>) were added and are used when Python creates new virtual environments or when it is running from a virtual environment. The first two schemes (<em>posix_venv</em> and <em>nt_venv</em>) are OS-specific for non-Windows and Windows, the <em>venv</em> is essentially an alias to one of them according to the OS Python runs on. This is useful for downstream distributors who modify <a class="reference internal" href="../library/sysconfig.html#sysconfig.get_preferred_scheme" title="sysconfig.get_preferred_scheme"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconfig.get_preferred_scheme()</span></code></a>. Third party code that creates new virtual environments should use the new <em>venv</em> installation scheme to determine the paths, as does <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a>. (Contributed by Miro Hron?ok in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45413">bpo-45413</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="threading"> 
         <h3>threading<a class="headerlink" href="#threading" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>On Unix, if the <code class="docutils literal notranslate"><span class="pre">sem_clockwait()</span></code> function is available in the C library (glibc 2.30 and newer), the <a class="reference internal" href="../library/threading.html#threading.Lock.acquire" title="threading.Lock.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">threading.Lock.acquire()</span></code></a> method now uses the monotonic clock (<a class="reference internal" href="../library/time.html#time.CLOCK_MONOTONIC" title="time.CLOCK_MONOTONIC"><code class="xref py py-data docutils literal notranslate"><span class="pre">time.CLOCK_MONOTONIC</span></code></a>) for the timeout, rather than using the system clock (<a class="reference internal" href="../library/time.html#time.CLOCK_REALTIME" title="time.CLOCK_REALTIME"><code class="xref py py-data docutils literal notranslate"><span class="pre">time.CLOCK_REALTIME</span></code></a>), to not be affected by system clock changes. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=41710">bpo-41710</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="time"> 
         <h3>time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>On Unix, <a class="reference internal" href="../library/time.html#time.sleep" title="time.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.sleep()</span></code></a> now uses the <code class="docutils literal notranslate"><span class="pre">clock_nanosleep()</span></code> or <code class="docutils literal notranslate"><span class="pre">nanosleep()</span></code> function, if available, which has a resolution of 1 nanosecond (10<sup>-9</sup> seconds), rather than using <code class="docutils literal notranslate"><span class="pre">select()</span></code> which has a resolution of 1 microsecond (10<sup>-6</sup> seconds). (Contributed by Benjamin Sz?ke and Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=21302">bpo-21302</a>.)</p></li> 
          <li><p>On Windows 8.1 and newer, <a class="reference internal" href="../library/time.html#time.sleep" title="time.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.sleep()</span></code></a> now uses a waitable timer based on <a class="reference external" href="https://docs.microsoft.com/en-us/windows-hardware/drivers/kernel/high-resolution-timers">high-resolution timers</a> which has a resolution of 100 nanoseconds (10<sup>-7</sup> seconds). Previously, it had a resolution of 1 millisecond (10<sup>-3</sup> seconds). (Contributed by Benjamin Sz?ke, Dong-hee Na, Eryk Sun and Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=21302">bpo-21302</a> and <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45429">bpo-45429</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="typing"> 
         <h3>typing<a class="headerlink" href="#typing" title="Permalink to this headline">¶</a></h3> 
         <p>For major changes, see <a class="reference internal" href="#new-feat-related-type-hints-311"><span class="std std-ref">New Features Related to Type Hints</span></a>.</p> 
         <ul class="simple"> 
          <li><p>Add <a class="reference internal" href="../library/typing.html#typing.assert_never" title="typing.assert_never"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.assert_never()</span></code></a> and <a class="reference internal" href="../library/typing.html#typing.Never" title="typing.Never"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Never</span></code></a>. <a class="reference internal" href="../library/typing.html#typing.assert_never" title="typing.assert_never"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.assert_never()</span></code></a> is useful for asking a type checker to confirm that a line of code is not reachable. At runtime, it raises an <a class="reference internal" href="../library/exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code></a>. (Contributed by Jelle Zijlstra in <a class="reference external" href="https://github.com/python/cpython/issues/90633">gh-90633</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/typing.html#typing.reveal_type" title="typing.reveal_type"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.reveal_type()</span></code></a>. This is useful for asking a type checker what type it has inferred for a given expression. At runtime it prints the type of the received value. (Contributed by Jelle Zijlstra in <a class="reference external" href="https://github.com/python/cpython/issues/90572">gh-90572</a>.)</p></li> 
          <li><p>Add <a class="reference internal" href="../library/typing.html#typing.assert_type" title="typing.assert_type"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.assert_type()</span></code></a>. This is useful for asking a type checker to confirm that the type it has inferred for a given expression matches the given type. At runtime it simply returns the received value. (Contributed by Jelle Zijlstra in <a class="reference external" href="https://github.com/python/cpython/issues/90638">gh-90638</a>.)</p></li> 
          <li><p>Allow subclassing of <a class="reference internal" href="../library/typing.html#typing.Any" title="typing.Any"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Any</span></code></a>. This is useful for avoiding type checker errors related to highly dynamic class, such as mocks. (Contributed by Shantanu Jain in <a class="reference external" href="https://github.com/python/cpython/issues/91154">gh-91154</a>.)</p></li> 
          <li><p>The <a class="reference internal" href="../library/typing.html#typing.final" title="typing.final"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.final()</span></code></a> decorator now sets the <code class="docutils literal notranslate"><span class="pre">__final__</span></code> attributed on the decorated object. (Contributed by Jelle Zijlstra in <a class="reference external" href="https://github.com/python/cpython/issues/90500">gh-90500</a>.)</p></li> 
          <li><p>The <a class="reference internal" href="../library/typing.html#typing.get_overloads" title="typing.get_overloads"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_overloads()</span></code></a> function can be used for introspecting the overloads of a function. <a class="reference internal" href="../library/typing.html#typing.clear_overloads" title="typing.clear_overloads"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.clear_overloads()</span></code></a> can be used to clear all registered overloads of a function. (Contributed by Jelle Zijlstra in <a class="reference external" href="https://github.com/python/cpython/issues/89263">gh-89263</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/typing.html#typing.TypedDict" title="typing.TypedDict"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.TypedDict</span></code></a> subclasses can now be generic. (Contributed by Samodya Abey in <a class="reference external" href="https://github.com/python/cpython/issues/89026">gh-89026</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">NamedTuple</span></code></a> subclasses can now be generic. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43923">bpo-43923</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="tkinter"> 
         <h3>tkinter<a class="headerlink" href="#tkinter" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Added method <code class="docutils literal notranslate"><span class="pre">info_patchlevel()</span></code> which returns the exact version of the Tcl library as a named tuple similar to <a class="reference internal" href="../library/sys.html#sys.version_info" title="sys.version_info"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.version_info</span></code></a>. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://github.com/python/cpython/issues/91827">gh-91827</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="unicodedata"> 
         <h3>unicodedata<a class="headerlink" href="#unicodedata" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>The Unicode database has been updated to version 14.0.0. (<a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45190">bpo-45190</a>).</p></li> 
         </ul> 
        </section> 
        <section id="unittest"> 
         <h3>unittest<a class="headerlink" href="#unittest" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Added methods <a class="reference internal" href="../library/unittest.html#unittest.TestCase.enterContext" title="unittest.TestCase.enterContext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enterContext()</span></code></a> and <a class="reference internal" href="../library/unittest.html#unittest.TestCase.enterClassContext" title="unittest.TestCase.enterClassContext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enterClassContext()</span></code></a> of class <a class="reference internal" href="../library/unittest.html#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestCase</span></code></a>, method <a class="reference internal" href="../library/unittest.html#unittest.IsolatedAsyncioTestCase.enterAsyncContext" title="unittest.IsolatedAsyncioTestCase.enterAsyncContext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enterAsyncContext()</span></code></a> of class <a class="reference internal" href="../library/unittest.html#unittest.IsolatedAsyncioTestCase" title="unittest.IsolatedAsyncioTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsolatedAsyncioTestCase</span></code></a> and function <a class="reference internal" href="../library/unittest.html#unittest.enterModuleContext" title="unittest.enterModuleContext"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.enterModuleContext()</span></code></a>. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45046">bpo-45046</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="venv"> 
         <h3>venv<a class="headerlink" href="#venv" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>When new Python virtual environments are created, the <em>venv</em> <a class="reference internal" href="../library/sysconfig.html#installation-paths"><span class="std std-ref">sysconfig installation scheme</span></a> is used to determine the paths inside the environment. When Python runs in a virtual environment, the same installation scheme is the default. That means that downstream distributors can change the default sysconfig install scheme without changing behavior of virtual environments. Third party code that also creates new virtual environments should do the same. (Contributed by Miro Hron?ok in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45413">bpo-45413</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="warnings"> 
         <h3>warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p><a class="reference internal" href="../library/warnings.html#warnings.catch_warnings" title="warnings.catch_warnings"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.catch_warnings()</span></code></a> now accepts arguments for <a class="reference internal" href="../library/warnings.html#warnings.simplefilter" title="warnings.simplefilter"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.simplefilter()</span></code></a>, providing a more concise way to locally ignore warnings or convert them to errors. (Contributed by Zac Hatfield-Dodds in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47074">bpo-47074</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="zipfile"> 
         <h3>zipfile<a class="headerlink" href="#zipfile" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Added support for specifying member name encoding for reading metadata in the zipfile’s directory and file headers. (Contributed by Stephen J. Turnbull and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=28080">bpo-28080</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="fcntl"> 
         <h3>fcntl<a class="headerlink" href="#fcntl" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>On FreeBSD, the <code class="xref py py-attr docutils literal notranslate"><span class="pre">F_DUP2FD</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">F_DUP2FD_CLOEXEC</span></code> flags respectively are supported, the former equals to <code class="docutils literal notranslate"><span class="pre">dup2</span></code> usage while the latter set the <code class="docutils literal notranslate"><span class="pre">FD_CLOEXEC</span></code> flag in addition.</p></li> 
         </ul> 
        </section> 
       </section> 
       <section id="optimizations"> 
        <h2>Optimizations<a class="headerlink" href="#optimizations" title="Permalink to this headline">¶</a></h2> 
        <ul class="simple"> 
         <li><p>Compiler now optimizes simple C-style formatting with literal format containing only format codes <code class="docutils literal notranslate"><span class="pre">%s</span></code>, <code class="docutils literal notranslate"><span class="pre">%r</span></code> and <code class="docutils literal notranslate"><span class="pre">%a</span></code> and makes it as fast as corresponding f-string expression. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=28307">bpo-28307</a>.)</p></li> 
         <li><p>“Zero-cost” exceptions are implemented. The cost of <code class="docutils literal notranslate"><span class="pre">try</span></code> statements is almost eliminated when no exception is raised. (Contributed by Mark Shannon in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40222">bpo-40222</a>.)</p></li> 
         <li><p>Pure ASCII strings are now normalized in constant time by <a class="reference internal" href="../library/unicodedata.html#unicodedata.normalize" title="unicodedata.normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">unicodedata.normalize()</span></code></a>. (Contributed by Dong-hee Na in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44987">bpo-44987</a>.)</p></li> 
         <li><p><a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code></a> functions <a class="reference internal" href="../library/math.html#math.comb" title="math.comb"><code class="xref py py-func docutils literal notranslate"><span class="pre">comb()</span></code></a> and <a class="reference internal" href="../library/math.html#math.perm" title="math.perm"><code class="xref py py-func docutils literal notranslate"><span class="pre">perm()</span></code></a> are now up to 10 times or more faster for large arguments (the speed up is larger for larger <em>k</em>). (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=37295">bpo-37295</a>.)</p></li> 
         <li><p>Dict don’t store hash value when all inserted keys are Unicode objects. This reduces dict size. For example, <code class="docutils literal notranslate"><span class="pre">sys.getsizeof(dict.fromkeys("abcdefg"))</span></code> becomes 272 bytes from 352 bytes on 64bit platform. (Contributed by Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46845">bpo-46845</a>.)</p></li> 
         <li><p><a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a>’s regular expression matching engine has been partially refactored, and now uses computed gotos (or “threaded code”) on supported platforms. As a result, Python 3.11 executes the <a class="reference external" href="https://pyperformance.readthedocs.io/benchmarks.html#regex-dna">pyperformance regular expression benchmarks</a> up to 10% faster than Python 3.10.</p></li> 
        </ul> 
       </section> 
       <section id="faster-cpython"> 
        <h2>Faster CPython<a class="headerlink" href="#faster-cpython" title="Permalink to this headline">¶</a></h2> 
        <p>CPython 3.11 is on average <a class="reference external" href="https://github.com/faster-cpython/ideas/blob/main/main-vs-310.rst">25% faster</a> than CPython 3.10 when measured with the <a class="reference external" href="https://github.com/python/pyperformance">pyperformance</a> benchmark suite, and compiled with GCC on Ubuntu Linux. Depending on your workload, the speedup could be up to 10-60% faster.</p> 
        <p>This project focuses on two major areas in Python: faster startup and faster runtime. Other optimizations not under this project are listed in <a class="reference internal" href="#optimizations">Optimizations</a>.</p> 
        <section id="faster-startup"> 
         <h3>Faster Startup<a class="headerlink" href="#faster-startup" title="Permalink to this headline">¶</a></h3> 
         <section id="frozen-imports-static-code-objects"> 
          <h4>Frozen imports / Static code objects<a class="headerlink" href="#frozen-imports-static-code-objects" title="Permalink to this headline">¶</a></h4> 
          <p>Python caches bytecode in the <a class="reference internal" href="../tutorial/modules.html#tut-pycache"><span class="std std-ref">__pycache__</span></a> directory to speed up module loading.</p> 
          <p>Previously in 3.10, Python module execution looked like this:</p> 
          <div class="highlight-text notranslate">
           <div class="highlight">
            <pre><span></span>Read __pycache__ -&gt; Unmarshal -&gt; Heap allocated code object -&gt; Evaluate
</pre>
           </div> 
          </div> 
          <p>In Python 3.11, the core modules essential for Python startup are “frozen”. This means that their code objects (and bytecode) are statically allocated by the interpreter. This reduces the steps in module execution process to this:</p> 
          <div class="highlight-text notranslate">
           <div class="highlight">
            <pre><span></span>Statically allocated code object -&gt; Evaluate
</pre>
           </div> 
          </div> 
          <p>Interpreter startup is now 10-15% faster in Python 3.11. This has a big impact for short-running programs using Python.</p> 
          <p>(Contributed by Eric Snow, Guido van Rossum and Kumar Aditya in numerous issues.)</p> 
         </section> 
        </section> 
        <section id="faster-runtime"> 
         <h3>Faster Runtime<a class="headerlink" href="#faster-runtime" title="Permalink to this headline">¶</a></h3> 
         <section id="cheaper-lazy-python-frames"> 
          <h4>Cheaper, lazy Python frames<a class="headerlink" href="#cheaper-lazy-python-frames" title="Permalink to this headline">¶</a></h4> 
          <p>Python frames are created whenever Python calls a Python function. This frame holds execution information. The following are new frame optimizations:</p> 
          <ul class="simple"> 
           <li><p>Streamlined the frame creation process.</p></li> 
           <li><p>Avoided memory allocation by generously re-using frame space on the C stack.</p></li> 
           <li><p>Streamlined the internal frame struct to contain only essential information. Frames previously held extra debugging and memory management information.</p></li> 
          </ul> 
          <p>Old-style frame objects are now created only when requested by debuggers or by Python introspection functions such as <code class="docutils literal notranslate"><span class="pre">sys._getframe</span></code> or <code class="docutils literal notranslate"><span class="pre">inspect.currentframe</span></code>. For most user code, no frame objects are created at all. As a result, nearly all Python functions calls have sped up significantly. We measured a 3-7% speedup in pyperformance.</p> 
          <p>(Contributed by Mark Shannon in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44590">bpo-44590</a>.)</p> 
         </section> 
         <section id="inlined-python-function-calls"> <span id="inline-calls"></span>
          <h4>Inlined Python function calls<a class="headerlink" href="#inlined-python-function-calls" title="Permalink to this headline">¶</a></h4> 
          <p>During a Python function call, Python will call an evaluating C function to interpret that function’s code. This effectively limits pure Python recursion to what’s safe for the C stack.</p> 
          <p>In 3.11, when CPython detects Python code calling another Python function, it sets up a new frame, and “jumps” to the new code inside the new frame. This avoids calling the C interpreting function altogether.</p> 
          <p>Most Python function calls now consume no C stack space. This speeds up most of such calls. In simple recursive functions like fibonacci or factorial, a 1.7x speedup was observed. This also means recursive functions can recurse significantly deeper (if the user increases the recursion limit). We measured a 1-3% improvement in pyperformance.</p> 
          <p>(Contributed by Pablo Galindo and Mark Shannon in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45256">bpo-45256</a>.)</p> 
         </section> 
         <section id="pep-659-specializing-adaptive-interpreter"> 
          <h4>PEP 659: Specializing Adaptive Interpreter<a class="headerlink" href="#pep-659-specializing-adaptive-interpreter" title="Permalink to this headline">¶</a></h4> 
          <p><span class="target" id="index-24"></span><a class="pep reference external" href="https://peps.python.org/pep-0659/"><strong>PEP 659</strong></a> is one of the key parts of the faster CPython project. The general idea is that while Python is a dynamic language, most code has regions where objects and types rarely change. This concept is known as <em>type stability</em>.</p> 
          <p>At runtime, Python will try to look for common patterns and type stability in the executing code. Python will then replace the current operation with a more specialized one. This specialized operation uses fast paths available only to those use cases/types, which generally outperform their generic counterparts. This also brings in another concept called <em>inline caching</em>, where Python caches the results of expensive operations directly in the bytecode.</p> 
          <p>The specializer will also combine certain common instruction pairs into one superinstruction. This reduces the overhead during execution.</p> 
          <p>Python will only specialize when it sees code that is “hot” (executed multiple times). This prevents Python from wasting time for run-once code. Python can also de-specialize when code is too dynamic or when the use changes. Specialization is attempted periodically, and specialization attempts are not too expensive. This allows specialization to adapt to new circumstances.</p> 
          <p>(PEP written by Mark Shannon, with ideas inspired by Stefan Brunthaler. See <span class="target" id="index-25"></span><a class="pep reference external" href="https://peps.python.org/pep-0659/"><strong>PEP 659</strong></a> for more information. Implementation by Mark Shannon and Brandt Bucher, with additional help from Irit Katriel and Dennis Sweeney.)</p> 
          <table class="docutils align-default"> 
           <colgroup> 
            <col style="width: 12%"> 
            <col style="width: 16%"> 
            <col style="width: 43%"> 
            <col style="width: 15%"> 
            <col style="width: 15%"> 
           </colgroup> 
           <thead> 
            <tr class="row-odd">
             <th class="head"><p>Operation</p></th> 
             <th class="head"><p>Form</p></th> 
             <th class="head"><p>Specialization</p></th> 
             <th class="head"><p>Operation speedup (up to)</p></th> 
             <th class="head"><p>Contributor(s)</p></th> 
            </tr> 
           </thead> 
           <tbody> 
            <tr class="row-even">
             <td><p>Binary operations</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">x+x;</span> <span class="pre">x*x;</span> <span class="pre">x-x;</span></code></p></td> 
             <td><p>Binary add, multiply and subtract for common types such as <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, and <code class="docutils literal notranslate"><span class="pre">str</span></code> take custom fast paths for their underlying types.</p></td> 
             <td><p>10%</p></td> 
             <td><p>Mark Shannon, Dong-hee Na, Brandt Bucher, Dennis Sweeney</p></td> 
            </tr> 
            <tr class="row-odd">
             <td><p>Subscript</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">a[i]</span></code></p></td> 
             <td><p>Subscripting container types such as <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code> and <code class="docutils literal notranslate"><span class="pre">dict</span></code> directly index the underlying data structures.</p> <p>Subscripting custom <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> is also inlined similar to <a class="reference internal" href="#inline-calls"><span class="std std-ref">Inlined Python function calls</span></a>.</p> </td> 
             <td><p>10-25%</p></td> 
             <td><p>Irit Katriel, Mark Shannon</p></td> 
            </tr> 
            <tr class="row-even">
             <td><p>Store subscript</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">a[i]</span> <span class="pre">=</span> <span class="pre">z</span></code></p></td> 
             <td><p>Similar to subscripting specialization above.</p></td> 
             <td><p>10-25%</p></td> 
             <td><p>Dennis Sweeney</p></td> 
            </tr> 
            <tr class="row-odd">
             <td><p>Calls</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">f(arg)</span></code> <code class="docutils literal notranslate"><span class="pre">C(arg)</span></code></p></td> 
             <td><p>Calls to common builtin (C) functions and types such as <code class="docutils literal notranslate"><span class="pre">len</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> directly call their underlying C version. This avoids going through the internal calling convention.</p></td> 
             <td><p>20%</p></td> 
             <td><p>Mark Shannon, Ken Jin</p></td> 
            </tr> 
            <tr class="row-even">
             <td><p>Load global variable</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">print</span></code> <code class="docutils literal notranslate"><span class="pre">len</span></code></p></td> 
             <td><p>The object’s index in the globals/builtins namespace is cached. Loading globals and builtins require zero namespace lookups.</p></td> 
             <td><p><a class="footnote-reference brackets" href="#id3" id="id1">1</a></p></td> 
             <td><p>Mark Shannon</p></td> 
            </tr> 
            <tr class="row-odd">
             <td><p>Load attribute</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">o.attr</span></code></p></td> 
             <td><p>Similar to loading global variables. The attribute’s index inside the class/object’s namespace is cached. In most cases, attribute loading will require zero namespace lookups.</p></td> 
             <td><p><a class="footnote-reference brackets" href="#id4" id="id2">2</a></p></td> 
             <td><p>Mark Shannon</p></td> 
            </tr> 
            <tr class="row-even">
             <td><p>Load methods for call</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">o.meth()</span></code></p></td> 
             <td><p>The actual address of the method is cached. Method loading now has no namespace lookups – even for classes with long inheritance chains.</p></td> 
             <td><p>10-20%</p></td> 
             <td><p>Ken Jin, Mark Shannon</p></td> 
            </tr> 
            <tr class="row-odd">
             <td><p>Store attribute</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">o.attr</span> <span class="pre">=</span> <span class="pre">z</span></code></p></td> 
             <td><p>Similar to load attribute optimization.</p></td> 
             <td><p>2% in pyperformance</p></td> 
             <td><p>Mark Shannon</p></td> 
            </tr> 
            <tr class="row-even">
             <td><p>Unpack Sequence</p></td> 
             <td><p><code class="docutils literal notranslate"><span class="pre">*seq</span></code></p></td> 
             <td><p>Specialized for common containers such as <code class="docutils literal notranslate"><span class="pre">list</span></code> and <code class="docutils literal notranslate"><span class="pre">tuple</span></code>. Avoids internal calling convention.</p></td> 
             <td><p>8%</p></td> 
             <td><p>Brandt Bucher</p></td> 
            </tr> 
           </tbody> 
          </table> 
          <dl class="footnote brackets"> 
           <dt class="label" id="id3">
            <span class="brackets"><a class="fn-backref" href="#id1">1</a></span>
           </dt> 
           <dd>
            <p>A similar optimization already existed since Python 3.8. 3.11 specializes for more forms and reduces some overhead.</p> 
           </dd> 
           <dt class="label" id="id4">
            <span class="brackets"><a class="fn-backref" href="#id2">2</a></span>
           </dt> 
           <dd>
            <p>A similar optimization already existed since Python 3.10. 3.11 specializes for more forms. Furthermore, all attribute loads should be sped up by <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45947">bpo-45947</a>.</p> 
           </dd> 
          </dl> 
         </section> 
        </section> 
        <section id="misc"> 
         <h3>Misc<a class="headerlink" href="#misc" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Objects now require less memory due to lazily created object namespaces. Their namespace dictionaries now also share keys more freely. (Contributed Mark Shannon in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45340">bpo-45340</a> and <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40116">bpo-40116</a>.)</p></li> 
          <li><p>A more concise representation of exceptions in the interpreter reduced the time required for catching an exception by about 10%. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="faq"> 
         <h3>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h3> 
         <div class="line-block"> 
          <div class="line">
           Q: How should I write my code to utilize these speedups?
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           A: You don’t have to change your code. Write Pythonic code that follows common best practices. The Faster CPython project optimizes for common code patterns we observe.
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           Q: Will CPython 3.11 use more memory?
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           A: Maybe not. We don’t expect memory use to exceed 20% more than 3.10. This is offset by memory optimizations for frame objects and object dictionaries as mentioned above.
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           Q: I don’t see any speedups in my workload. Why?
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           A: Certain code won’t have noticeable benefits. If your code spends most of its time on I/O operations, or already does most of its computation in a C extension library like numpy, there won’t be significant speedup. This project currently benefits pure-Python workloads the most.
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           Furthermore, the pyperformance figures are a geometric mean. Even within the pyperformance benchmarks, certain benchmarks have slowed down slightly, while others have sped up by nearly 2x!
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           Q: Is there a JIT compiler?
          </div> 
          <div class="line">
           <br>
          </div> 
          <div class="line">
           A: No. We’re still exploring other optimizations.
          </div> 
         </div> 
        </section> 
        <section id="about"> 
         <h3>About<a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h3> 
         <p>Faster CPython explores optimizations for <a class="reference internal" href="../glossary.html#term-CPython"><span class="xref std std-term">CPython</span></a>. The main team is funded by Microsoft to work on this full-time. Pablo Galindo Salgado is also funded by Bloomberg LP to work on the project part-time. Finally, many contributors are volunteers from the community.</p> 
        </section> 
       </section> 
       <section id="cpython-bytecode-changes"> 
        <h2>CPython bytecode changes<a class="headerlink" href="#cpython-bytecode-changes" title="Permalink to this headline">¶</a></h2> 
        <ul class="simple"> 
         <li><p>Replaced all numeric <code class="docutils literal notranslate"><span class="pre">BINARY_*</span></code> and <code class="docutils literal notranslate"><span class="pre">INPLACE_*</span></code> instructions with a single <a class="reference internal" href="../library/dis.html#opcode-BINARY_OP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">BINARY_OP</span></code></a> implementation.</p></li> 
         <li><p>Replaced the three call instructions: <code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL_FUNCTION</span></code>, <code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL_FUNCTION_KW</span></code> and <code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL_METHOD</span></code> with <a class="reference internal" href="../library/dis.html#opcode-PUSH_NULL"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">PUSH_NULL</span></code></a>, <a class="reference internal" href="../library/dis.html#opcode-PRECALL"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">PRECALL</span></code></a>, <a class="reference internal" href="../library/dis.html#opcode-CALL"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL</span></code></a>, and <a class="reference internal" href="../library/dis.html#opcode-KW_NAMES"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">KW_NAMES</span></code></a>. This decouples the argument shifting for methods from the handling of keyword arguments and allows better specialization of calls.</p></li> 
         <li><p>Removed <code class="docutils literal notranslate"><span class="pre">COPY_DICT_WITHOUT_KEYS</span></code> and <code class="docutils literal notranslate"><span class="pre">GEN_START</span></code>.</p></li> 
         <li><p><a class="reference internal" href="../library/dis.html#opcode-MATCH_CLASS"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">MATCH_CLASS</span></code></a> and <a class="reference internal" href="../library/dis.html#opcode-MATCH_KEYS"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">MATCH_KEYS</span></code></a> no longer push an additional boolean value indicating whether the match succeeded or failed. Instead, they indicate failure with <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a> (where a tuple of extracted values would otherwise be).</p></li> 
         <li><p>Replace several stack manipulation instructions (<code class="docutils literal notranslate"><span class="pre">DUP_TOP</span></code>, <code class="docutils literal notranslate"><span class="pre">DUP_TOP_TWO</span></code>, <code class="docutils literal notranslate"><span class="pre">ROT_TWO</span></code>, <code class="docutils literal notranslate"><span class="pre">ROT_THREE</span></code>, <code class="docutils literal notranslate"><span class="pre">ROT_FOUR</span></code>, and <code class="docutils literal notranslate"><span class="pre">ROT_N</span></code>) with new <a class="reference internal" href="../library/dis.html#opcode-COPY"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">COPY</span></code></a> and <a class="reference internal" href="../library/dis.html#opcode-SWAP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">SWAP</span></code></a> instructions.</p></li> 
         <li><p>Replaced <code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_IF_NOT_EXC_MATCH</span></code> by <a class="reference internal" href="../library/dis.html#opcode-CHECK_EXC_MATCH"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CHECK_EXC_MATCH</span></code></a> which performs the check but does not jump.</p></li> 
         <li><p>Replaced <code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_IF_NOT_EG_MATCH</span></code> by <a class="reference internal" href="../library/dis.html#opcode-CHECK_EG_MATCH"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">CHECK_EG_MATCH</span></code></a> which performs the check but does not jump.</p></li> 
         <li><p>Replaced <code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_ABSOLUTE</span></code> by the relative <a class="reference internal" href="../library/dis.html#opcode-JUMP_BACKWARD"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_BACKWARD</span></code></a>.</p></li> 
         <li><p>Added <a class="reference internal" href="../library/dis.html#opcode-JUMP_BACKWARD_NO_INTERRUPT"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_BACKWARD_NO_INTERRUPT</span></code></a>, which is used in certain loops where it is undesirable to handle interrupts.</p></li> 
         <li><p>Replaced <code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_IF_TRUE</span></code> and <code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_IF_FALSE</span></code> by the relative <a class="reference internal" href="../library/dis.html#opcode-POP_JUMP_FORWARD_IF_TRUE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_FORWARD_IF_TRUE</span></code></a>, <a class="reference internal" href="../library/dis.html#opcode-POP_JUMP_BACKWARD_IF_TRUE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_BACKWARD_IF_TRUE</span></code></a>, <a class="reference internal" href="../library/dis.html#opcode-POP_JUMP_FORWARD_IF_FALSE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_FORWARD_IF_FALSE</span></code></a> and <a class="reference internal" href="../library/dis.html#opcode-POP_JUMP_BACKWARD_IF_FALSE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_BACKWARD_IF_FALSE</span></code></a>.</p></li> 
         <li><p>Added <a class="reference internal" href="../library/dis.html#opcode-POP_JUMP_FORWARD_IF_NOT_NONE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_FORWARD_IF_NOT_NONE</span></code></a>, <a class="reference internal" href="../library/dis.html#opcode-POP_JUMP_BACKWARD_IF_NOT_NONE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_BACKWARD_IF_NOT_NONE</span></code></a>, <a class="reference internal" href="../library/dis.html#opcode-POP_JUMP_FORWARD_IF_NONE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_FORWARD_IF_NONE</span></code></a> and <a class="reference internal" href="../library/dis.html#opcode-POP_JUMP_BACKWARD_IF_NONE"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_JUMP_BACKWARD_IF_NONE</span></code></a> opcodes to speed up conditional jumps.</p></li> 
         <li><p><a class="reference internal" href="../library/dis.html#opcode-JUMP_IF_TRUE_OR_POP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_IF_TRUE_OR_POP</span></code></a> and <a class="reference internal" href="../library/dis.html#opcode-JUMP_IF_FALSE_OR_POP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">JUMP_IF_FALSE_OR_POP</span></code></a> are now relative rather than absolute.</p></li> 
        </ul> 
       </section> 
       <section id="deprecated"> 
        <h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h2> 
        <ul> 
         <li><p>Chaining <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">classmethod</span></code></a> descriptors (introduced in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=19072">bpo-19072</a>) is now deprecated. It can no longer be used to wrap other descriptors such as <a class="reference internal" href="../library/functions.html#property" title="property"><code class="xref py py-class docutils literal notranslate"><span class="pre">property</span></code></a>. The core design of this feature was flawed and caused a number of downstream problems. To “pass-through” a <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">classmethod</span></code></a>, consider using the <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> attribute that was added in Python 3.10. (Contributed by Raymond Hettinger in <a class="reference external" href="https://github.com/python/cpython/issues/89519">gh-89519</a>.)</p></li> 
         <li><p>Octal escapes with value larger than <code class="docutils literal notranslate"><span class="pre">0o377</span></code> now produce a <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. In a future Python version they will be a <a class="reference internal" href="../library/exceptions.html#SyntaxWarning" title="SyntaxWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxWarning</span></code></a> and eventually a <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a>. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://github.com/python/cpython/issues/81548">gh-81548</a>.)</p></li> 
         <li><p>The <a class="reference internal" href="../library/2to3.html#module-lib2to3" title="lib2to3: The 2to3 library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lib2to3</span></code></a> package and <code class="docutils literal notranslate"><span class="pre">2to3</span></code> tool are now deprecated and may not be able to parse Python 3.10 or newer. See the <span class="target" id="index-26"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a> (New PEG parser for CPython). (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40360">bpo-40360</a>.)</p></li> 
         <li><p>Undocumented modules <code class="docutils literal notranslate"><span class="pre">sre_compile</span></code>, <code class="docutils literal notranslate"><span class="pre">sre_constants</span></code> and <code class="docutils literal notranslate"><span class="pre">sre_parse</span></code> are now deprecated. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47152">bpo-47152</a>.)</p></li> 
         <li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">webbrowser.MacOSX</span></code> is deprecated and will be removed in Python 3.13. It is untested and undocumented and also not used by webbrowser itself. (Contributed by Dong-hee Na in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=42255">bpo-42255</a>.)</p></li> 
         <li><p>The behavior of returning a value from a <a class="reference internal" href="../library/unittest.html#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestCase</span></code></a> and <a class="reference internal" href="../library/unittest.html#unittest.IsolatedAsyncioTestCase" title="unittest.IsolatedAsyncioTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsolatedAsyncioTestCase</span></code></a> test methods (other than the default <code class="docutils literal notranslate"><span class="pre">None</span></code> value), is now deprecated.</p></li> 
         <li><p>Deprecated the following <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> functions, scheduled for removal in Python 3.13:</p> 
          <ul class="simple"> 
           <li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.findTestCases()</span></code></p></li> 
           <li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.makeSuite()</span></code></p></li> 
           <li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.getTestCaseNames()</span></code></p></li> 
          </ul> <p>Use <a class="reference internal" href="../library/unittest.html#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestLoader</span></code></a> method instead:</p> 
          <ul class="simple"> 
           <li><p><a class="reference internal" href="../library/unittest.html#unittest.TestLoader.loadTestsFromModule" title="unittest.TestLoader.loadTestsFromModule"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestLoader.loadTestsFromModule()</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/unittest.html#unittest.TestLoader.loadTestsFromTestCase" title="unittest.TestLoader.loadTestsFromTestCase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestLoader.loadTestsFromTestCase()</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/unittest.html#unittest.TestLoader.getTestCaseNames" title="unittest.TestLoader.getTestCaseNames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestLoader.getTestCaseNames()</span></code></a></p></li> 
          </ul> <p>(Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=5846">bpo-5846</a>.)</p> </li> 
         <li><p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">turtle.RawTurtle.settiltangle()</span></code> is deprecated since Python 3.1, it now emits a deprecation warning and will be removed in Python 3.13. Use <code class="xref py py-meth docutils literal notranslate"><span class="pre">turtle.RawTurtle.tiltangle()</span></code> instead (it was earlier incorrectly marked as deprecated, its docstring is now corrected). (Contributed by Hugo van Kemenade in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45837">bpo-45837</a>.)</p></li> 
         <li><p>The delegation of <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-func docutils literal notranslate"><span class="pre">int()</span></code></a> to <code class="xref py py-meth docutils literal notranslate"><span class="pre">__trunc__()</span></code> is now deprecated. Calling <code class="docutils literal notranslate"><span class="pre">int(a)</span></code> when <code class="docutils literal notranslate"><span class="pre">type(a)</span></code> implements <code class="xref py py-meth docutils literal notranslate"><span class="pre">__trunc__()</span></code> but not <code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">__index__()</span></code> now raises a <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. (Contributed by Zackery Spytz in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44977">bpo-44977</a>.)</p></li> 
         <li><p>The following have been deprecated in <a class="reference internal" href="../library/configparser.html#module-configparser" title="configparser: Configuration file parser."><code class="xref py py-mod docutils literal notranslate"><span class="pre">configparser</span></code></a> since Python 3.2. Their deprecation warnings have now been updated to note they will removed in Python 3.12:</p> 
          <ul class="simple"> 
           <li><p>the <code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.SafeConfigParser</span></code> class</p></li> 
           <li><p>the <code class="xref py py-attr docutils literal notranslate"><span class="pre">configparser.ParsingError.filename</span></code> property</p></li> 
           <li><p>the <code class="xref py py-meth docutils literal notranslate"><span class="pre">configparser.RawConfigParser.readfp()</span></code> method</p></li> 
          </ul> <p>(Contributed by Hugo van Kemenade in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45173">bpo-45173</a>.)</p> </li> 
         <li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.LegacyInterpolation</span></code> has been deprecated in the docstring since Python 3.2. It now emits a <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> and will be removed in Python 3.13. Use <a class="reference internal" href="../library/configparser.html#configparser.BasicInterpolation" title="configparser.BasicInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.BasicInterpolation</span></code></a> or <a class="reference internal" href="../library/configparser.html#configparser.ExtendedInterpolation" title="configparser.ExtendedInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.ExtendedInterpolation</span></code></a> instead. (Contributed by Hugo van Kemenade in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46607">bpo-46607</a>.)</p></li> 
         <li><p>The <a class="reference internal" href="../library/locale.html#locale.getdefaultlocale" title="locale.getdefaultlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getdefaultlocale()</span></code></a> function is deprecated and will be removed in Python 3.13. Use <a class="reference internal" href="../library/locale.html#locale.setlocale" title="locale.setlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.setlocale()</span></code></a>, <a class="reference internal" href="../library/locale.html#locale.getpreferredencoding" title="locale.getpreferredencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getpreferredencoding(False)</span></code></a> and <a class="reference internal" href="../library/locale.html#locale.getlocale" title="locale.getlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getlocale()</span></code></a> functions instead. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46659">bpo-46659</a>.)</p></li> 
         <li><p>The <a class="reference internal" href="../library/asynchat.html#module-asynchat" title="asynchat: Support for asynchronous command/response protocols. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asynchat</span></code></a>, <a class="reference internal" href="../library/asyncore.html#module-asyncore" title="asyncore: A base class for developing asynchronous socket handling services. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncore</span></code></a> and <a class="reference internal" href="../library/smtpd.html#module-smtpd" title="smtpd: A SMTP server implementation in Python. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">smtpd</span></code></a> modules have been deprecated since at least Python 3.6. Their documentation and deprecation warnings have now been updated to note they will removed in Python 3.12 (<span class="target" id="index-27"></span><a class="pep reference external" href="https://peps.python.org/pep-0594/"><strong>PEP 594</strong></a>). (Contributed by Hugo van Kemenade in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47022">bpo-47022</a>.)</p></li> 
         <li><p><span class="target" id="index-28"></span><a class="pep reference external" href="https://peps.python.org/pep-0594/"><strong>PEP 594</strong></a> led to the deprecations of the following modules which are slated for removal in Python 3.13:</p> 
          <ul class="simple"> 
           <li><p><a class="reference internal" href="../library/aifc.html#module-aifc" title="aifc: Read and write audio files in AIFF or AIFC format. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">aifc</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/cgi.html#module-cgi" title="cgi: Helpers for running Python scripts via the Common Gateway Interface. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cgi</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/cgitb.html#module-cgitb" title="cgitb: Configurable traceback handler for CGI scripts. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cgitb</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/chunk.html#module-chunk" title="chunk: Module to read IFF chunks. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">chunk</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/crypt.html#module-crypt" title="crypt: The crypt() function used to check Unix passwords. (deprecated) (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">crypt</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/imghdr.html#module-imghdr" title="imghdr: Determine the type of image contained in a file or byte stream. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imghdr</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/mailcap.html#module-mailcap" title="mailcap: Mailcap file handling. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailcap</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/msilib.html#module-msilib" title="msilib: Creation of Microsoft Installer files, and CAB files. (deprecated) (Windows)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">msilib</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/nis.html#module-nis" title="nis: Interface to Sun's NIS (Yellow Pages) library. (deprecated) (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nis</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/nntplib.html#module-nntplib" title="nntplib: NNTP protocol client (requires sockets). (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/ossaudiodev.html#module-ossaudiodev" title="ossaudiodev: Access to OSS-compatible audio devices. (deprecated) (Linux, FreeBSD)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ossaudiodev</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/pipes.html#module-pipes" title="pipes: A Python interface to Unix shell pipelines. (deprecated) (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pipes</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/sndhdr.html#module-sndhdr" title="sndhdr: Determine type of a sound file. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sndhdr</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/spwd.html#module-spwd" title="spwd: The shadow password database (getspnam() and friends). (deprecated) (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">spwd</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/sunau.html#module-sunau" title="sunau: Provide an interface to the Sun AU sound format. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sunau</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/telnetlib.html#module-telnetlib" title="telnetlib: Telnet client class. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">telnetlib</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/uu.html#module-uu" title="uu: Encode and decode files in uuencode format. (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uu</span></code></a></p></li> 
           <li><p><a class="reference internal" href="../library/xdrlib.html#module-xdrlib" title="xdrlib: Encoders and decoders for the External Data Representation (XDR). (deprecated)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xdrlib</span></code></a></p></li> 
          </ul> <p>(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47061">bpo-47061</a> and Victor Stinner in <a class="reference external" href="https://github.com/python/cpython/issues/68966">gh-68966</a>.)</p> </li> 
         <li><p>More strict rules will be applied now applied for numerical group references and group names in regular expressions in future Python versions. Only sequence of ASCII digits will be now accepted as a numerical reference. The group name in bytes patterns and replacement strings could only contain ASCII letters and digits and underscore. For now, a deprecation warning is raised for such syntax. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://github.com/python/cpython/issues/91760">gh-91760</a>.)</p></li> 
         <li><p><a class="reference internal" href="../library/typing.html#typing.Text" title="typing.Text"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Text</span></code></a>, which exists solely to provide compatibility support between Python 2 and Python 3 code, is now deprecated. Its removal is currently unplanned, but users are encouraged to use <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> instead wherever possible. (Contributed by Alex Waygood in <a class="reference external" href="https://github.com/python/cpython/issues/92332">gh-92332</a>.)</p></li> 
        </ul> 
       </section> 
       <section id="pending-removal-in-python-3-12"> 
        <h2>Pending Removal in Python 3.12<a class="headerlink" href="#pending-removal-in-python-3-12" title="Permalink to this headline">¶</a></h2> 
        <p>The following APIs have been deprecated in earlier Python releases, and will be removed in Python 3.12.</p> 
        <p>Python API:</p> 
        <ul class="simple"> 
         <li><p><a class="reference internal" href="../library/pkgutil.html#pkgutil.ImpImporter" title="pkgutil.ImpImporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">pkgutil.ImpImporter</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../library/pkgutil.html#pkgutil.ImpLoader" title="pkgutil.ImpLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">pkgutil.ImpLoader</span></code></a></p></li> 
         <li><p><span class="target" id="index-29"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONTHREADDEBUG"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONTHREADDEBUG</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.find_loader" title="importlib.find_loader"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.find_loader()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.util.module_for_loader" title="importlib.util.module_for_loader"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.module_for_loader()</span></code></a></p></li> 
         <li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.set_loader_wrapper()</span></code></p></li> 
         <li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.set_package_wrapper()</span></code></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.module_repr" title="importlib.abc.Loader.module_repr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.Loader.module_repr()</span></code></a></p></li> 
         <li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.Loadermodule_repr()</span></code></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.abc.MetaPathFinder.find_module" title="importlib.abc.MetaPathFinder.find_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_module()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.abc.MetaPathFinder.find_module" title="importlib.abc.MetaPathFinder.find_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_module()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.abc.PathEntryFinder.find_loader" title="importlib.abc.PathEntryFinder.find_loader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_loader()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.abc.PathEntryFinder.find_module" title="importlib.abc.PathEntryFinder.find_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_module()</span></code></a></p></li> 
         <li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.BuiltinImporter.find_module()</span></code></p></li> 
         <li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.BuiltinLoader.module_repr()</span></code></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.machinery.FileFinder.find_loader" title="importlib.machinery.FileFinder.find_loader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FileFinder.find_loader()</span></code></a></p></li> 
         <li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FileFinder.find_module()</span></code></p></li> 
         <li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FrozenImporter.find_module()</span></code></p></li> 
         <li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FrozenLoader.module_repr()</span></code></p></li> 
         <li><p><a class="reference internal" href="../library/importlib.html#importlib.machinery.PathFinder.find_module" title="importlib.machinery.PathFinder.find_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.PathFinder.find_module()</span></code></a></p></li> 
         <li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.WindowsRegistryFinder.find_module()</span></code></p></li> 
         <li><p><a class="reference internal" href="../library/pathlib.html#pathlib.Path.link_to" title="pathlib.Path.link_to"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.link_to()</span></code></a></p></li> 
         <li><p>The entire <a class="reference internal" href="3.10.html#distutils-deprecated"><span class="std std-ref">distutils namespace</span></a></p></li> 
         <li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.log()</span></code></p></li> 
         <li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sqlite3.OptimizedUnicode()</span></code></p></li> 
         <li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sqlite3.enable_shared_cache()</span></code></p></li> 
        </ul> 
        <p>C API:</p> 
        <ul class="simple"> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AS_DATA" title="PyUnicode_AS_DATA"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AS_DATA()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AS_UNICODE" title="PyUnicode_AS_UNICODE"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AS_UNICODE()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsUnicodeAndSize" title="PyUnicode_AsUnicodeAndSize"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicodeAndSize()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsUnicode" title="PyUnicode_AsUnicode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicode()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_FromUnicode" title="PyUnicode_FromUnicode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_FromUnicode()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_GET_DATA_SIZE" title="PyUnicode_GET_DATA_SIZE"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_GET_DATA_SIZE()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_GET_SIZE" title="PyUnicode_GET_SIZE"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_GET_SIZE()</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_GetSize" title="PyUnicode_GetSize"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_GetSize()</span></code></a></p></li> 
         <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_IS_COMPACT()</span></code></p></li> 
         <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_IS_READY()</span></code></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_READY" title="PyUnicode_READY"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_READY()</span></code></a></p></li> 
         <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_UNICODE_WSTR_LENGTH()</span></code></p></li> 
         <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">_PyUnicode_AsUnicode()</span></code></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_WCHAR_KIND" title="PyUnicode_WCHAR_KIND"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyUnicode_WCHAR_KIND</span></code></a></p></li> 
         <li><p><a class="reference internal" href="../c-api/unicode.html#c.PyUnicodeObject" title="PyUnicodeObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyUnicodeObject</span></code></a></p></li> 
         <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_InternImmortal()</span></code></p></li> 
        </ul> 
       </section> 
       <section id="removed"> 
        <h2>Removed<a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h2> 
        <ul> 
         <li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">smtpd.MailmanProxy</span></code> is now removed as it is unusable without an external module, <code class="docutils literal notranslate"><span class="pre">mailman</span></code>. (Contributed by Dong-hee Na in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=35800">bpo-35800</a>.)</p></li> 
         <li><p>The <code class="docutils literal notranslate"><span class="pre">binhex</span></code> module, deprecated in Python 3.9, is now removed. The following <a class="reference internal" href="../library/binascii.html#module-binascii" title="binascii: Tools for converting between binary and various ASCII-encoded binary representations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">binascii</span></code></a> functions, deprecated in Python 3.9, are now also removed:</p> 
          <ul class="simple"> 
           <li><p><code class="docutils literal notranslate"><span class="pre">a2b_hqx()</span></code>, <code class="docutils literal notranslate"><span class="pre">b2a_hqx()</span></code>;</p></li> 
           <li><p><code class="docutils literal notranslate"><span class="pre">rlecode_hqx()</span></code>, <code class="docutils literal notranslate"><span class="pre">rledecode_hqx()</span></code>.</p></li> 
          </ul> <p>The <a class="reference internal" href="../library/binascii.html#binascii.crc_hqx" title="binascii.crc_hqx"><code class="xref py py-func docutils literal notranslate"><span class="pre">binascii.crc_hqx()</span></code></a> function remains available.</p> <p>(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45085">bpo-45085</a>.)</p> </li> 
         <li><p>The distutils <code class="docutils literal notranslate"><span class="pre">bdist_msi</span></code> command, deprecated in Python 3.9, is now removed. Use <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code> (wheel packages) instead. (Contributed by Hugo van Kemenade in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45124">bpo-45124</a>.)</p></li> 
         <li><p>Due to significant security concerns, the <em>reuse_address</em> parameter of <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_datagram_endpoint" title="asyncio.loop.create_datagram_endpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.create_datagram_endpoint()</span></code></a>, disabled in Python 3.9, is now entirely removed. This is because of the behavior of the socket option <code class="docutils literal notranslate"><span class="pre">SO_REUSEADDR</span></code> in UDP. (Contributed by Hugo van Kemenade in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45129">bpo-45129</a>.)</p></li> 
         <li><p>Removed <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code> methods of <a class="reference internal" href="../library/xml.dom.pulldom.html#xml.dom.pulldom.DOMEventStream" title="xml.dom.pulldom.DOMEventStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.dom.pulldom.DOMEventStream</span></code></a>, <a class="reference internal" href="../library/wsgiref.html#wsgiref.util.FileWrapper" title="wsgiref.util.FileWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">wsgiref.util.FileWrapper</span></code></a> and <a class="reference internal" href="../library/fileinput.html#fileinput.FileInput" title="fileinput.FileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">fileinput.FileInput</span></code></a>, deprecated since Python 3.9. (Contributed by Hugo van Kemenade in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45132">bpo-45132</a>.)</p></li> 
         <li><p>The following deprecated functions and methods are removed in the <a class="reference internal" href="../library/gettext.html#module-gettext" title="gettext: Multilingual internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gettext</span></code></a> module: <code class="xref py py-func docutils literal notranslate"><span class="pre">lgettext()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">ldgettext()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">lngettext()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">ldngettext()</span></code>.</p> <p>Function <code class="xref py py-func docutils literal notranslate"><span class="pre">bind_textdomain_codeset()</span></code>, methods <code class="xref py py-meth docutils literal notranslate"><span class="pre">output_charset()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_output_charset()</span></code>, and the <em>codeset</em> parameter of functions <a class="reference internal" href="../library/gettext.html#gettext.translation" title="gettext.translation"><code class="xref py py-func docutils literal notranslate"><span class="pre">translation()</span></code></a> and <a class="reference internal" href="../library/gettext.html#gettext.install" title="gettext.install"><code class="xref py py-func docutils literal notranslate"><span class="pre">install()</span></code></a> are also removed, since they are only used for the <code class="docutils literal notranslate"><span class="pre">l*gettext()</span></code> functions. (Contributed by Dong-hee Na and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44235">bpo-44235</a>.)</p> </li> 
         <li><p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">@asyncio.coroutine</span></code> <a class="reference internal" href="../glossary.html#term-decorator"><span class="xref std std-term">decorator</span></a> enabling legacy generator-based coroutines to be compatible with async/await code. The function has been deprecated since Python 3.8 and the removal was initially scheduled for Python 3.10. Use <a class="reference internal" href="../reference/compound_stmts.html#async-def"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code></a> instead. (Contributed by Illia Volochii in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43216">bpo-43216</a>.)</p></li> 
         <li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.coroutines.CoroWrapper</span></code> used for wrapping legacy generator-based coroutine objects in the debug mode. (Contributed by Illia Volochii in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43216">bpo-43216</a>.)</p></li> 
         <li><p>Removed the deprecated <code class="docutils literal notranslate"><span class="pre">split()</span></code> method of <code class="xref py py-class docutils literal notranslate"><span class="pre">_tkinter.TkappType</span></code>. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=38371">bpo-38371</a>.)</p></li> 
         <li><p>Removed from the <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> module:</p> 
          <ul class="simple"> 
           <li><p>the <code class="docutils literal notranslate"><span class="pre">getargspec</span></code> function, deprecated since Python 3.0; use <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.signature()</span></code></a> or <a class="reference internal" href="../library/inspect.html#inspect.getfullargspec" title="inspect.getfullargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getfullargspec()</span></code></a> instead.</p></li> 
           <li><p>the <code class="docutils literal notranslate"><span class="pre">formatargspec</span></code> function, deprecated since Python 3.5; use the <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.signature()</span></code></a> function and <code class="xref py py-class docutils literal notranslate"><span class="pre">Signature</span></code> object directly.</p></li> 
           <li><p>the undocumented <code class="docutils literal notranslate"><span class="pre">Signature.from_builtin</span></code> and <code class="docutils literal notranslate"><span class="pre">Signature.from_function</span></code> functions, deprecated since Python 3.5; use the <a class="reference internal" href="../library/inspect.html#inspect.Signature.from_callable" title="inspect.Signature.from_callable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Signature.from_callable()</span></code></a> method instead.</p></li> 
          </ul> <p>(Contributed by Hugo van Kemenade in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45320">bpo-45320</a>.)</p> </li> 
         <li><p>Remove namespace package support from unittest discovery. It was introduced in Python 3.4 but has been broken since Python 3.7. (Contributed by Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=23882">bpo-23882</a>.)</p></li> 
         <li><p>Remove <code class="docutils literal notranslate"><span class="pre">__class_getitem__</span></code> method from <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.PurePath</span></code></a>, because it was not used and added by mistake in previous versions. (Contributed by Nikita Sobolev in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46483">bpo-46483</a>.)</p></li> 
         <li><p>Remove the undocumented private <code class="docutils literal notranslate"><span class="pre">float.__set_format__()</span></code> method, previously known as <code class="docutils literal notranslate"><span class="pre">float.__setformat__()</span></code> in Python 3.7. Its docstring said: “You probably don’t want to use this function. It exists mainly to be used in Python’s test suite.” (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46852">bpo-46852</a>.)</p></li> 
        </ul> 
       </section> 
       <section id="porting-to-python-3-11"> 
        <h2>Porting to Python 3.11<a class="headerlink" href="#porting-to-python-3-11" title="Permalink to this headline">¶</a></h2> 
        <p>This section lists previously described changes and other bugfixes that may require changes to your code.</p> 
        <section id="changes-in-the-python-api"> 
         <h3>Changes in the Python API<a class="headerlink" href="#changes-in-the-python-api" title="Permalink to this headline">¶</a></h3> 
         <ul class="simple"> 
          <li><p>Prohibited passing non-<a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ThreadPoolExecutor</span></code></a> executors to <code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.set_default_executor()</span></code> following a deprecation in Python 3.8. (Contributed by Illia Volochii in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43234">bpo-43234</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>, <a class="reference internal" href="../library/io.html#io.open" title="io.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">io.open()</span></code></a>, <a class="reference internal" href="../library/codecs.html#codecs.open" title="codecs.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.open()</span></code></a> and <a class="reference internal" href="../library/fileinput.html#fileinput.FileInput" title="fileinput.FileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">fileinput.FileInput</span></code></a> no longer accept <code class="docutils literal notranslate"><span class="pre">'U'</span></code> (“universal newline”) in the file mode. This flag was deprecated since Python 3.3. In Python 3, the “universal newline” is used by default when a file is open in text mode. The <a class="reference internal" href="../library/functions.html#open-newline-parameter"><span class="std std-ref">newline parameter</span></a> of <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> controls how universal newlines works. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=37330">bpo-37330</a>.)</p></li> 
          <li><p>The <a class="reference internal" href="../library/pdb.html#module-pdb" title="pdb: The Python debugger for interactive interpreters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a> module now reads the <code class="file docutils literal notranslate"><span class="pre">.pdbrc</span></code> configuration file with the <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code> encoding. (Contributed by Srinivas Reddy Thatiparthy (?????????? ?????? ?????????) in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=41137">bpo-41137</a>.)</p></li> 
          <li><p>When sorting using tuples as keys, the order of the result may differ from earlier releases if the tuple elements don’t define a total ordering (see <a class="reference internal" href="../reference/expressions.html#expressions-value-comparisons"><span class="std std-ref">Value comparisons</span></a> for information on total ordering). It’s generally true that the result of sorting simply isn’t well-defined in the absence of a total ordering on list elements.</p></li> 
          <li><p><a class="reference internal" href="../library/calendar.html#module-calendar" title="calendar: Functions for working with calendars, including some emulation of the Unix cal program."><code class="xref py py-mod docutils literal notranslate"><span class="pre">calendar</span></code></a>: The <a class="reference internal" href="../library/calendar.html#calendar.LocaleTextCalendar" title="calendar.LocaleTextCalendar"><code class="xref py py-class docutils literal notranslate"><span class="pre">calendar.LocaleTextCalendar</span></code></a> and <a class="reference internal" href="../library/calendar.html#calendar.LocaleHTMLCalendar" title="calendar.LocaleHTMLCalendar"><code class="xref py py-class docutils literal notranslate"><span class="pre">calendar.LocaleHTMLCalendar</span></code></a> classes now use <a class="reference internal" href="../library/locale.html#locale.getlocale" title="locale.getlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getlocale()</span></code></a>, instead of using <a class="reference internal" href="../library/locale.html#locale.getdefaultlocale" title="locale.getdefaultlocale"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getdefaultlocale()</span></code></a>, if no locale is specified. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46659">bpo-46659</a>.)</p></li> 
          <li><p>Global inline flags (e.g. <code class="docutils literal notranslate"><span class="pre">(?i)</span></code>) can now only be used at the start of the regular expressions. Using them not at the start of expression was deprecated since Python 3.6. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=47066">bpo-47066</a>.)</p></li> 
          <li><p><a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a> module: Fix a few long-standing bugs where, in rare cases, capturing group could get wrong result. So the result may be different than before. (Contributed by Ma Lin in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=35859">bpo-35859</a>.)</p></li> 
          <li><p>The <em>population</em> parameter of <a class="reference internal" href="../library/random.html#random.sample" title="random.sample"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.sample()</span></code></a> must be a sequence. Automatic conversion of sets to lists is no longer supported. If the sample size is larger than the population size, a <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> is raised. (Contributed by Raymond Hettinger in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40465">bpo-40465</a>.)</p></li> 
         </ul> 
        </section> 
       </section> 
       <section id="build-changes"> 
        <h2>Build Changes<a class="headerlink" href="#build-changes" title="Permalink to this headline">¶</a></h2> 
        <ul> 
         <li><p>Building Python now requires a C11 compiler without optional C11 features. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46656">bpo-46656</a>.)</p></li> 
         <li><p>Building Python now requires support of IEEE 754 floating point numbers. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46917">bpo-46917</a>.)</p></li> 
         <li><p>CPython can now be built with the ThinLTO option via <code class="docutils literal notranslate"><span class="pre">--with-lto=thin</span></code>. (Contributed by Dong-hee Na and Brett Holman in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44340">bpo-44340</a>.)</p></li> 
         <li><p>libpython is no longer linked against libcrypt. (Contributed by Mike Gilbert in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45433">bpo-45433</a>.)</p></li> 
         <li><p>Building Python now requires a C99 <code class="docutils literal notranslate"><span class="pre">&lt;math.h&gt;</span></code> header file providing the following functions: <code class="docutils literal notranslate"><span class="pre">copysign()</span></code>, <code class="docutils literal notranslate"><span class="pre">hypot()</span></code>, <code class="docutils literal notranslate"><span class="pre">isfinite()</span></code>, <code class="docutils literal notranslate"><span class="pre">isinf()</span></code>, <code class="docutils literal notranslate"><span class="pre">isnan()</span></code>, <code class="docutils literal notranslate"><span class="pre">round()</span></code>. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45440">bpo-45440</a>.)</p></li> 
         <li><p>Building Python now requires a C99 <code class="docutils literal notranslate"><span class="pre">&lt;math.h&gt;</span></code> header file providing a <code class="docutils literal notranslate"><span class="pre">NAN</span></code> constant, or the <code class="docutils literal notranslate"><span class="pre">__builtin_nan()</span></code> built-in function. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46640">bpo-46640</a>.)</p></li> 
         <li><p>Building Python now requires support for floating point Not-a-Number (NaN): remove the <code class="docutils literal notranslate"><span class="pre">Py_NO_NAN</span></code> macro. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46656">bpo-46656</a>.)</p></li> 
         <li><p>Freelists for object structs can now be disabled. A new <strong class="program">configure</strong> option <code class="xref std std-option docutils literal notranslate"><span class="pre">--without-freelists</span></code> can be used to disable all freelists except empty tuple singleton. (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45522">bpo-45522</a>)</p></li> 
         <li><p><code class="docutils literal notranslate"><span class="pre">Modules/Setup</span></code> and <code class="docutils literal notranslate"><span class="pre">Modules/makesetup</span></code> have been improved and tied up. Extension modules can now be built through <code class="docutils literal notranslate"><span class="pre">makesetup</span></code>. All except some test modules can be linked statically into main binary or library. (Contributed by Brett Cannon and Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45548">bpo-45548</a>, <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45570">bpo-45570</a>, <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45571">bpo-45571</a>, and <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43974">bpo-43974</a>.)</p></li> 
         <li><p>Build dependencies, compiler flags, and linker flags for most stdlib extension modules are now detected by <strong class="program">configure</strong>. libffi, libnsl, libsqlite3, zlib, bzip2, liblzma, libcrypt, Tcl/Tk libs, and uuid flags are detected by <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> (when available). (Contributed by Christian Heimes and Erlend Egeberg Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45847">bpo-45847</a>, <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45747">bpo-45747</a>, and <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45763">bpo-45763</a>.)</p> 
          <div class="admonition note"> 
           <p class="admonition-title">Note</p> 
           <p>Use the environment variables <code class="docutils literal notranslate"><span class="pre">TCLTK_CFLAGS</span></code> and <code class="docutils literal notranslate"><span class="pre">TCLTK_LIBS</span></code> to manually specify the location of Tcl/Tk headers and libraries. The <strong class="program">configure</strong> options <code class="docutils literal notranslate"><span class="pre">--with-tcltk-includes</span></code> and <code class="docutils literal notranslate"><span class="pre">--with-tcltk-libs</span></code> have been removed.</p> 
          </div> </li> 
         <li><p>CPython now has experimental support for cross compiling to WebAssembly platform <code class="docutils literal notranslate"><span class="pre">wasm32-emscripten</span></code>. The effort is inspired by previous work like Pyodide. (Contributed by Christian Heimes and Ethan Smith in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40280">bpo-40280</a>.)</p></li> 
         <li><p>CPython will now use 30-bit digits by default for the Python <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> implementation. Previously, the default was to use 30-bit digits on platforms with <code class="docutils literal notranslate"><span class="pre">SIZEOF_VOID_P</span> <span class="pre">&gt;=</span> <span class="pre">8</span></code>, and 15-bit digits otherwise. It’s still possible to explicitly request use of 15-bit digits via either the <code class="docutils literal notranslate"><span class="pre">--enable-big-digits</span></code> option to the configure script or (for Windows) the <code class="docutils literal notranslate"><span class="pre">PYLONG_BITS_IN_DIGIT</span></code> variable in <code class="docutils literal notranslate"><span class="pre">PC/pyconfig.h</span></code>, but this option may be removed at some point in the future. (Contributed by Mark Dickinson in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45569">bpo-45569</a>.)</p></li> 
         <li><p>The <a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tkinter</span></code></a> package now requires Tcl/Tk version 8.5.12 or newer. (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46996">bpo-46996</a>.)</p></li> 
        </ul> 
       </section> 
       <section id="c-api-changes"> 
        <h2>C API Changes<a class="headerlink" href="#c-api-changes" title="Permalink to this headline">¶</a></h2> 
        <section id="id5"> 
         <h3>New Features<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3> 
         <ul> 
          <li><p>Add a new <a class="reference internal" href="../c-api/type.html#c.PyType_GetName" title="PyType_GetName"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetName()</span></code></a> function to get type’s short name. (Contributed by Hai Shi in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=42035">bpo-42035</a>.)</p></li> 
          <li><p>Add a new <a class="reference internal" href="../c-api/type.html#c.PyType_GetQualName" title="PyType_GetQualName"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetQualName()</span></code></a> function to get type’s qualified name. (Contributed by Hai Shi in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=42035">bpo-42035</a>.)</p></li> 
          <li><p>Add new <a class="reference internal" href="../c-api/init.html#c.PyThreadState_EnterTracing" title="PyThreadState_EnterTracing"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_EnterTracing()</span></code></a> and <a class="reference internal" href="../c-api/init.html#c.PyThreadState_LeaveTracing" title="PyThreadState_LeaveTracing"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_LeaveTracing()</span></code></a> functions to the limited C API to suspend and resume tracing and profiling. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43760">bpo-43760</a>.)</p></li> 
          <li><p>Added the <a class="reference internal" href="../c-api/apiabiversion.html#c.Py_Version" title="Py_Version"><code class="xref c c-data docutils literal notranslate"><span class="pre">Py_Version</span></code></a> constant which bears the same value as <a class="reference internal" href="../c-api/apiabiversion.html#c.PY_VERSION_HEX" title="PY_VERSION_HEX"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PY_VERSION_HEX</span></code></a>. (Contributed by Gabriele N. Tornetta in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43931">bpo-43931</a>.)</p></li> 
          <li><p><a class="reference internal" href="../c-api/buffer.html#c.Py_buffer" title="Py_buffer"><code class="xref c c-type docutils literal notranslate"><span class="pre">Py_buffer</span></code></a> and APIs are now part of the limited API and the stable ABI:</p> 
           <ul class="simple"> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyObject_CheckBuffer" title="PyObject_CheckBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CheckBuffer()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyObject_GetBuffer" title="PyObject_GetBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GetBuffer()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_GetPointer" title="PyBuffer_GetPointer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_GetPointer()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_SizeFromFormat" title="PyBuffer_SizeFromFormat"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_SizeFromFormat()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_ToContiguous" title="PyBuffer_ToContiguous"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_ToContiguous()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_FromContiguous" title="PyBuffer_FromContiguous"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_FromContiguous()</span></code></a></p></li> 
            <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_CopyData()</span></code></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_IsContiguous" title="PyBuffer_IsContiguous"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_IsContiguous()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_FillContiguousStrides" title="PyBuffer_FillContiguousStrides"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_FillContiguousStrides()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_FillInfo" title="PyBuffer_FillInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_FillInfo()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/buffer.html#c.PyBuffer_Release" title="PyBuffer_Release"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBuffer_Release()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/memoryview.html#c.PyMemoryView_FromBuffer" title="PyMemoryView_FromBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMemoryView_FromBuffer()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/typeobj.html#c.PyBufferProcs.bf_getbuffer" title="PyBufferProcs.bf_getbuffer"><code class="xref c c-member docutils literal notranslate"><span class="pre">bf_getbuffer</span></code></a> and <a class="reference internal" href="../c-api/typeobj.html#c.PyBufferProcs.bf_releasebuffer" title="PyBufferProcs.bf_releasebuffer"><code class="xref c c-member docutils literal notranslate"><span class="pre">bf_releasebuffer</span></code></a> type slots</p></li> 
           </ul> <p>(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45459">bpo-45459</a>.)</p> </li> 
          <li><p>Added the <a class="reference internal" href="../c-api/type.html#c.PyType_GetModuleByDef" title="PyType_GetModuleByDef"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyType_GetModuleByDef</span></code></a> function, used to get the module in which a method was defined, in cases where this information is not available directly (via <a class="reference internal" href="../c-api/structures.html#c.PyCMethod" title="PyCMethod"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCMethod</span></code></a>). (Contributed by Petr Viktorin in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46613">bpo-46613</a>.)</p></li> 
          <li><p>Add new functions to pack and unpack C double (serialize and deserialize): <a class="reference internal" href="../c-api/float.html#c.PyFloat_Pack2" title="PyFloat_Pack2"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Pack2()</span></code></a>, <a class="reference internal" href="../c-api/float.html#c.PyFloat_Pack4" title="PyFloat_Pack4"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Pack4()</span></code></a>, <a class="reference internal" href="../c-api/float.html#c.PyFloat_Pack8" title="PyFloat_Pack8"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Pack8()</span></code></a>, <a class="reference internal" href="../c-api/float.html#c.PyFloat_Unpack2" title="PyFloat_Unpack2"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Unpack2()</span></code></a>, <a class="reference internal" href="../c-api/float.html#c.PyFloat_Unpack4" title="PyFloat_Unpack4"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Unpack4()</span></code></a> and <a class="reference internal" href="../c-api/float.html#c.PyFloat_Unpack8" title="PyFloat_Unpack8"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_Unpack8()</span></code></a>. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46906">bpo-46906</a>.)</p></li> 
          <li><p>Add new functions to get frame object attributes: <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBuiltins" title="PyFrame_GetBuiltins"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBuiltins()</span></code></a>, <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGenerator" title="PyFrame_GetGenerator"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGenerator()</span></code></a>, <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGlobals" title="PyFrame_GetGlobals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGlobals()</span></code></a>, <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLasti" title="PyFrame_GetLasti"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLasti()</span></code></a>.</p></li> 
          <li><p>Added two new functions to get and set the active exception instance: <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_GetHandledException" title="PyErr_GetHandledException"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_GetHandledException()</span></code></a> and <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_SetHandledException" title="PyErr_SetHandledException"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_SetHandledException()</span></code></a>. These are alternatives to <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_SetExcInfo" title="PyErr_SetExcInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_SetExcInfo()</span></code></a> and <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_GetExcInfo" title="PyErr_GetExcInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_GetExcInfo()</span></code></a> which work with the legacy 3-tuple representation of exceptions. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46343">bpo-46343</a>.)</p></li> 
          <li><p>Added the <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.safe_path" title="PyConfig.safe_path"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.safe_path</span></code></a> member. (Contributed by Victor Stinner in <a class="reference external" href="https://github.com/python/cpython/issues/57684">gh-57684</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="id6"> 
         <h3>Porting to Python 3.11<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3> 
         <ul> 
          <li><p><a class="reference internal" href="../c-api/exceptions.html#c.PyErr_SetExcInfo" title="PyErr_SetExcInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_SetExcInfo()</span></code></a> no longer uses the <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">traceback</span></code> arguments, the interpreter now derives those values from the exception instance (the <code class="docutils literal notranslate"><span class="pre">value</span></code> argument). The function still steals references of all three arguments. (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li> 
          <li><p><a class="reference internal" href="../c-api/exceptions.html#c.PyErr_GetExcInfo" title="PyErr_GetExcInfo"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_GetExcInfo()</span></code></a> now derives the <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">traceback</span></code> fields of the result from the exception instance (the <code class="docutils literal notranslate"><span class="pre">value</span></code> field). (Contributed by Irit Katriel in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45711">bpo-45711</a>.)</p></li> 
          <li><p><a class="reference internal" href="../c-api/import.html#c._frozen" title="_frozen"><code class="xref c c-type docutils literal notranslate"><span class="pre">_frozen</span></code></a> has a new <code class="docutils literal notranslate"><span class="pre">is_package</span></code> field to indicate whether or not the frozen module is a package. Previously, a negative value in the <code class="docutils literal notranslate"><span class="pre">size</span></code> field was the indicator. Now only non-negative values be used for <code class="docutils literal notranslate"><span class="pre">size</span></code>. (Contributed by Kumar Aditya in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46608">bpo-46608</a>.)</p></li> 
          <li><p><a class="reference internal" href="../c-api/init.html#c._PyFrameEvalFunction" title="_PyFrameEvalFunction"><code class="xref c c-func docutils literal notranslate"><span class="pre">_PyFrameEvalFunction()</span></code></a> now takes <code class="docutils literal notranslate"><span class="pre">_PyInterpreterFrame*</span></code> as its second parameter, instead of <code class="docutils literal notranslate"><span class="pre">PyFrameObject*</span></code>. See <span class="target" id="index-30"></span><a class="pep reference external" href="https://peps.python.org/pep-0523/"><strong>PEP 523</strong></a> for more details of how to use this function pointer type.</p></li> 
          <li><p><a class="reference internal" href="../c-api/code.html#c.PyCode_New" title="PyCode_New"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_New()</span></code></a> and <a class="reference internal" href="../c-api/code.html#c.PyCode_NewWithPosOnlyArgs" title="PyCode_NewWithPosOnlyArgs"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_NewWithPosOnlyArgs()</span></code></a> now take an additional <code class="docutils literal notranslate"><span class="pre">exception_table</span></code> argument. Using these functions should be avoided, if at all possible. To get a custom code object: create a code object using the compiler, then get a modified version with the <code class="docutils literal notranslate"><span class="pre">replace</span></code> method.</p></li> 
          <li><p><a class="reference internal" href="../c-api/code.html#c.PyCodeObject" title="PyCodeObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCodeObject</span></code></a> no longer has a <code class="docutils literal notranslate"><span class="pre">co_code</span></code> field. Instead, use <code class="docutils literal notranslate"><span class="pre">PyObject_GetAttrString(code_object,</span> <span class="pre">"co_code")</span></code> or <a class="reference internal" href="../c-api/code.html#c.PyCode_GetCode" title="PyCode_GetCode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_GetCode()</span></code></a> to get the underlying bytes object. (Contributed by Brandt Bucher in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46841">bpo-46841</a> and Ken Jin in <a class="reference external" href="https://github.com/python/cpython/issues/92154">gh-92154</a>.)</p></li> 
          <li><p>The old trashcan macros (<code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_BEGIN</span></code>/<code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_END</span></code>) are now deprecated. They should be replaced by the new macros <code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN</span></code> and <code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_END</span></code>.</p> <p>A tp_dealloc function that has the old macros, such as:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="n">static</span> <span class="n">void</span>
<span class="n">mytype_dealloc</span><span class="p">(</span><span class="n">mytype</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PyObject_GC_UnTrack</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    <span class="n">Py_TRASHCAN_SAFE_BEGIN</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    <span class="o">...</span>
    <span class="n">Py_TRASHCAN_SAFE_END</span>
<span class="p">}</span>
</pre>
            </div> 
           </div> <p>should migrate to the new macros as follows:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="n">static</span> <span class="n">void</span>
<span class="n">mytype_dealloc</span><span class="p">(</span><span class="n">mytype</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PyObject_GC_UnTrack</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    <span class="n">Py_TRASHCAN_BEGIN</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">mytype_dealloc</span><span class="p">)</span>
    <span class="o">...</span>
    <span class="n">Py_TRASHCAN_END</span>
<span class="p">}</span>
</pre>
            </div> 
           </div> <p>Note that <code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN</span></code> has a second argument which should be the deallocation function it is in.</p> <p>To support older Python versions in the same codebase, you can define the following macros and use them throughout the code (credit: these were copied from the <code class="docutils literal notranslate"><span class="pre">mypy</span></code> codebase):</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="c1">#if PY_MAJOR_VERSION &gt;= 3 &amp;&amp; PY_MINOR_VERSION &gt;= 8</span>
<span class="c1">#  define CPy_TRASHCAN_BEGIN(op, dealloc) Py_TRASHCAN_BEGIN(op, dealloc)</span>
<span class="c1">#  define CPy_TRASHCAN_END(op) Py_TRASHCAN_END</span>
<span class="c1">#else</span>
<span class="c1">#  define CPy_TRASHCAN_BEGIN(op, dealloc) Py_TRASHCAN_SAFE_BEGIN(op)</span>
<span class="c1">#  define CPy_TRASHCAN_END(op) Py_TRASHCAN_SAFE_END(op)</span>
<span class="c1">#endif</span>
</pre>
            </div> 
           </div> </li> 
          <li><p>The <a class="reference internal" href="../c-api/type.html#c.PyType_Ready" title="PyType_Ready"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_Ready()</span></code></a> function now raises an error if a type is defined with the <a class="reference internal" href="../c-api/typeobj.html#Py_TPFLAGS_HAVE_GC" title="Py_TPFLAGS_HAVE_GC"><code class="xref py py-const docutils literal notranslate"><span class="pre">Py_TPFLAGS_HAVE_GC</span></code></a> flag set but has no traverse function (<a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_traverse" title="PyTypeObject.tp_traverse"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_traverse</span></code></a>). (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=44263">bpo-44263</a>.)</p></li> 
          <li><p>Heap types with the <a class="reference internal" href="../c-api/typeobj.html#Py_TPFLAGS_IMMUTABLETYPE" title="Py_TPFLAGS_IMMUTABLETYPE"><code class="xref py py-const docutils literal notranslate"><span class="pre">Py_TPFLAGS_IMMUTABLETYPE</span></code></a> flag can now inherit the <span class="target" id="index-31"></span><a class="pep reference external" href="https://peps.python.org/pep-0590/"><strong>PEP 590</strong></a> vectorcall protocol. Previously, this was only possible for <a class="reference internal" href="../c-api/typeobj.html#static-types"><span class="std std-ref">static types</span></a>. (Contributed by Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43908">bpo-43908</a>)</p></li> 
          <li><p>Since <a class="reference internal" href="../c-api/structures.html#c.Py_TYPE" title="Py_TYPE"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_TYPE()</span></code></a> is changed to a inline static function, <code class="docutils literal notranslate"><span class="pre">Py_TYPE(obj)</span> <span class="pre">=</span> <span class="pre">new_type</span></code> must be replaced with <code class="docutils literal notranslate"><span class="pre">Py_SET_TYPE(obj,</span> <span class="pre">new_type)</span></code>: see the <a class="reference internal" href="../c-api/structures.html#c.Py_SET_TYPE" title="Py_SET_TYPE"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SET_TYPE()</span></code></a> function (available since Python 3.9). For backward compatibility, this macro can be used:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900A4 &amp;&amp; !defined(Py_SET_TYPE)</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">_Py_SET_TYPE</span><span class="p">(</span><span class="n">PyObject</span> <span class="o">*</span><span class="n">ob</span><span class="p">,</span> <span class="n">PyTypeObject</span> <span class="o">*</span><span class="nb">type</span><span class="p">)</span>
<span class="p">{</span> <span class="n">ob</span><span class="o">-&gt;</span><span class="n">ob_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">;</span> <span class="p">}</span>
<span class="c1">#define Py_SET_TYPE(ob, type) _Py_SET_TYPE((PyObject*)(ob), type)</span>
<span class="c1">#endif</span>
</pre>
            </div> 
           </div> <p>(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=39573">bpo-39573</a>.)</p> </li> 
          <li><p>Since <a class="reference internal" href="../c-api/structures.html#c.Py_SIZE" title="Py_SIZE"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SIZE()</span></code></a> is changed to a inline static function, <code class="docutils literal notranslate"><span class="pre">Py_SIZE(obj)</span> <span class="pre">=</span> <span class="pre">new_size</span></code> must be replaced with <code class="docutils literal notranslate"><span class="pre">Py_SET_SIZE(obj,</span> <span class="pre">new_size)</span></code>: see the <a class="reference internal" href="../c-api/structures.html#c.Py_SET_SIZE" title="Py_SET_SIZE"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SET_SIZE()</span></code></a> function (available since Python 3.9). For backward compatibility, this macro can be used:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900A4 &amp;&amp; !defined(Py_SET_SIZE)</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">_Py_SET_SIZE</span><span class="p">(</span><span class="n">PyVarObject</span> <span class="o">*</span><span class="n">ob</span><span class="p">,</span> <span class="n">Py_ssize_t</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span> <span class="n">ob</span><span class="o">-&gt;</span><span class="n">ob_size</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span> <span class="p">}</span>
<span class="c1">#define Py_SET_SIZE(ob, size) _Py_SET_SIZE((PyVarObject*)(ob), size)</span>
<span class="c1">#endif</span>
</pre>
            </div> 
           </div> <p>(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=39573">bpo-39573</a>.)</p> </li> 
          <li><p><code class="docutils literal notranslate"><span class="pre">&lt;Python.h&gt;</span></code> no longer includes the header files <code class="docutils literal notranslate"><span class="pre">&lt;stdlib.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;stdio.h&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;errno.h&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;string.h&gt;</span></code> when the <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> macro is set to <code class="docutils literal notranslate"><span class="pre">0x030b0000</span></code> (Python 3.11) or higher. C extensions should explicitly include the header files after <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;Python.h&gt;</span></code>. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45434">bpo-45434</a>.)</p></li> 
          <li><p>The non-limited API files <code class="docutils literal notranslate"><span class="pre">cellobject.h</span></code>, <code class="docutils literal notranslate"><span class="pre">classobject.h</span></code>, <code class="docutils literal notranslate"><span class="pre">code.h</span></code>, <code class="docutils literal notranslate"><span class="pre">context.h</span></code>, <code class="docutils literal notranslate"><span class="pre">funcobject.h</span></code>, <code class="docutils literal notranslate"><span class="pre">genobject.h</span></code> and <code class="docutils literal notranslate"><span class="pre">longintrepr.h</span></code> have been moved to the <code class="docutils literal notranslate"><span class="pre">Include/cpython</span></code> directory. Moreover, the <code class="docutils literal notranslate"><span class="pre">eval.h</span></code> header file was removed. These files must not be included directly, as they are already included in <code class="docutils literal notranslate"><span class="pre">Python.h</span></code>: <a class="reference internal" href="../c-api/intro.html#api-includes"><span class="std std-ref">Include Files</span></a>. If they have been included directly, consider including <code class="docutils literal notranslate"><span class="pre">Python.h</span></code> instead. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=35134">bpo-35134</a>.)</p></li> 
          <li><p>The <code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_CHECK_INTERNED()</span></code> macro has been excluded from the limited C API. It was never usable there, because it used internal structures which are not available in the limited C API. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46007">bpo-46007</a>.)</p></li> 
         </ul> 
         <ul id="pyframeobject-3-11-hiding"> 
          <li><p>The <a class="reference internal" href="../c-api/frame.html#c.PyFrameObject" title="PyFrameObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyFrameObject</span></code></a> structure members have been removed from the public C API.</p> <p>While the documentation notes that the <a class="reference internal" href="../c-api/frame.html#c.PyFrameObject" title="PyFrameObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyFrameObject</span></code></a> fields are subject to change at any time, they have been stable for a long time and were used in several popular extensions.</p> <p>In Python 3.11, the frame struct was reorganized to allow performance optimizations. Some fields were removed entirely, as they were details of the old implementation.</p> <p><a class="reference internal" href="../c-api/frame.html#c.PyFrameObject" title="PyFrameObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyFrameObject</span></code></a> fields:</p> 
           <ul class="simple"> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_back</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBack" title="PyFrame_GetBack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code></a>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_blockstack</span></code>: removed.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_builtins</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBuiltins" title="PyFrame_GetBuiltins"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBuiltins()</span></code></a>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_code</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetCode" title="PyFrame_GetCode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetCode()</span></code></a>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_gen</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGenerator" title="PyFrame_GetGenerator"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGenerator()</span></code></a>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_globals</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetGlobals" title="PyFrame_GetGlobals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetGlobals()</span></code></a>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_iblock</span></code>: removed.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_lasti</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLasti" title="PyFrame_GetLasti"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLasti()</span></code></a>. Code using <code class="docutils literal notranslate"><span class="pre">f_lasti</span></code> with <code class="docutils literal notranslate"><span class="pre">PyCode_Addr2Line()</span></code> should use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a> instead; it may be faster.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_lineno</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a></p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_locals</span></code>: use <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLocals()</span></code></a>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_stackdepth</span></code>: removed.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_state</span></code>: no public API (renamed to <code class="docutils literal notranslate"><span class="pre">f_frame.f_state</span></code>).</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_trace</span></code>: no public API.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_trace_lines</span></code>: use <code class="docutils literal notranslate"><span class="pre">PyObject_GetAttrString((PyObject*)frame,</span> <span class="pre">"f_trace_lines")</span></code>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_trace_opcodes</span></code>: use <code class="docutils literal notranslate"><span class="pre">PyObject_GetAttrString((PyObject*)frame,</span> <span class="pre">"f_trace_opcodes")</span></code>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_localsplus</span></code>: no public API (renamed to <code class="docutils literal notranslate"><span class="pre">f_frame.localsplus</span></code>).</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">f_valuestack</span></code>: removed.</p></li> 
           </ul> <p>The Python frame object is now created lazily. A side effect is that the <code class="docutils literal notranslate"><span class="pre">f_back</span></code> member must not be accessed directly, since its value is now also computed lazily. The <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBack" title="PyFrame_GetBack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code></a> function must be called instead.</p> <p>Debuggers that accessed the <code class="docutils literal notranslate"><span class="pre">f_locals</span></code> directly <em>must</em> call <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLocals()</span></code></a> instead. They no longer need to call <code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_FastToLocalsWithError()</span></code> or <code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_LocalsToFast()</span></code>, in fact they should not call those functions. The necessary updating of the frame is now managed by the virtual machine.</p> <p>Code defining <code class="docutils literal notranslate"><span class="pre">PyFrame_GetCode()</span></code> on Python 3.8 and older:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900B1</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">PyCodeObject</span><span class="o">*</span> <span class="n">PyFrame_GetCode</span><span class="p">(</span><span class="n">PyFrameObject</span> <span class="o">*</span><span class="n">frame</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Py_INCREF</span><span class="p">(</span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">f_code</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">f_code</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">#endif</span>
</pre>
            </div> 
           </div> <p>Code defining <code class="docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code> on Python 3.8 and older:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900B1</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">PyFrameObject</span><span class="o">*</span> <span class="n">PyFrame_GetBack</span><span class="p">(</span><span class="n">PyFrameObject</span> <span class="o">*</span><span class="n">frame</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Py_XINCREF</span><span class="p">(</span><span class="n">frame</span><span class="o">-&gt;</span><span class="n">f_back</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">frame</span><span class="o">-&gt;</span><span class="n">f_back</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">#endif</span>
</pre>
            </div> 
           </div> <p>Or use the <a class="reference external" href="https://github.com/python/pythoncapi_compat">pythoncapi_compat project</a> to get these two functions on older Python versions.</p> </li> 
          <li><p>Changes of the <a class="reference internal" href="../c-api/init.html#c.PyThreadState" title="PyThreadState"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyThreadState</span></code></a> structure members:</p> 
           <ul class="simple"> 
            <li><p><code class="docutils literal notranslate"><span class="pre">frame</span></code>: removed, use <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetFrame" title="PyThreadState_GetFrame"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetFrame()</span></code></a> (function added to Python 3.9 by <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40429">bpo-40429</a>). Warning: the function returns a <a class="reference internal" href="../glossary.html#term-strong-reference"><span class="xref std std-term">strong reference</span></a>, need to call <a class="reference internal" href="../c-api/refcounting.html#c.Py_XDECREF" title="Py_XDECREF"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_XDECREF()</span></code></a>.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">tracing</span></code>: changed, use <a class="reference internal" href="../c-api/init.html#c.PyThreadState_EnterTracing" title="PyThreadState_EnterTracing"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_EnterTracing()</span></code></a> and <a class="reference internal" href="../c-api/init.html#c.PyThreadState_LeaveTracing" title="PyThreadState_LeaveTracing"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_LeaveTracing()</span></code></a> (functions added to Python 3.11 by <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=43760">bpo-43760</a>).</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">recursion_depth</span></code>: removed, use <code class="docutils literal notranslate"><span class="pre">(tstate-&gt;recursion_limit</span> <span class="pre">-</span> <span class="pre">tstate-&gt;recursion_remaining)</span></code> instead.</p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">stackcheck_counter</span></code>: removed.</p></li> 
           </ul> <p>Code defining <code class="docutils literal notranslate"><span class="pre">PyThreadState_GetFrame()</span></code> on Python 3.8 and older:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900B1</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">PyFrameObject</span><span class="o">*</span> <span class="n">PyThreadState_GetFrame</span><span class="p">(</span><span class="n">PyThreadState</span> <span class="o">*</span><span class="n">tstate</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Py_XINCREF</span><span class="p">(</span><span class="n">tstate</span><span class="o">-&gt;</span><span class="n">frame</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">frame</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">#endif</span>
</pre>
            </div> 
           </div> <p>Code defining <code class="docutils literal notranslate"><span class="pre">PyThreadState_EnterTracing()</span></code> and <code class="docutils literal notranslate"><span class="pre">PyThreadState_LeaveTracing()</span></code> on Python 3.10 and older:</p> 
           <div class="highlight-python3 notranslate">
            <div class="highlight">
             <pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030B00A2</span>
<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">PyThreadState_EnterTracing</span><span class="p">(</span><span class="n">PyThreadState</span> <span class="o">*</span><span class="n">tstate</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">tracing</span><span class="o">++</span><span class="p">;</span>
<span class="c1">#if PY_VERSION_HEX &gt;= 0x030A00A1</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">cframe</span><span class="o">-&gt;</span><span class="n">use_tracing</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">#else</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">use_tracing</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">#endif</span>
<span class="p">}</span>

<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">PyThreadState_LeaveTracing</span><span class="p">(</span><span class="n">PyThreadState</span> <span class="o">*</span><span class="n">tstate</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nb">int</span> <span class="n">use_tracing</span> <span class="o">=</span> <span class="p">(</span><span class="n">tstate</span><span class="o">-&gt;</span><span class="n">c_tracefunc</span> <span class="o">!=</span> <span class="n">NULL</span> <span class="o">||</span> <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">c_profilefunc</span> <span class="o">!=</span> <span class="n">NULL</span><span class="p">);</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">tracing</span><span class="o">--</span><span class="p">;</span>
<span class="c1">#if PY_VERSION_HEX &gt;= 0x030A00A1</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">cframe</span><span class="o">-&gt;</span><span class="n">use_tracing</span> <span class="o">=</span> <span class="n">use_tracing</span><span class="p">;</span>
<span class="c1">#else</span>
    <span class="n">tstate</span><span class="o">-&gt;</span><span class="n">use_tracing</span> <span class="o">=</span> <span class="n">use_tracing</span><span class="p">;</span>
<span class="c1">#endif</span>
<span class="p">}</span>
<span class="c1">#endif</span>
</pre>
            </div> 
           </div> <p>Or use <a class="reference external" href="https://github.com/python/pythoncapi_compat">the pythoncapi_compat project</a> to get these functions on old Python functions.</p> </li> 
          <li><p>Distributors are encouraged to build Python with the optimized Blake2 library <a class="reference external" href="https://www.blake2.net/">libb2</a>.</p></li> 
         </ul> 
        </section> 
        <section id="id7"> 
         <h3>Deprecated<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3> 
         <ul> 
          <li><p>Deprecate the following functions to configure the Python initialization:</p> 
           <ul class="simple"> 
            <li><p><a class="reference internal" href="../c-api/sys.html#c.PySys_AddWarnOptionUnicode" title="PySys_AddWarnOptionUnicode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_AddWarnOptionUnicode()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/sys.html#c.PySys_AddWarnOption" title="PySys_AddWarnOption"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_AddWarnOption()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/sys.html#c.PySys_AddXOption" title="PySys_AddXOption"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_AddXOption()</span></code></a></p></li> 
            <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_HasWarnOptions()</span></code></p></li> 
            <li><p><a class="reference internal" href="../c-api/init.html#c.PySys_SetArgvEx" title="PySys_SetArgvEx"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgvEx()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/init.html#c.PySys_SetArgv" title="PySys_SetArgv"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgv()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/sys.html#c.PySys_SetPath" title="PySys_SetPath"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetPath()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/init.html#c.Py_SetPath" title="Py_SetPath"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetPath()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/init.html#c.Py_SetProgramName" title="Py_SetProgramName"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetProgramName()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/init.html#c.Py_SetPythonHome" title="Py_SetPythonHome"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetPythonHome()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/init.html#c.Py_SetStandardStreamEncoding" title="Py_SetStandardStreamEncoding"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetStandardStreamEncoding()</span></code></a></p></li> 
            <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">_Py_SetProgramFullPath()</span></code></p></li> 
           </ul> <p>Use the new <a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a> API of the <a class="reference internal" href="../c-api/init_config.html#init-config"><span class="std std-ref">Python Initialization Configuration</span></a> instead (<span class="target" id="index-32"></span><a class="pep reference external" href="https://peps.python.org/pep-0587/"><strong>PEP 587</strong></a>). (Contributed by Victor Stinner in <a class="reference external" href="https://github.com/python/cpython/issues/88279">gh-88279</a>.)</p> </li> 
          <li><p>Deprecate the <code class="docutils literal notranslate"><span class="pre">ob_shash</span></code> member of the <a class="reference internal" href="../c-api/bytes.html#c.PyBytesObject" title="PyBytesObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyBytesObject</span></code></a>. Use <a class="reference internal" href="../c-api/object.html#c.PyObject_Hash" title="PyObject_Hash"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Hash()</span></code></a> instead. (Contributed by Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=46864">bpo-46864</a>.)</p></li> 
         </ul> 
        </section> 
        <section id="id8"> 
         <h3>Removed<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3> 
         <ul> 
          <li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_BlockSetup()</span></code> and <code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_BlockPop()</span></code> have been removed. (Contributed by Mark Shannon in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40222">bpo-40222</a>.)</p></li> 
          <li><p>Remove the following math macros using the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable:</p> 
           <ul class="simple"> 
            <li><p><code class="docutils literal notranslate"><span class="pre">Py_ADJUST_ERANGE1()</span></code></p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">Py_ADJUST_ERANGE2()</span></code></p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">Py_OVERFLOWED()</span></code></p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">Py_SET_ERANGE_IF_OVERFLOW()</span></code></p></li> 
            <li><p><code class="docutils literal notranslate"><span class="pre">Py_SET_ERRNO_ON_MATH_ERROR()</span></code></p></li> 
           </ul> <p>(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45412">bpo-45412</a>.)</p> </li> 
          <li><p>Remove <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_COPY()</span></code> and <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_FILL()</span></code> macros, deprecated since Python 3.3. Use <code class="docutils literal notranslate"><span class="pre">PyUnicode_CopyCharacters()</span></code> or <code class="docutils literal notranslate"><span class="pre">memcpy()</span></code> (<code class="docutils literal notranslate"><span class="pre">wchar_t*</span></code> string), and <code class="docutils literal notranslate"><span class="pre">PyUnicode_Fill()</span></code> functions instead. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=41123">bpo-41123</a>.)</p></li> 
          <li><p>Remove the <code class="docutils literal notranslate"><span class="pre">pystrhex.h</span></code> header file. It only contains private functions. C extensions should only include the main <code class="docutils literal notranslate"><span class="pre">&lt;Python.h&gt;</span></code> header file. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45434">bpo-45434</a>.)</p></li> 
          <li><p>Remove the <code class="docutils literal notranslate"><span class="pre">Py_FORCE_DOUBLE()</span></code> macro. It was used by the <code class="docutils literal notranslate"><span class="pre">Py_IS_INFINITY()</span></code> macro. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45440">bpo-45440</a>.)</p></li> 
          <li><p>The following items are no longer available when <a class="reference internal" href="../c-api/stable.html#c.Py_LIMITED_API" title="Py_LIMITED_API"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code></a> is defined:</p> 
           <ul class="simple"> 
            <li><p><a class="reference internal" href="../c-api/marshal.html#c.PyMarshal_WriteLongToFile" title="PyMarshal_WriteLongToFile"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMarshal_WriteLongToFile()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/marshal.html#c.PyMarshal_WriteObjectToFile" title="PyMarshal_WriteObjectToFile"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMarshal_WriteObjectToFile()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/marshal.html#c.PyMarshal_ReadObjectFromString" title="PyMarshal_ReadObjectFromString"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMarshal_ReadObjectFromString()</span></code></a></p></li> 
            <li><p><a class="reference internal" href="../c-api/marshal.html#c.PyMarshal_WriteObjectToString" title="PyMarshal_WriteObjectToString"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMarshal_WriteObjectToString()</span></code></a></p></li> 
            <li><p>the <code class="docutils literal notranslate"><span class="pre">Py_MARSHAL_VERSION</span></code> macro</p></li> 
           </ul> <p>These are not part of the <a class="reference internal" href="../c-api/stable.html#stable-abi-list"><span class="std std-ref">limited API</span></a>.</p> <p>(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45474">bpo-45474</a>.)</p> </li> 
          <li><p>Exclude <a class="reference internal" href="../c-api/weakref.html#c.PyWeakref_GET_OBJECT" title="PyWeakref_GET_OBJECT"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyWeakref_GET_OBJECT()</span></code></a> from the limited C API. It never worked since the <code class="xref c c-type docutils literal notranslate"><span class="pre">PyWeakReference</span></code> structure is opaque in the limited C API. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=35134">bpo-35134</a>.)</p></li> 
          <li><p>Remove the <code class="docutils literal notranslate"><span class="pre">PyHeapType_GET_MEMBERS()</span></code> macro. It was exposed in the public C API by mistake, it must only be used by Python internally. Use the <code class="docutils literal notranslate"><span class="pre">PyTypeObject.tp_members</span></code> member instead. (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=40170">bpo-40170</a>.)</p></li> 
          <li><p>Remove the <code class="docutils literal notranslate"><span class="pre">HAVE_PY_SET_53BIT_PRECISION</span></code> macro (moved to the internal C API). (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?@action=redirect&amp;bpo=45412">bpo-45412</a>.)</p></li> 
         </ul> 
        </section> 
       </section> 
      </section> 
      <div class="clearer"></div> 
     </div> 
    </div> 
   </div> 
   <div class="sphinxsidebar" role="navigation" aria-label="main navigation"> 
    <div class="sphinxsidebarwrapper"> 
     <div> 
      <h3><a href="../contents.html">Table of Contents</a></h3> 
      <ul> 
       <li><a class="reference internal" href="#">What’s New In Python 3.11</a>
        <ul> 
         <li><a class="reference internal" href="#summary-release-highlights">Summary – Release highlights</a></li> 
         <li><a class="reference internal" href="#new-features">New Features</a>
          <ul> 
           <li><a class="reference internal" href="#enhanced-error-locations-in-tracebacks">Enhanced error locations in tracebacks</a>
            <ul> 
             <li><a class="reference internal" href="#column-information-for-code-objects">Column information for code objects</a></li> 
             <li><a class="reference internal" href="#exceptions-can-be-enriched-with-notes-pep-678">Exceptions can be enriched with notes (PEP 678)</a></li> 
            </ul> </li> 
          </ul> </li> 
         <li><a class="reference internal" href="#new-features-related-to-type-hints">New Features Related to Type Hints</a>
          <ul> 
           <li><a class="reference internal" href="#pep-646-variadic-generics">PEP 646: Variadic generics</a></li> 
           <li><a class="reference internal" href="#pep-655-marking-individual-typeddict-items-as-required-or-not-required">PEP 655: Marking individual <code class="docutils literal notranslate"><span class="pre">TypedDict</span></code> items as required or not-required</a></li> 
           <li><a class="reference internal" href="#pep-673-self-type">PEP 673: <code class="docutils literal notranslate"><span class="pre">Self</span></code> type</a></li> 
           <li><a class="reference internal" href="#pep-675-arbitrary-literal-string-type">PEP 675: Arbitrary literal string type</a></li> 
           <li><a class="reference internal" href="#pep-681-data-class-transforms">PEP 681: Data Class Transforms</a></li> 
          </ul> </li> 
         <li><a class="reference internal" href="#other-language-changes">Other Language Changes</a></li> 
         <li><a class="reference internal" href="#other-cpython-implementation-changes">Other CPython Implementation Changes</a></li> 
         <li><a class="reference internal" href="#new-modules">New Modules</a></li> 
         <li><a class="reference internal" href="#improved-modules">Improved Modules</a>
          <ul> 
           <li><a class="reference internal" href="#asyncio">asyncio</a></li> 
           <li><a class="reference internal" href="#datetime">datetime</a></li> 
           <li><a class="reference internal" href="#fractions">fractions</a></li> 
           <li><a class="reference internal" href="#functools">functools</a></li> 
           <li><a class="reference internal" href="#hashlib">hashlib</a></li> 
           <li><a class="reference internal" href="#idle-and-idlelib">IDLE and idlelib</a></li> 
           <li><a class="reference internal" href="#inspect">inspect</a></li> 
           <li><a class="reference internal" href="#locale">locale</a></li> 
           <li><a class="reference internal" href="#math">math</a></li> 
           <li><a class="reference internal" href="#operator">operator</a></li> 
           <li><a class="reference internal" href="#os">os</a></li> 
           <li><a class="reference internal" href="#pathlib">pathlib</a></li> 
           <li><a class="reference internal" href="#re">re</a></li> 
           <li><a class="reference internal" href="#shutil">shutil</a></li> 
           <li><a class="reference internal" href="#socket">socket</a></li> 
           <li><a class="reference internal" href="#sqlite3">sqlite3</a></li> 
           <li><a class="reference internal" href="#sys">sys</a></li> 
           <li><a class="reference internal" href="#sysconfig">sysconfig</a></li> 
           <li><a class="reference internal" href="#threading">threading</a></li> 
           <li><a class="reference internal" href="#time">time</a></li> 
           <li><a class="reference internal" href="#typing">typing</a></li> 
           <li><a class="reference internal" href="#tkinter">tkinter</a></li> 
           <li><a class="reference internal" href="#unicodedata">unicodedata</a></li> 
           <li><a class="reference internal" href="#unittest">unittest</a></li> 
           <li><a class="reference internal" href="#venv">venv</a></li> 
           <li><a class="reference internal" href="#warnings">warnings</a></li> 
           <li><a class="reference internal" href="#zipfile">zipfile</a></li> 
           <li><a class="reference internal" href="#fcntl">fcntl</a></li> 
          </ul> </li> 
         <li><a class="reference internal" href="#optimizations">Optimizations</a></li> 
         <li><a class="reference internal" href="#faster-cpython">Faster CPython</a>
          <ul> 
           <li><a class="reference internal" href="#faster-startup">Faster Startup</a>
            <ul> 
             <li><a class="reference internal" href="#frozen-imports-static-code-objects">Frozen imports / Static code objects</a></li> 
            </ul> </li> 
           <li><a class="reference internal" href="#faster-runtime">Faster Runtime</a>
            <ul> 
             <li><a class="reference internal" href="#cheaper-lazy-python-frames">Cheaper, lazy Python frames</a></li> 
             <li><a class="reference internal" href="#inlined-python-function-calls">Inlined Python function calls</a></li> 
             <li><a class="reference internal" href="#pep-659-specializing-adaptive-interpreter">PEP 659: Specializing Adaptive Interpreter</a></li> 
            </ul> </li> 
           <li><a class="reference internal" href="#misc">Misc</a></li> 
           <li><a class="reference internal" href="#faq">FAQ</a></li> 
           <li><a class="reference internal" href="#about">About</a></li> 
          </ul> </li> 
         <li><a class="reference internal" href="#cpython-bytecode-changes">CPython bytecode changes</a></li> 
         <li><a class="reference internal" href="#deprecated">Deprecated</a></li> 
         <li><a class="reference internal" href="#pending-removal-in-python-3-12">Pending Removal in Python 3.12</a></li> 
         <li><a class="reference internal" href="#removed">Removed</a></li> 
         <li><a class="reference internal" href="#porting-to-python-3-11">Porting to Python 3.11</a>
          <ul> 
           <li><a class="reference internal" href="#changes-in-the-python-api">Changes in the Python API</a></li> 
          </ul> </li> 
         <li><a class="reference internal" href="#build-changes">Build Changes</a></li> 
         <li><a class="reference internal" href="#c-api-changes">C API Changes</a>
          <ul> 
           <li><a class="reference internal" href="#id5">New Features</a></li> 
           <li><a class="reference internal" href="#id6">Porting to Python 3.11</a></li> 
           <li><a class="reference internal" href="#id7">Deprecated</a></li> 
           <li><a class="reference internal" href="#id8">Removed</a></li> 
          </ul> </li> 
        </ul> </li> 
      </ul> 
     </div> 
     <div> 
      <h4>Previous topic</h4> 
      <p class="topless"><a href="index.html" title="previous chapter">What’s New in Python</a></p> 
     </div> 
     <div> 
      <h4>Next topic</h4> 
      <p class="topless"><a href="3.10.html" title="next chapter">What’s New In Python 3.10</a></p> 
     </div> 
     <div role="note" aria-label="source link"> 
      <h3>This Page</h3> 
      <ul class="this-page-menu"> 
       <li><a href="../bugs.html">Report a Bug</a></li> 
       <li> <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.11.rst" rel="nofollow">Show Source </a> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="clearer"></div> 
  </div> 
  <div class="related" role="navigation" aria-label="related navigation"> 
   <h3>Navigation</h3> 
   <ul> 
    <li class="right" style="margin-right: 10px"> <a href="../genindex.html" title="General Index">index</a></li> 
    <li class="right"> <a href="../py-modindex.html" title="Python Module Index">modules</a> |</li> 
    <li class="right"> <a href="3.10.html" title="What’s New In Python 3.10">next</a> |</li> 
    <li class="right"> <a href="index.html" title="What’s New in Python">previous</a> |</li> 
    <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"></li> 
    <li><a href="https://www.python.org/">Python</a> »</li> 
    <li class="switchers"> 
     <div class="language_switcher_placeholder"></div> 
     <div class="version_switcher_placeholder"></div> </li> 
    <li> </li> 
    <li id="cpython-language-and-version"> <a href="../index.html">3.11.0b1 Documentation</a> » </li> 
    <li class="nav-item nav-item-1"><a href="index.html">What’s New in Python</a> »</li> 
    <li class="nav-item nav-item-this"><a href="">What’s New In Python 3.11</a></li> 
    <li class="right"> 
     <div class="inline-search" role="search"> 
      <form class="inline-search" action="../search.html" method="get"> 
       <input placeholder="Quick search" aria-label="Quick search" type="text" name="q"> 
       <input type="submit" value="Go"> 
       <input type="hidden" name="check_keywords" value="yes"> 
       <input type="hidden" name="area" value="default"> 
      </form> 
     </div> | </li> 
   </ul> 
  </div> 
  <div class="footer">
    © <a href="../copyright.html">Copyright</a> 2001-2022, Python Software Foundation. 
   <br> This page is licensed under the Python Software Foundation License Version 2. 
   <br> Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License. 
   <br> See <a href="/license.html">History and License</a> for more information.
   <br> 
   <br> The Python Software Foundation is a non-profit corporation. <a href="https://www.python.org/psf/donations/">Please donate.</a> 
   <br> 
   <br> Last updated on May 17, 2022. <a href="/bugs.html">Found a bug</a>? 
   <br> Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0. 
  </div> 
  <script type="text/javascript" src="../_static/switchers.js"></script> "  
 </body>
</html>