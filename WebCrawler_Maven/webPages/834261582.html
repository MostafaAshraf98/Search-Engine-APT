<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"> 
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <meta name="Description" content="Documentation on the Roundup issue tracker, version 2.1.0."> 
  <meta content="How to administer, backup, upgrade a Roundup installation. System and user security, configuring web compression, documentation on using roundup-server and running roundup-admin." language="en" name="description"> 
  <title>Administration Guide - Roundup 2.1.0 documentation</title> 
  <link rel="stylesheet" href="../_static/style.css" type="text/css"> 
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css"> 
  <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '2.1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script> 
  <script type="text/javascript" src="../_static/jquery.js"></script> 
  <script type="text/javascript" src="../_static/underscore.js"></script> 
  <script type="text/javascript" src="../_static/doctools.js"></script> 
  <script type="text/javascript" src="../_static/language_data.js"></script> 
  <link rel="canonical" href="https://www.roundup-tracker.org/docs/admin_guide.html"> 
  <link rel="index" title="Index" href="../genindex.html"> 
  <link rel="search" title="Search" href="../search.html"> 
  <link rel="top" title="Roundup 2.1.0 documentation" href="../index.html"> 
  <link rel="up" title="Docs" href="../docs.html"> 
  <link rel="next" title="Debugging Aids" href="debugging.html"> 
  <link rel="prev" title="Customising Roundup" href="customizing.html"> 
 </head> 
 <body> 
  <div class="header">
   <h1>Roundup</h1> 
   <div id="searchbox" style="display: none"> 
    <form class="search" action="../search.html" method="get"> 
     <input type="text" aria-label="Enter search terms" name="q" size="18"> 
     <input type="submit" value="Search"> 
     <input type="hidden" name="check_keywords" value="yes"> 
     <input type="hidden" name="area" value="default"> 
    </form> 
   </div> 
   <script type="text/javascript">$('#searchbox').show(0);</script> 
  </div> 
  <div class="navigation"> 
   <div class="menu"> 
    <ul class="current"> 
     <li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li> 
     <li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/roundup/">Download</a></li> 
     <li class="toctree-l1 current"><a class="reference internal" href="../docs.html">Docs</a>
      <ul class="current"> 
       <li class="toctree-l2"><a class="reference internal" href="features.html">Roundup Features</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="installation.html">Installing Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="upgrading.html">Upgrading to newer versions of Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="FAQ.html">Roundup FAQ</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="user_guide.html">User Guide</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="customizing.html">Customising Roundup</a></li> 
       <li class="toctree-l2 current"><a class="current reference internal" href="#">Administration Guide</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging Aids</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="xmlrpc.html">XML-RPC access to Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="rest.html">REST API for Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="tracker_templates.html">Roundup Tracker Templates</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="glossary.html">Roundup Glossary</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="license.html">License</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="overview.html">Design Overview</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="design.html">Design (original)</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="developers.html">Developing Roundup</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="mysql.html">Notes about the MySQL Database backend</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="postgresql.html">Notes about the PostgreSQL Database backend</a></li> 
       <li class="toctree-l2"><a class="reference internal" href="implementation.html">Richard Jones implementation notes</a></li> 
      </ul> </li> 
     <li class="toctree-l1"><a class="reference external" href="https://issues.roundup-tracker.org">Issues</a></li> 
     <li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact</a></li> 
     <li class="toctree-l1"><a class="reference external" href="https://wiki.roundup-tracker.org">Wiki</a></li> 
     <li class="toctree-l1"><a class="reference internal" href="../code.html">Code</a></li> 
    </ul> 
   </div> 
  </div> 
  <div class="content"> 
   <div id="subnav"> <a title="Customising Roundup" href="customizing.html"> Prev</a> <a title="Debugging Aids" href="debugging.html"> Next</a> <a title="Index" href="../genindex.html"> Index</a> 
   </div> 
   <div class="section" id="administration-guide"> 
    <h1>Administration Guide</h1> 
    <div class="contents local topic" id="contents"> 
     <ul class="simple"> 
      <li><a class="reference internal" href="#what-does-roundup-install" id="id1">What does Roundup install?</a></li> 
      <li><a class="reference internal" href="#configuring-roundup-s-logging-of-messages-for-sysadmins" id="id2">Configuring Roundup’s Logging of Messages For Sysadmins</a></li> 
      <li><a class="reference internal" href="#configuring-roundup-server" id="id3">Configuring roundup-server</a></li> 
      <li><a class="reference internal" href="#users-and-security" id="id4">Users and Security</a>
       <ul> 
        <li><a class="reference internal" href="#configuring-authentication-header-variable" id="id5">Configuring Authentication Header/Variable</a></li> 
       </ul> </li> 
      <li><a class="reference internal" href="#tasks" id="id6">Tasks</a>
       <ul> 
        <li><a class="reference internal" href="#tracker-backup" id="id7">Tracker Backup</a></li> 
        <li><a class="reference internal" href="#software-upgrade" id="id8">Software Upgrade</a></li> 
        <li><a class="reference internal" href="#migrating-backends" id="id9">Migrating Backends</a></li> 
        <li><a class="reference internal" href="#moving-a-tracker" id="id10">Moving a Tracker</a></li> 
        <li><a class="reference internal" href="#migrating-from-other-software" id="id11">Migrating From Other Software</a></li> 
        <li><a class="reference internal" href="#adding-a-user-from-the-command-line" id="id12">Adding A User From The Command-Line</a></li> 
       </ul> </li> 
      <li><a class="reference internal" href="#running-the-servers" id="id13">Running the Servers</a>
       <ul> 
        <li><a class="reference internal" href="#unix" id="id14">Unix</a></li> 
        <li><a class="reference internal" href="#windows" id="id15">Windows</a>
         <ul> 
          <li><a class="reference internal" href="#running-the-mail-gateway-script" id="id16">Running the Mail Gateway Script</a></li> 
         </ul> </li> 
       </ul> </li> 
      <li><a class="reference internal" href="#using-roundup-admin" id="id17">Using roundup-admin</a></li> 
     </ul> 
    </div> 
    <div class="section" id="what-does-roundup-install"> 
     <h2><a class="toc-backref" href="#id1">What does Roundup install?</a></h2> 
     <p>There’s two “installations” that we talk about when using Roundup:</p> 
     <ol class="arabic"> 
      <li><p class="first">The installation of the software and its support files. This uses the standard Python mechanism called “distutils” and thus Roundup’s core code, executable scripts and support data files are installed in Python’s directories. On Windows, this is typically:</p> 
       <dl class="docutils"> 
        <dt>
         Scripts
        </dt> 
        <dd>
         <p class="first last"><code class="docutils literal notranslate"><span class="pre">&lt;python</span> <span class="pre">dir&gt;\scripts\...</span></code></p> 
        </dd> 
        <dt>
         Core code
        </dt> 
        <dd>
         <p class="first last"><code class="docutils literal notranslate"><span class="pre">&lt;python</span> <span class="pre">dir&gt;\lib\site-packages\roundup\...</span></code></p> 
        </dd> 
        <dt>
         Support files
        </dt> 
        <dd>
         <p class="first last"><code class="docutils literal notranslate"><span class="pre">&lt;python</span> <span class="pre">dir&gt;\share\roundup\...</span></code></p> 
        </dd> 
       </dl> <p>and on Unix-like systems (eg. Linux):</p> 
       <dl class="docutils"> 
        <dt>
         Scripts
        </dt> 
        <dd>
         <p class="first last"><code class="docutils literal notranslate"><span class="pre">&lt;python</span> <span class="pre">root&gt;/bin/...</span></code></p> 
        </dd> 
        <dt>
         Core code
        </dt> 
        <dd>
         <p class="first last"><code class="docutils literal notranslate"><span class="pre">&lt;python</span> <span class="pre">root&gt;/lib-&lt;python</span> <span class="pre">version&gt;/site-packages/roundup/...</span></code></p> 
        </dd> 
        <dt>
         Support files
        </dt> 
        <dd>
         <p class="first last"><code class="docutils literal notranslate"><span class="pre">&lt;python</span> <span class="pre">root&gt;/share/roundup/...</span></code></p> 
        </dd> 
       </dl> </li> 
      <li><p class="first">The installation of a specific tracker. When invoking the roundup-admin “inst” (and “init”) commands, you’re creating a new Roundup tracker. This installs configuration files, HTML templates, detector code and a new database. You have complete control over where this stuff goes through both choosing your “tracker home” and the <code class="docutils literal notranslate"><span class="pre">main</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">database</span></code> variable in the tracker’s config.ini.</p> </li> 
     </ol> 
    </div> 
    <div class="section" id="configuring-roundup-s-logging-of-messages-for-sysadmins"> 
     <h2><a class="toc-backref" href="#id2">Configuring Roundup’s Logging of Messages For Sysadmins</a></h2> 
     <p>You may configure where Roundup logs messages in your tracker’s config.ini file. Roundup will use the standard Python (2.3+) logging implementation.</p> 
     <dl class="docutils"> 
      <dt>
       Configuration for standard “logging” module:
      </dt> 
      <dd>
       <ul class="first last simple"> 
        <li>tracker configuration file specifies the location of a logging configration file as <code class="docutils literal notranslate"><span class="pre">logging</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">config</span></code></li> 
        <li><code class="docutils literal notranslate"><span class="pre">roundup-server</span></code> specifies the location of a logging configuration file on the command line</li> 
       </ul> 
      </dd> 
      <dt>
       Configuration for “BasicLogging” implementation:
      </dt> 
      <dd>
       <ul class="first last simple"> 
        <li>tracker configuration file specifies the location of a log file <code class="docutils literal notranslate"><span class="pre">logging</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">filename</span></code></li> 
        <li>tracker configuration file specifies the level to log to as <code class="docutils literal notranslate"><span class="pre">logging</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">level</span></code></li> 
        <li><code class="docutils literal notranslate"><span class="pre">roundup-server</span></code> specifies the location of a log file on the command line</li> 
        <li><code class="docutils literal notranslate"><span class="pre">roundup-server</span></code> specifies the level to log to on the command line</li> 
       </ul> 
      </dd> 
     </dl> 
     <p>(<code class="docutils literal notranslate"><span class="pre">roundup-mailgw</span></code> always logs to the tracker’s log file)</p> 
     <p>In both cases, if no logfile is specified then logging will simply be sent to sys.stderr with only logging of ERROR messages.</p> 
    </div> 
    <div class="section" id="configuring-roundup-server"> 
     <h2><a class="toc-backref" href="#id3">Configuring roundup-server</a></h2> 
     <p>The basic configuration file is as follows (taken from the <code class="docutils literal notranslate"><span class="pre">roundup-server.ini.example</span></code> file in the “doc” directory):</p> 
     <div class="highlight-default notranslate">
      <div class="highlight">
       <pre><span></span><span class="p">[</span><span class="n">main</span><span class="p">]</span>

<span class="c1"># Host name of the Roundup web server instance.</span>
<span class="c1"># If left unconfigured (no 'host' setting) the default</span>
<span class="c1"># will be used.</span>
<span class="c1"># If empty, listen on all network interfaces.</span>
<span class="c1"># If you want to explicitly listen on all</span>
<span class="c1"># network interfaces, the address 0.0.0.0 is a more</span>
<span class="c1"># explicit way to achieve this, the use of an empty</span>
<span class="c1"># string for this purpose is deprecated and will go away</span>
<span class="c1"># in a future release.</span>
<span class="c1"># Default: localhost</span>
<span class="n">host</span> <span class="o">=</span> <span class="n">localhost</span>

<span class="c1"># Port to listen on.</span>
<span class="c1"># Default: 8080</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">8017</span>

<span class="c1"># Path to favicon.ico image file.  If unset, built-in favicon.ico is used.</span>
<span class="c1"># The path may be either absolute or relative</span>
<span class="c1"># to the directory containing this config file.</span>
<span class="c1"># Default: favicon.ico</span>
<span class="n">favicon</span> <span class="o">=</span> <span class="n">favicon</span><span class="o">.</span><span class="n">ico</span>

<span class="c1"># User ID as which the server will answer requests.</span>
<span class="c1"># In order to use this option, the server must be run initially as root.</span>
<span class="c1"># Availability: Unix.</span>
<span class="c1"># Default:</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">roundup</span>

<span class="c1"># Group ID as which the server will answer requests.</span>
<span class="c1"># In order to use this option, the server must be run initially as root.</span>
<span class="c1"># Availability: Unix.</span>
<span class="c1"># Default:</span>
<span class="n">group</span> <span class="o">=</span>

<span class="c1"># don't fork (this overrides the pidfile mechanism)'</span>
<span class="c1"># Allowed values: yes, no</span>
<span class="c1"># Default: no</span>
<span class="n">nodaemon</span> <span class="o">=</span> <span class="n">no</span>

<span class="c1"># Log client machine names instead of IP addresses (much slower)</span>
<span class="c1"># Allowed values: yes, no</span>
<span class="c1"># Default: no</span>
<span class="n">log_hostnames</span> <span class="o">=</span> <span class="n">no</span>

<span class="c1"># File to which the server records the process id of the daemon.</span>
<span class="c1"># If this option is not set, the server will run in foreground</span>
<span class="c1">#</span>
<span class="c1"># The path may be either absolute or relative</span>
<span class="c1"># to the directory containing this config file.</span>
<span class="c1"># Default:</span>
<span class="n">pidfile</span> <span class="o">=</span>

<span class="c1"># Log file path.  If unset, log to stderr.</span>
<span class="c1"># The path may be either absolute or relative</span>
<span class="c1"># to the directory containing this config file.</span>
<span class="c1"># Default:</span>
<span class="n">logfile</span> <span class="o">=</span>

<span class="c1"># Set processing of each request in separate subprocess.</span>
<span class="c1"># Allowed values: debug, none, thread, fork.</span>
<span class="c1"># Default: fork</span>
<span class="n">multiprocess</span> <span class="o">=</span> <span class="n">fork</span>

<span class="c1"># Tracker index template. If unset, built-in will be used.</span>
<span class="c1"># The path may be either absolute or relative</span>
<span class="c1"># to the directory containing this config file.</span>
<span class="c1"># Default:</span>
<span class="n">template</span> <span class="o">=</span>

<span class="c1"># Enable SSL support (requires pyopenssl)</span>
<span class="c1"># Allowed values: yes, no</span>
<span class="c1"># Default: no</span>
<span class="n">ssl</span> <span class="o">=</span> <span class="n">no</span>

<span class="c1"># PEM file used for SSL. A temporary self-signed certificate</span>
<span class="c1"># will be used if left blank.</span>
<span class="c1"># The path may be either absolute or relative</span>
<span class="c1"># to the directory containing this config file.</span>
<span class="c1"># Default:</span>
<span class="n">pem</span> <span class="o">=</span>

<span class="c1"># Roundup trackers to serve.</span>
<span class="c1"># Each option in this section defines single Roundup tracker.</span>
<span class="c1"># Option name identifies the tracker and will appear in the URL.</span>
<span class="c1"># Option value is tracker home directory path.</span>
<span class="c1"># The path may be either absolute or relative</span>
<span class="c1"># to the directory containing this config file.</span>
<span class="p">[</span><span class="n">trackers</span><span class="p">]</span>

<span class="n">demo</span> <span class="o">=</span> <span class="o">/</span><span class="n">trackers</span><span class="o">/</span><span class="n">demo</span>
<span class="n">sysadmin</span> <span class="o">=</span> <span class="o">/</span><span class="n">trackers</span><span class="o">/</span><span class="n">sysadmin</span>
</pre>
      </div> 
     </div> 
     <p>Additional notes for each keyword:</p> 
     <dl class="docutils"> 
      <dt>
       <strong>template</strong>
      </dt> 
      <dd>
       Specifies a template used for displaying the tracker index when multiple trackers are being used. It is processed by TAL and the variable “trackers” is available to the template and is a dict of all configured trackers.
      </dd> 
      <dt>
       <strong>ssl</strong>
      </dt> 
      <dd>
       Enables the use of SSL to secure the connection to the roundup-server. If you enable this, ensure that your tracker’s config.ini specifies an <em>https</em> URL.
      </dd> 
      <dt>
       <strong>pem</strong>
      </dt> 
      <dd>
       If specified, the SSL PEM file containing the private key and certificate. If not specified, roundup will generate a temporary, self-signed certificate for use.
      </dd> 
      <dt>
       <strong>trackers</strong> section
      </dt> 
      <dd>
       Each line denotes a mapping from a URL component to a tracker home. Make sure the name part doesn’t include any url-unsafe characters like spaces. Stick to alphanumeric characters and you’ll be ok.
      </dd> 
     </dl> 
     <p>To generate a config.ini in the current directory (note it will overwrite an existing file) from the roundup-server command line use:</p> 
     <div class="highlight-default notranslate">
      <div class="highlight">
       <pre><span></span><span class="n">roundup_server</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8017</span>  <span class="o">-</span><span class="n">u</span> <span class="n">roundup</span> <span class="o">--</span><span class="n">save</span><span class="o">-</span><span class="n">config</span>  <span class="n">demo</span><span class="o">=/</span><span class="n">trackers</span><span class="o">/</span><span class="n">demo</span> \
   <span class="n">sysadmin</span><span class="o">=/</span><span class="n">trackers</span><span class="o">/</span><span class="n">sysadmin</span>
</pre>
      </div> 
     </div> 
    </div> 
    <div class="section" id="users-and-security"> 
     <h2><a class="toc-backref" href="#id4">Users and Security</a></h2> 
     <p>Roundup holds its own user database which primarily contains a username, password and email address for the user. Roundup <em>must</em> have its own user listing, in order to maintain internal consistency of its data. It is a relatively simple exercise to update this listing on a regular basis, or on demand, so that it matches an external listing (eg. <a class="reference internal" href="customizing.html#external-authentication"><span class="std std-ref">unix passwd file</span></a>, <a class="reference external" href="https://wiki.roundup-tracker.org/LDAPLogin">LDAP</a>, etc.)</p> 
     <p>Roundup identifies users in a number of ways:</p> 
     <ol class="arabic simple"> 
      <li>Through the web, users may be identified by either HTTP Basic Authentication or cookie authentication. If you are running the web server (roundup-server) through another HTTP server (eg. apache or IIS) then that server may require HTTP Basic Authentication, and it will pass the <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> variable (or variable defined using http_auth_header) through to Roundup. If this variable is not present, then Roundup defaults to using its own cookie-based login mechanism.</li> 
      <li>In email messages handled by roundup-mailgw, users are identified by the From address in the message.</li> 
     </ol> 
     <p>In both cases, Roundup’s behaviour when dealing with unknown users is controlled by Permissions defined in the “SECURITY SETTINGS” section of the tracker’s <code class="docutils literal notranslate"><span class="pre">schema.py</span></code> module:</p> 
     <dl class="docutils"> 
      <dt>
       Web Registration
      </dt> 
      <dd>
       If granted to the Anonymous Role, then anonymous users will be able to register through the web.
      </dd> 
      <dt>
       Email Registration
      </dt> 
      <dd>
       If granted to the Anonymous Role, then email messages from unknown users will result in those users being registered with the tracker.
      </dd> 
     </dl> 
     <p>More information about how to customise your tracker’s security settings may be found in the <a class="reference external" href="customizing.html">customisation documentation</a>.</p> 
     <div class="section" id="configuring-authentication-header-variable"> 
      <h3><a class="toc-backref" href="#id5">Configuring Authentication Header/Variable</a></h3> 
      <p>The front end server running roundup can perform the user authentication. It pass the authenticated username to the backend in a variable. By default roundup looks for the <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> variable This can be changed by setting the parameter <code class="docutils literal notranslate"><span class="pre">http_auth_header</span></code> in the <code class="docutils literal notranslate"><span class="pre">[web]</span></code> section of the tracker’s <code class="docutils literal notranslate"><span class="pre">config.ini</span></code> file. If the value is unset (the default) the REMOTE_USER variable is used.</p> 
      <p>If you are running roundup using <code class="docutils literal notranslate"><span class="pre">roundup-server</span></code> behind a proxy that authenticates the user you need to configure <code class="docutils literal notranslate"><span class="pre">roundup-server</span></code> to pass the proper header to the tracker. By default <code class="docutils literal notranslate"><span class="pre">roundup-server</span></code> looks for the <code class="docutils literal notranslate"><span class="pre">REMOTE_USER</span></code> header for the authenticated user. You can copy an arbitrary header variable to the tracker using the <code class="docutils literal notranslate"><span class="pre">-I</span></code> option to roundup-server (or the equivalent option in the roundup-server config file).</p> 
      <p>For example to use the <code class="docutils literal notranslate"><span class="pre">uid_variable</span></code> header, two configuration changes are needed: First configure <code class="docutils literal notranslate"><span class="pre">roundup-server</span></code> to pass the header to the tracker using:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="n">roundup</span><span class="o">-</span><span class="n">server</span> <span class="o">-</span><span class="n">I</span> <span class="n">uid_variable</span> <span class="o">....</span>
</pre>
       </div> 
      </div> 
      <p>note that the header is passed exactly as supplied by the upstream server. It is <strong>not</strong> prefixed with <code class="docutils literal notranslate"><span class="pre">HTTP_</span></code> like other headers since you are explicitly whitelisting the header. Multiple comma separated headers can be passed to the <code class="docutils literal notranslate"><span class="pre">-I</span></code> option. These could be used in a detector or other tracker extensions, but only one header can be used by the tracker as an authentication header.</p> 
      <p>To make the tracker honor the new variable changing the tracker <code class="docutils literal notranslate"><span class="pre">config.ini</span></code> to read:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="p">[</span><span class="n">web</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">http_auth_header</span> <span class="o">=</span> <span class="n">uid_variable</span>
</pre>
       </div> 
      </div> 
      <p>At the time this is written, support is experimental. If you use it you should notify the roundup maintainers using the roundup-users mailing list.</p> 
     </div> 
    </div> 
    <div class="section" id="tasks"> 
     <h2><a class="toc-backref" href="#id6">Tasks</a></h2> 
     <p>Maintenance of Roundup can involve one of the following:</p> 
     <ol class="arabic simple"> 
      <li><a class="reference internal" href="#tracker-backup">tracker backup</a></li> 
      <li><a class="reference internal" href="#software-upgrade">software upgrade</a></li> 
      <li><a class="reference internal" href="#migrating-backends">migrating backends</a></li> 
      <li><a class="reference internal" href="#moving-a-tracker">moving a tracker</a></li> 
      <li><a class="reference internal" href="#migrating-from-other-software">migrating from other software</a></li> 
      <li><a class="reference internal" href="#adding-a-user-from-the-command-line">adding a user from the command-line</a></li> 
     </ol> 
     <div class="section" id="tracker-backup"> 
      <h3><a class="toc-backref" href="#id7">Tracker Backup</a></h3> 
      <p>The roundup-admin import and export commands are <strong>not</strong> recommended for performing backup.</p> 
      <p>Optionally stop the web and email frontends and to copy the contents of the tracker home directory to some other place using standard backup tools. This means using <em>pg_dump</em> to take a snapshot of your Postgres backend database, for example. A simple copy of the tracker home (and files storage area if you’ve configured it to be elsewhere) will then complete the backup.</p> 
     </div> 
     <div class="section" id="software-upgrade"> 
      <h3><a class="toc-backref" href="#id8">Software Upgrade</a></h3> 
      <p>Always make a backup of your tracker before upgrading software. Steps you may take:</p> 
      <ol class="arabic"> 
       <li><p class="first">Install pytest and ensure that the unit tests run on your system (using your preferred python version):</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="n">pip2</span> <span class="n">install</span> <span class="n">pytest</span>
<span class="n">python2</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span> <span class="n">test</span><span class="o">/</span>


<span class="n">pip3</span> <span class="n">install</span> <span class="n">pytest</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span> <span class="n">test</span><span class="o">/</span>
</pre>
         </div> 
        </div> </li> 
       <li><p class="first">If you’re using an RDBMS backend, make a backup of its contents now.</p> </li> 
       <li><p class="first">Make a backup of the tracker home itself.</p> </li> 
       <li><p class="first">Stop the tracker web and email frontends.</p> </li> 
       <li><p class="first">Install the new version of the software:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre>
         </div> 
        </div> </li> 
       <li><p class="first">Follow the steps in the <a class="reference external" href="upgrading.html">upgrading documentation</a> for the new version of the software in the copied.</p> <p>Usually you will be asked to run <cite>roundup_admin migrate</cite> on your tracker before you allow users to start accessing the tracker.</p> <p>It’s safe to run this even if it’s not required, so just get into the habit.</p> </li> 
       <li><p class="first">Restart your tracker web and email frontends.</p> </li> 
      </ol> 
      <p>If something bad happens, you may reinstate your backup of the tracker and reinstall the older version of the sofware using the same install command:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre>
       </div> 
      </div> 
     </div> 
     <div class="section" id="migrating-backends"> <span id="index-0"></span>
      <h3><a class="toc-backref" href="#id9">Migrating Backends</a></h3> 
      <ol class="arabic"> 
       <li><p class="first">Stop the existing tracker web and email frontends (preventing changes).</p> </li> 
       <li><p class="first">Use the roundup-admin tool “export” command to export the contents of your tracker to disk. (If you are running on windows see <a class="reference external" href="https://issues.roundup-tracker.org/issue1441336">issue1441336</a> on how to use the command line rather than interactive mode to export data.)</p> </li> 
       <li><p class="first">Copy the tracker home to a new directory.</p> </li> 
       <li><p class="first">Delete the “db” directory from the new directory.</p> </li> 
       <li><p class="first">Set the value of the <code class="docutils literal notranslate"><span class="pre">backend</span></code> key under the <code class="docutils literal notranslate"><span class="pre">[database]</span></code> section of the tracker’s <code class="docutils literal notranslate"><span class="pre">config.ini</span></code> file.</p> </li> 
       <li><p class="first">Use the roundup-admin “import” command to import the previous export with the new tracker home. If non-interactively:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">tracker</span> <span class="n">home</span><span class="o">&gt;</span> <span class="kn">import</span> <span class="o">&lt;</span><span class="n">tracker</span> <span class="n">export</span> <span class="nb">dir</span><span class="o">&gt;</span>
</pre>
         </div> 
        </div> <p>If interactively, enter ‘commit’ before exiting.</p> </li> 
       <li><p class="first">Test each of the admin tool, web interface and mail gateway using the new backend.</p> </li> 
       <li><p class="first">Move the old tracker home out of the way (rename to “tracker.old”) and move the new tracker home into its place.</p> </li> 
       <li><p class="first">Restart web and email frontends.</p> </li> 
      </ol> 
     </div> 
     <div class="section" id="moving-a-tracker"> 
      <h3><a class="toc-backref" href="#id10">Moving a Tracker</a></h3> 
      <p>If you’re moving the tracker to a similar machine, you should:</p> 
      <ol class="arabic simple"> 
       <li>install Roundup on the new machine and test that it works there,</li> 
       <li>stop the existing tracker web and email frontends (preventing changes),</li> 
       <li>copy the tracker home directory over to the new machine, and</li> 
       <li>start the tracker web and email frontends on the new machine.</li> 
      </ol> 
      <p>Most of the backends are actually portable across platforms (ie. from Unix to Windows to Mac). If this isn’t the case (ie. the tracker doesn’t work when moved using the above steps) then you’ll need to:</p> 
      <ol class="arabic simple"> 
       <li>install Roundup on the new machine and test that it works there,</li> 
       <li>stop the existing tracker web and email frontends (preventing changes),</li> 
       <li>use the roundup-admin tool “export” command to export the contents of the existing tracker,</li> 
       <li>copy the export to the new machine,</li> 
       <li>use the roundup-admin “import” command to import the tracker on the new machine, and</li> 
       <li>start the tracker web and email frontends on the new machine.</li> 
      </ol> 
     </div> 
     <div class="section" id="migrating-from-other-software"> <span id="index-1"></span>
      <h3><a class="toc-backref" href="#id11">Migrating From Other Software</a></h3> 
      <p>You have a couple of choices. You can either use a CSV import into Roundup, or you can write a simple Python script which uses the Roundup API directly. The latter is almost always simpler – see the “scripts” directory in the Roundup source for some example uses of the API.</p> 
      <p>“roundup-admin import” will import data into your tracker from a directory containing files with the following format:</p> 
      <ul> 
       <li><p class="first">one colon-separated-values file per Class with columns for each property, named &lt;classname&gt;.csv</p> </li> 
       <li><p class="first">one colon-separated-values file per Class with journal information, named &lt;classname&gt;-journals.csv (this is required, even if it’s empty)</p> </li> 
       <li><p class="first">if the Class is a FileClass, you may have the “content” property stored in separate files from the csv files. This goes in a directory structure:</p> 
        <div class="highlight-default notranslate">
         <div class="highlight">
          <pre><span></span><span class="o">&lt;</span><span class="n">classname</span><span class="o">&gt;-</span><span class="n">files</span><span class="o">/&lt;</span><span class="n">N</span><span class="o">&gt;/&lt;</span><span class="n">designator</span><span class="o">&gt;</span>
</pre>
         </div> 
        </div> <p>where <code class="docutils literal notranslate"><span class="pre">&lt;designator&gt;</span></code> is the item’s <code class="docutils literal notranslate"><span class="pre">&lt;classname&gt;&lt;id&gt;</span></code> combination. The <code class="docutils literal notranslate"><span class="pre">&lt;N&gt;</span></code> value is <code class="docutils literal notranslate"><span class="pre">int(&lt;id&gt;</span> <span class="pre">/</span> <span class="pre">1000)</span></code>.</p> </li> 
      </ul> 
     </div> 
     <div class="section" id="adding-a-user-from-the-command-line"> <span id="index-2"></span>
      <h3><a class="toc-backref" href="#id12">Adding A User From The Command-Line</a></h3> 
      <p>The <code class="docutils literal notranslate"><span class="pre">roundup-admin</span></code> program can create any data you wish to in the database. To create a new user, use:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="n">create</span> <span class="n">user</span>
</pre>
       </div> 
      </div> 
      <p>To figure out what good values might be for some of the fields (eg. Roles) you can just display another user:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="nb">list</span> <span class="n">user</span>
</pre>
       </div> 
      </div> 
      <p>(or if you know their username, and it happens to be “richard”):</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="nb">filter</span> <span class="n">user</span> <span class="n">username</span><span class="o">=</span><span class="n">richard</span>
</pre>
       </div> 
      </div> 
      <p>then using the user id (e.g. 5) you get from one of the above commands, you may display the user’s details:</p> 
      <div class="highlight-default notranslate">
       <div class="highlight">
        <pre><span></span><span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="n">display</span> <span class="o">&lt;</span><span class="n">designator</span><span class="o">&gt;</span>
</pre>
       </div> 
      </div> 
      <p>where designator is <code class="docutils literal notranslate"><span class="pre">user5</span></code>.</p> 
     </div> 
    </div> 
    <div class="section" id="running-the-servers"> 
     <h2><a class="toc-backref" href="#id13">Running the Servers</a></h2> 
     <div class="section" id="unix"> 
      <h3><a class="toc-backref" href="#id14">Unix</a></h3> 
      <p>On Unix systems, use the scripts/server-ctl script to control the roundup-server server. Copy it somewhere and edit the variables at the top to reflect your specific installation.</p> 
      <p>If you use systemd look at scripts/systemd.gunicorn. It is configured for a wsgi deployment using gunicorn, but may be a good starting point for your setup.</p> 
     </div> 
     <div class="section" id="windows"> 
      <h3><a class="toc-backref" href="#id15">Windows</a></h3> 
      <p>On Windows, the roundup-server program runs as a Windows Service, and therefore may be controlled through the Services control panel. Note that you <strong>must</strong> install the pywin32 package to allow roundup to run as a service. The roundup-server program may also control the service directly:</p> 
      <dl class="docutils"> 
       <dt>
        <strong>install the service</strong>
       </dt> 
       <dd>
        <code class="docutils literal notranslate"><span class="pre">roundup-server</span> <span class="pre">-C</span> <span class="pre">/path/to/my/roundup-server.ini</span> <span class="pre">-c</span> <span class="pre">install</span></code>
       </dd> 
       <dt>
        <strong>start the service</strong>
       </dt> 
       <dd>
        <code class="docutils literal notranslate"><span class="pre">roundup-server</span> <span class="pre">-c</span> <span class="pre">start</span></code>
       </dd> 
       <dt>
        <strong>stop the service</strong>
       </dt> 
       <dd>
        <code class="docutils literal notranslate"><span class="pre">roundup-server</span> <span class="pre">-c</span> <span class="pre">stop</span></code>
       </dd> 
      </dl> 
      <p>To bring up the services panel:</p> 
      <dl class="docutils"> 
       <dt>
        Windows 2000 and later
       </dt> 
       <dd>
        Start/Control Panel/Administrative Tools/Services
       </dd> 
       <dt>
        Windows NT4
       </dt> 
       <dd>
        Start/Control Panel/Services
       </dd> 
      </dl> 
      <p>You will need a server configuration file (as described in <a class="reference internal" href="#configuring-roundup-server">Configuring roundup-server</a>) for specifying tracker homes and other roundup-server configuration. Specify the name of this file using the <code class="docutils literal notranslate"><span class="pre">-C</span></code> switch when installing the service.</p> 
      <div class="section" id="running-the-mail-gateway-script"> 
       <h4><a class="toc-backref" href="#id16">Running the Mail Gateway Script</a></h4> 
       <p>The mail gateway script should be scheduled to run regularly on your Windows server. Normally this will result in a window popping up. The solution to this is to:</p> 
       <ol class="arabic simple"> 
        <li>Create a new local account on the Roundup server</li> 
        <li>Set the scheduled task to run in the context of this user instead of your normal login</li> 
       </ol> 
      </div> 
     </div> 
    </div> 
    <div class="section" id="using-roundup-admin"> <span id="index-3"></span>
     <h2><a class="toc-backref" href="#id17">Using roundup-admin</a></h2> 
     <p>Part of the installation includes a man page for roundup-admin. Ypu should be able to read it using <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">roundup-admin</span></code>. As shown above, it is a generic tool for manipulating the underlying database for you tracker.</p> 
     <p>Examples above show how to use it to:</p> 
     <blockquote> 
      <div>
       <ul class="simple"> 
        <li>install and initialize a new tracker</li> 
        <li>export/import tracker data for migrating between backends</li> 
        <li>creating a new user fom the command line</li> 
        <li>list/find users in the tracker</li> 
       </ul> 
      </div>
     </blockquote> 
     <p>A brief (incomplete) summary is:</p> 
     <div class="highlight-default notranslate">
      <div class="highlight">
       <pre><span></span><span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="n">help</span>
<span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">tracker_dir</span><span class="o">&gt;</span> <span class="n">get</span> <span class="p">[</span><span class="o">-</span><span class="nb">list</span><span class="p">]</span> <span class="n">designator</span><span class="p">[,</span> <span class="n">designator</span><span class="p">,</span><span class="o">...</span><span class="p">]</span> <span class="n">propname</span>
<span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">tracker_dir</span><span class="o">&gt;</span> <span class="nb">set</span> <span class="n">designator</span><span class="p">[,</span> <span class="n">designator</span><span class="p">,</span><span class="o">...</span><span class="p">]</span> <span class="n">propname</span><span class="o">=</span><span class="n">value</span> <span class="o">...</span>
<span class="n">roundup</span><span class="o">-</span><span class="n">admin</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">tracker_dir</span><span class="o">&gt;</span> <span class="n">find</span> <span class="p">[</span><span class="o">-</span><span class="nb">list</span><span class="p">]</span> <span class="n">classname</span> <span class="n">propname</span><span class="o">=</span><span class="n">value</span> <span class="o">...</span>
</pre>
      </div> 
     </div> 
     <p>Run <code class="docutils literal notranslate"><span class="pre">roundup-admin</span> <span class="pre">help</span> <span class="pre">commands</span></code> for a complete list of subcommands.</p> 
    </div> 
   </div> 
  </div> 
  <div class="footer"> 
   <div> <span class="source">[<a href="../_sources/docs/admin_guide.txt" rel="nofollow">page source</a>]</span> © Copyright 2009-2021, Richard Jones, Roundup-Team. 
   </div> 
   <div>
     Last updated on May 09, 2022. <span>Hosted by <a href="https://sourceforge.net"><img src="https://sflogo.sourceforge.net/sflogo.php?group_id=31577&amp;type=1" width="88" height="31" border="0" alt="SourceForge.net Logo"></a></span> 
   </div> 
  </div> 
  <script>
      /* locally hosted goatcounter https://www.goatcounter.com/ */
      /* include site info in path url to allow multiple sites to be
      tracked together */
      window.goatcounter = {
      path: function(p) { return location.host + p }
      }
    </script> 
  <script data-goatcounter="https://stats.rouilj.dynamic-dns.net/count" integrity="sha384-QGgNMMRFTi8ul5kHJ+vXysPe8gySvSA/Y3rpXZiRLzKPIw8CWY+a3ObKmQsyDr+a" async src="/_static/goatcounter_count.v3.js">
    </script>  
 </body>
</html>