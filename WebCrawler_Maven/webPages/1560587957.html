<!doctype html>
<html lang="en-US"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> 
  <meta name="mobile-web-app-capable" content="yes"> 
  <meta name="apple-mobile-web-app-capable" content="yes"> 
  <meta name="apple-mobile-web-app-title" content="Engineering at Meta - Engineering at Meta Blog"> 
  <meta property="fb:app_id" content="1425766027653270"> 
  <link rel="profile" href="http://gmpg.org/xfn/11"> 
  <link rel="pingback" href="https://engineering.fb.com/xmlrpc.php"> 
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"> 
  <script async src="https://engineering.fb.com/wp-content/themes/code-fb-com/dist/js/optimize.min.js"></script> <!-- This site is optimized with the Yoast SEO Premium plugin v17.4 (Yoast SEO v17.4) - https://yoast.com/wordpress/plugins/seo/ --> 
  <title>How the Cinder JIT’s function inliner helps us optimize Instagram</title> 
  <meta name="description" content="This blog focuses on Cinder's JIT compiler and its new function inliner and how it helps us speed up our production application on Instagram."> 
  <link rel="canonical" href="https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/"> 
  <meta property="og:locale" content="en_US"> 
  <meta property="og:type" content="article"> 
  <meta property="og:title" content="How the Cinder JIT’s function inliner helps us optimize Instagram"> 
  <meta property="og:description" content="This blog focuses on Cinder's JIT compiler and its new function inliner and how it helps us speed up our production application on Instagram."> 
  <meta property="og:url" content="https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/"> 
  <meta property="og:site_name" content="Engineering at Meta"> 
  <meta property="article:published_time" content="2022-05-02T16:30:52+00:00"> 
  <meta property="article:modified_time" content="2022-05-02T20:34:52+00:00"> 
  <meta property="og:image" content="https://engineering.fb.com/wp-content/uploads/2022/04/Eng-Blog-Self-Serve-Hero-Images-DEBUGGING-203-Blue.jpg"> 
  <meta property="og:image:width" content="1920"> 
  <meta property="og:image:height" content="1080"> 
  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:label1" content="Written by"> 
  <meta name="twitter:data1" content="Max Bernstein"> 
  <meta name="twitter:label2" content="Est. reading time"> 
  <meta name="twitter:data2" content="14 minutes"> 
  <script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://engineering.fb.com/#organization","name":"Meta","url":"https://engineering.fb.com/","sameAs":[],"logo":{"@type":"ImageObject","@id":"https://engineering.fb.com/#logo","inLanguage":"en-US","url":"https://engineering.fb.com/wp-content/uploads/2021/11/Engineering_at_Meta.jpg","contentUrl":"https://engineering.fb.com/wp-content/uploads/2021/11/Engineering_at_Meta.jpg","width":1200,"height":630,"caption":"Meta"},"image":{"@id":"https://engineering.fb.com/#logo"}},{"@type":"WebSite","@id":"https://engineering.fb.com/#website","url":"https://engineering.fb.com/","name":"Engineering at Meta","description":"Engineering at Meta Blog","publisher":{"@id":"https://engineering.fb.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://engineering.fb.com/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#primaryimage","inLanguage":"en-US","url":"https://engineering.fb.com/wp-content/uploads/2022/04/Eng-Blog-Self-Serve-Hero-Images-DEBUGGING-203-Blue.jpg","contentUrl":"https://engineering.fb.com/wp-content/uploads/2022/04/Eng-Blog-Self-Serve-Hero-Images-DEBUGGING-203-Blue.jpg","width":1920,"height":1080},{"@type":"WebPage","@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#webpage","url":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/","name":"How the Cinder JIT\u2019s function inliner helps us optimize Instagram","isPartOf":{"@id":"https://engineering.fb.com/#website"},"primaryImageOfPage":{"@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#primaryimage"},"datePublished":"2022-05-02T16:30:52+00:00","dateModified":"2022-05-02T20:34:52+00:00","description":"This blog focuses on Cinder's JIT compiler and its new function inliner and how it helps us speed up our production application on Instagram.","breadcrumb":{"@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/"]}]},{"@type":"BreadcrumbList","@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://engineering.fb.com/"},{"@type":"ListItem","position":2,"name":"How the Cinder JIT\u2019s function inliner helps us optimize Instagram"}]},{"@type":"Article","@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#article","isPartOf":{"@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#webpage"},"author":{"@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#author","name":""},"headline":"How the Cinder JIT\u2019s function inliner helps us optimize Instagram","datePublished":"2022-05-02T16:30:52+00:00","dateModified":"2022-05-02T20:34:52+00:00","mainEntityOfPage":{"@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#webpage"},"wordCount":2337,"publisher":{"@id":"https://engineering.fb.com/#organization"},"image":{"@id":"https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/#primaryimage"},"thumbnailUrl":"https://engineering.fb.com/wp-content/uploads/2022/04/Eng-Blog-Self-Serve-Hero-Images-DEBUGGING-203-Blue.jpg","keywords":["Instagram"],"articleSection":["DevInfra","Open Source"],"inLanguage":"en-US"},[]]}</script> <!-- / Yoast SEO Premium plugin. --> 
  <link rel="dns-prefetch" href="//secure.gravatar.com"> 
  <link rel="dns-prefetch" href="//s.w.org"> 
  <link rel="dns-prefetch" href="//v0.wordpress.com"> 
  <link rel="alternate" type="application/rss+xml" title="Engineering at Meta » Feed" href="https://engineering.fb.com/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="Engineering at Meta » Comments Feed" href="https://engineering.fb.com/comments/feed/"> 
  <script async src="https://www.googleoptimize.com/optimize.js?id=OPT-TPNDQC5" onerror="dataLayer.hide.end &amp;&amp; dataLayer.hide.end()"></script> 
  <script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/engineering.fb.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.9.3"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <link rel="stylesheet" id="all-css-0" href="https://engineering.fb.com/_static/??-eJyNj9EOwjAIRX/IjizRuRfjt3SUTJR2TWEx/XvnzJLtzccLHODAOztOKHMgBVSFwGowyIQvJzwUXyqoVaEmcmqWgRPsiadCpMCehCIlO4QsvlJxQqPH+h++9Pb5AOGUbD0xuyzzyElByRd8AIlXY8yFtv+/ImUpGwWXJzV1P6PVRLe193hru0vbd21/vn4AN49jAw==" type="text/css" media="all"> 
  <style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style> 
  <style id="global-styles-inline-css">
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style> 
  <link rel="stylesheet" id="all-css-2" href="https://engineering.fb.com/_static/??-eJx9zd0KwjAMhuEbso0bTN2BeC1bGtfO/mkyxLt3nRMGgmfhJQ8fPLPCFIWiQPbT4CLDnAaTH6Vz6caxQClr0Mi8gw0Mk/rae9ieqR8JRWGHlmBWwPLy9OPFUiAGTIbUtZ9z+GwWgdZ5o5YPHVz8tz2S5A5vqtrrdrFrKOYSztWhqZvmdKzbN1NzWWo=" type="text/css" media="all"> 
  <script type="text/javascript" src="https://engineering.fb.com/_static/??-eJyFjlEKwjAQRC9kuwS07Y94ltIsMaHZrrsbxNubQAT/CgMDjzcw8OZhO8iQDHgvIZJCRcGzNK6N+6gGjXQwJr00KdK2F48KqeZVUD69xhzpVBpyDLIa/su/J/bEXCeFPIqarNzWfDCjdP2R7266uWVyy3VOX0MqSYE="></script>
  <link rel="https://api.w.org/" href="https://engineering.fb.com/wp-json/">
  <link rel="alternate" type="application/json" href="https://engineering.fb.com/wp-json/wp/v2/posts/18657">
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://engineering.fb.com/xmlrpc.php?rsd"> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://engineering.fb.com/wp-includes/wlwmanifest.xml"> 
  <meta name="generator" content="WordPress 5.9.3"> 
  <link rel="shortlink" href="https://wp.me/pa0Lhq-4QV"> 
  <link rel="alternate" type="application/json+oembed" href="https://engineering.fb.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fengineering.fb.com%2F2022%2F05%2F02%2Fopen-source%2Fcinder-jits-instagram%2F"> 
  <link rel="alternate" type="text/xml+oembed" href="https://engineering.fb.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fengineering.fb.com%2F2022%2F05%2F02%2Fopen-source%2Fcinder-jits-instagram%2F&amp;format=xml"> 
  <style type="text/css">img#wpstats{display:none}</style> 
  <link rel="preload" href="https://engineering.fb.com/wp-content/themes/code-fb-com/fonts/FacebookReader-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="https://engineering.fb.com/wp-content/themes/code-fb-com/fonts/FacebookReader-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="https://engineering.fb.com/wp-content/themes/code-fb-com/fonts/Optimistic_Display_W_Md.woff2" as="font" type="font/woff2" crossorigin="anonymous"> <!-- Google Tag Manager --> 
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KZRLGZ8');</script> <!-- End Google Tag Manager --> <!-- Facebook Pixel Code --> 
  <script type="text/javascript">
	if (window.gdprSafeTrack) {
			window.gdprSafeTrack(function() {
				!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
				n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
				n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
				t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
				document,'script','https://connect.facebook.net/en_US/fbevents.js');
			});
			window.gdprSafeTrack(function() {
				fbq('init', '660742068067366', [], {
					"agent": "wordpress-5.5-1.8.0"
				});
				fbq('track', 'PageView', []);
			})
		}
	</script> <!-- End Facebook Pixel Code --> 
  <link rel="shortcut icon" href="https://engineering.fb.com/wp-content/themes/code-fb-com/favicon.ico"> 
 </head> 
 <body class="post-template-default single single-post postid-18657 single-format-standard group-blog"> <!-- Facebook Pixel Code --> 
  <noscript> 
   <img height="1" width="1" style="display:none" alt="fbpx" src="https://www.facebook.com/tr?id=660742068067366&amp;ev=PageView&amp;noscript=1"> 
  </noscript> <!-- End Facebook Pixel Code --> 
  <div class="hfeed site" id="page"> <!-- ******************* The Navbar Area ******************* --> 
   <div class="wrapper-fluid wrapper-navbar" id="wrapper-navbar"> <a class="skip-link screen-reader-text sr-only" href="#content"> Skip to content </a> 
    <nav class="navbar navbar-expand-std"> 
     <div class="nav-container"> <!-- Your site title as branding in the menu --> 
      <div class="nav-top-row"> 
       <h1 class="navbar-brand mb-0"> <a rel="home" href="https://engineering.fb.com/" title="Engineering at Meta"> <img class="navbar-brand-logo" src="https://engineering.fb.com/wp-content/themes/code-fb-com/img/logo-meta.svg" class="navbar-brand-logo" alt="Engineering at Meta" width="215" height="40" loading="lazy"> </a> </h1> <!-- end custom logo --> <label for="search" class="screen-reader-text">Search this site</label> 
       <input type="text" id="search" name="search" class="form-control-lg navbar-search" autocomplete="off"> <button class="navbar-toggler navbar-searchbar-toggler" type="button" data-toggle="collapse" data-target="#searchbarDropdown" aria-controls="searchbarDropdown" aria-expanded="false" aria-label="Toggle navigation"> <img src="https://engineering.fb.com/wp-content/themes/code-fb-com/img/icon-search.svg" class="navbar-mobile-search-icon" loading="lazy" width="24" height="25"> </button> <!-- desktop language menu (mobile language menu is implemented via jQuery)--> 
       <div class="notranslate nice-select navbar-language form-control"> 
       </div> <button class="navbar-toggler collapsed navbar-menu-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
      </div> 
      <div class="navbar-border"></div> <!-- The WordPress Menu goes here --> 
      <div id="navbarNavDropdown" class="collapse navbar-collapse">
       <ul id="main-menu" class="navbar-nav">
        <li id="menu-item-60" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children nav-item menu-item-60 dropdown"><a title="Open Source" href="#" data-toggle="dropdown" class="nav-link dropdown-toggle">Open Source <span class="caret"></span>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewbox="0 0 129 129" enable-background="new 0 0 129 129" width="12px" height="15px"> <polyline points="40 50 80 90 120 50" stroke="#adb1b8" stroke-width="10" stroke-linecap="butt" fill="none" stroke-linejoin="miter" /> 
          </svg></a> 
         <ul class=" dropdown-menu" role="menu"> 
          <li id="menu-item-12330" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent nav-item menu-item-12330"><a title="Open Source" href="https://engineering.fb.com/category/open-source/" class="nav-link">Open Source</a></li> 
          <li id="menu-item-12331" class="menu-item menu-item-type-custom menu-item-object-custom nav-item menu-item-12331"><a title="Facebook Open Source" href="https://opensource.facebook.com" class="nav-link">Facebook Open Source</a></li> 
         </ul> </li> 
        <li id="menu-item-2686" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children nav-item menu-item-2686 dropdown"><a title="Platforms" href="#" data-toggle="dropdown" class="nav-link dropdown-toggle">Platforms <span class="caret"></span>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewbox="0 0 129 129" enable-background="new 0 0 129 129" width="12px" height="15px"> <polyline points="40 50 80 90 120 50" stroke="#adb1b8" stroke-width="10" stroke-linecap="butt" fill="none" stroke-linejoin="miter" /> 
          </svg></a> 
         <ul class=" dropdown-menu" role="menu"> 
          <li id="menu-item-65" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-65"><a title="Android" href="https://engineering.fb.com/category/android/" class="nav-link">Android</a></li> 
          <li id="menu-item-66" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-66"><a title="iOS" href="https://engineering.fb.com/category/ios/" class="nav-link">iOS</a></li> 
          <li id="menu-item-67" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-67"><a title="Web" href="https://engineering.fb.com/category/web/" class="nav-link">Web</a></li> 
         </ul> </li> 
        <li id="menu-item-2682" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children nav-item menu-item-2682 dropdown"><a title="Infrastructure Systems" href="#" data-toggle="dropdown" class="nav-link dropdown-toggle">Infrastructure Systems <span class="caret"></span>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewbox="0 0 129 129" enable-background="new 0 0 129 129" width="12px" height="15px"> <polyline points="40 50 80 90 120 50" stroke="#adb1b8" stroke-width="10" stroke-linecap="butt" fill="none" stroke-linejoin="miter" /> 
          </svg></a> 
         <ul class=" dropdown-menu" role="menu"> 
          <li id="menu-item-218" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-218"><a title="Core Data" href="https://engineering.fb.com/category/core-data/" class="nav-link">Core Data</a></li> 
          <li id="menu-item-219" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-219"><a title="Data Infrastructure" href="https://engineering.fb.com/category/data-infrastructure/" class="nav-link">Data Infrastructure</a></li> 
          <li id="menu-item-220" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent nav-item menu-item-220"><a title="DevInfra" href="https://engineering.fb.com/category/developer-tools/" class="nav-link">DevInfra</a></li> 
          <li id="menu-item-226" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-226"><a title="Production Engineering" href="https://engineering.fb.com/category/production-engineering/" class="nav-link">Production Engineering</a></li> 
          <li id="menu-item-227" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-227"><a title="Security" href="https://engineering.fb.com/category/security/" class="nav-link">Security</a></li> 
          <li id="menu-item-18607" class="menu-item menu-item-type-custom menu-item-object-custom nav-item menu-item-18607"><a title="Research Publications" href="https://research.facebook.com/publications/research-areas/systems-infrastructure/" class="nav-link">Research Publications</a></li> 
         </ul> </li> 
        <li id="menu-item-2683" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children nav-item menu-item-2683 dropdown"><a title="Physical Infrastructure" href="#" data-toggle="dropdown" class="nav-link dropdown-toggle">Physical Infrastructure <span class="caret"></span>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewbox="0 0 129 129" enable-background="new 0 0 129 129" width="12px" height="15px"> <polyline points="40 50 80 90 120 50" stroke="#adb1b8" stroke-width="10" stroke-linecap="butt" fill="none" stroke-linejoin="miter" /> 
          </svg></a> 
         <ul class=" dropdown-menu" role="menu"> 
          <li id="menu-item-215" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-215"><a title="Connectivity" href="https://engineering.fb.com/category/connectivity/" class="nav-link">Connectivity</a></li> 
          <li id="menu-item-216" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-216"><a title="Data Center Engineering" href="https://engineering.fb.com/category/data-center-engineering/" class="nav-link">Data Center Engineering</a></li> 
          <li id="menu-item-217" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-217"><a title="Networking &amp; Traffic" href="https://engineering.fb.com/category/networking-traffic/" class="nav-link">Networking &amp; Traffic</a></li> 
          <li id="menu-item-18608" class="menu-item menu-item-type-custom menu-item-object-custom nav-item menu-item-18608"><a title="Research Publications" href="https://research.facebook.com/publications/research-areas/networking-connectivity/" class="nav-link">Research Publications</a></li> 
         </ul> </li> 
        <li id="menu-item-2684" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children nav-item menu-item-2684 dropdown"><a title="Video Engineering &amp; AR/VR" href="#" data-toggle="dropdown" class="nav-link dropdown-toggle">Video Engineering &amp; AR/VR <span class="caret"></span>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewbox="0 0 129 129" enable-background="new 0 0 129 129" width="12px" height="15px"> <polyline points="40 50 80 90 120 50" stroke="#adb1b8" stroke-width="10" stroke-linecap="butt" fill="none" stroke-linejoin="miter" /> 
          </svg></a> 
         <ul class=" dropdown-menu" role="menu"> 
          <li id="menu-item-225" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-225"><a title="Video Engineering" href="https://engineering.fb.com/category/video-engineering/" class="nav-link">Video Engineering</a></li> 
          <li id="menu-item-223" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-223"><a title="Virtual Reality" href="https://engineering.fb.com/category/virtual-reality/" class="nav-link">Virtual Reality</a></li> 
          <li id="menu-item-13388" class="menu-item menu-item-type-custom menu-item-object-custom nav-item menu-item-13388"><a title="Research Publications" href="https://research.facebook.com/publications/research-areas/augmented-reality-virtual-reality/" class="nav-link">Research Publications</a></li> 
         </ul> </li> 
        <li id="menu-item-2685" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children nav-item menu-item-2685 dropdown"><a title="Artificial Intelligence" href="#" data-toggle="dropdown" class="nav-link dropdown-toggle">Artificial Intelligence <span class="caret"></span>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewbox="0 0 129 129" enable-background="new 0 0 129 129" width="12px" height="15px"> <polyline points="40 50 80 90 120 50" stroke="#adb1b8" stroke-width="10" stroke-linecap="butt" fill="none" stroke-linejoin="miter" /> 
          </svg></a> 
         <ul class=" dropdown-menu" role="menu"> 
          <li id="menu-item-222" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-222"><a title="ML Applications" href="https://engineering.fb.com/category/ml-applications/" class="nav-link">ML Applications</a></li> 
          <li id="menu-item-221" class="menu-item menu-item-type-taxonomy menu-item-object-category nav-item menu-item-221"><a title="AI Research" href="https://engineering.fb.com/category/ai-research/" class="nav-link">AI Research</a></li> 
          <li id="menu-item-13387" class="menu-item menu-item-type-custom menu-item-object-custom nav-item menu-item-13387"><a title="Research Publications" href="https://ai.facebook.com/results/?content_types%5B0%5D=publication" class="nav-link">Research Publications</a></li> 
         </ul> </li> 
        <li id="menu-item-228" class="menu-item menu-item-type-custom menu-item-object-custom nav-item menu-item-228"><a title="Watch Videos" href="/videos" class="nav-link">Watch Videos</a></li> 
       </ul>
      </div> 
     </div><!-- .container --> 
     <div class="search-container collapse" id="searchbarDropdown"> 
      <div class="searchbar-search"> 
       <div class="searchbar-container"> 
        <div class="navbar-mobile-search-margin"></div> 
        <input type="text" name="search" placeholder="Search" class="form-control-lg navbar-mobile-search" autofocus autocomplete="off"> <button class="searchbar-clear"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
       </div> 
      </div> 
     </div> 
    </nav><!-- .site-navigation --> 
   </div><!-- .wrapper-navbar end --> 
   <div class="wrapper" id="single-wrapper"> 
    <div class="single-container row" id="content" tabindex="-1"> <!-- Do the left sidebar check. --> 
     <div class="content-area" id="primary"> 
      <main class="site-main" id="main"> 
       <article class="post-18657 post type-post status-publish format-standard has-post-thumbnail hentry category-developer-tools category-open-source tag-instagram fb_content_type-article" id="post-18657"> 
        <header class="entry-header"> 
         <div class="entry-meta">
           POSTED ON <span class="posted-on entry-date"><time class="published updated" datetime="2022-05-02">MAY 2, 2022</time></span> TO <span class="cat-links"><a href="https://engineering.fb.com/category/developer-tools/" rel="category tag">DevInfra</a>, <a href="https://engineering.fb.com/category/open-source/" rel="category tag">Open Source</a></span> 
          <h1 class="entry-title">
           <div>
            How the Cinder JIT’s function inliner helps us optimize Instagram
           </div></h1> 
         </div><!-- .entry-meta --> 
        </header><!-- .entry-header --> 
        <figure id="post-feat-image-container"> 
         <img width="1920" height="1080" src="https://engineering.fb.com/wp-content/uploads/2022/04/Eng-Blog-Self-Serve-Hero-Images-DEBUGGING-203-Blue.jpg" class="wp-post-image" alt="" loading="lazy" title="Eng-Blog-Self-Serve-Hero-Images-DEBUGGING-203-Blue"> 
        </figure> 
        <div class="entry-authors-social"> 
         <div class="entry-authors">
           By <a href="https://engineering.fb.com/author/max-bernstein/" title="Posts by Max Bernstein" class="author url fn" rel="author">Max Bernstein</a> 
         </div> 
         <div class="entry-social"> 
          <div class="entry-facebook"> <button onclick="return fbShare()" aria-label="Share this post on Facebook"> 
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24">
             <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
            </svg> </button> 
          </div> 
          <div class="entry-twitter"> <button onclick="return twitterSharePopup('https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/')" aria-label="Share this post on Twitter"> 
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24">
             <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
            </svg> </button> 
          </div> 
          <div class="entry-hacker-news"> <button onclick="return shareHackerNews('https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/')" aria-label="Share this post on Hacker News"> 
            <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
             <path d="M13.693 14.659L21.507 0h-3.29l-4.612 9.165c-.47.94-.901 1.841-1.293 2.703l-1.234-2.703L6.525 0H3l7.726 14.482V24h2.967v-9.341z" fill-rule="nonzero" />
            </svg> </button> 
          </div> 
         </div> 
        </div> 
        <div class="entry-content"> 
         <p><span style="font-weight: 400;">Since Instagram runs one of the world’s largest deployments of the Django web framework, we have natural interest in finding ways to optimize Python so we can speed up our production application. As part of this effort, we’ve recently open-sourced </span><a href="https://github.com/facebookincubator/cinder"><span style="font-weight: 400;">Cinder</span></a><span style="font-weight: 400;">, our Python runtime that is a fork of CPython. Cinder includes optimizations like immortal objects, shadowcode (our term for inline caching and quickening), <a href="https://github.com/facebookincubator/cinder#static-python">Static Python</a>, and <a href="https://github.com/facebookincubator/cinder#strict-modules">Strict Modules</a>. But this blog focuses on the just-in-time (JIT) compiler and its recently released </span><a href="https://github.com/facebookincubator/cinder/commit/f3c50b3938906149b32c9cd36c3a41f0e898b52d"><span style="font-weight: 400;">function inliner</span></a><span style="font-weight: 400;">.</span></p> 
         <p><span style="font-weight: 400;">Even with Static Python and the shadowcode enabled in the bytecode interpreter, there is still some overhead that we can get rid of by compiling to native code. There is overhead present in the bytecode dispatch (the switch/case), the stack model (pushing and popping to pass objects between opcodes), and also in a very generic interpreter — at least in CPython 3.8. So we wrote a JIT compiler to remove a lot of this overhead.</span></p> 
         <h2><span style="font-weight: 400;">A bit about the JIT</span></h2> 
         <p><i><span style="font-weight: 400;">Note: If you are already familiar with Python bytecode and JITs, you might want to skip down to </span></i><span style="font-weight: 400;"><a href="#inlining">Inlining and its benefits.</a></span></p> 
         <p><span style="font-weight: 400;">The JIT compiles functions one at a time, translating from bytecode to a control-flow graph (CFG), to high-level intermediate representation (HIR), to static single assignment (SSA) HIR, to low-level intermediate representation (LIR), to register-allocated LIR, to assembly.</span></p> 
         <p><span style="font-weight: 400;">Translating from bytecode to a register-based HIR removes the stack overhead. Translating to native code removes the dispatch overhead. And several compiler passes, including type inference, specialize the code from its previous generic form. </span><span style="font-weight: 400;">Let’s walk through how the JIT compiles two Python functions from beginning to end. Take a look at this Python code example</span><span style="font-weight: 400;">:</span></p> 
         <pre class="line-numbers"><code class="language-none">def callee(x):
	return x + 1	
def caller():
	return callee(3)
</code></pre> 
         <p><span style="font-weight: 400; font-family: Courier New;">callee</span><span style="font-weight: 400;"> is a very generic function. It has no idea what the type of </span><span style="font-weight: 400; font-family: Courier New;">x</span><span style="font-weight: 400;"> is, so it cannot specialize the addition operation. In <span style="font-weight: 400; font-family: Courier New;">caller</span>, the lookup for the global </span><span style="font-weight: 400; font-family: Courier New;">callee</span><span style="font-weight: 400;"> must happen anew every time because in Python global variable bindings are mutable. To get an idea of what this looks like, we can look at the bytecode.</span></p> 
         <p><span style="font-weight: 400;">This Python code gets compiled to the following CPython 3.8 bytecode:</span></p> 
         <pre class="line-numbers"><code class="language-none">callee:
          	0 LOAD_FAST            	0 (x)
          	2 LOAD_CONST           	1 (1)
          	4 BINARY_ADD
          	6 RETURN_VALUE

caller:
          	0 LOAD_GLOBAL          	0 (callee)
          	2 LOAD_CONST           	1 (3)
          	4 CALL_FUNCTION        	1
          	6 RETURN_VALUE 
</code></pre> 
         <p><span style="font-weight: 400;">In this representation, produced by the </span><span style="font-weight: 400; font-family: Courier New;">dis</span><span style="font-weight: 400;"> module, there are four columns. The first contains the bytecode offset (0, 2, 4, …) inside each function. The second contains the human-readable representation of the opcode. The third contains the byte-wide argument to the opcode. The fourth contains the human-readable context-aware meaning of the opcode argument. In most cases, these are read off an auxiliary structure in the </span><span style="font-weight: 400; font-family: Courier New;">PyCodeObject</span><span style="font-weight: 400;"> struct and are not present in the bytecode.</span></p> 
         <p><span style="font-weight: 400;">This bytecode normally gets executed in the interpreter. In the bytecode interpreter, the function call path involves a lot of machinery to query properties of the callee function and the call site. This machinery checks that the argument count and parameter count match up, that defaults are filled in, resolves </span><span style="font-weight: 400; font-family: Courier New;">__call__</span><span style="font-weight: 400;"> methods for nonfunctions, heap allocate a call frame, and more. This is rather involved and not always necessary. The JIT often knows some more information at compile time and can elide checks that it knows are unnecessary. It also can often avoid dynamic lookup for global variables, inline constants into the instruction stream, and use</span><a href="https://github.com/facebookincubator/cinder/blob/1642fffb42a3a5914386d029bc538a79c435d31b/Include/internal/pycore_shadow_frame_struct.h"> <span style="font-weight: 400;">shadow frames</span></a><span style="font-weight: 400;">.&nbsp;</span>A shadow frame consists of two stack-allocated words containing metadata we can use to reify <span style="font-family: Courier New;">PyFrameObject</span>s. They are pushed and popped in every function prologue and epilogue.</p> 
         <p><span style="font-weight: 400;">Before the JIT can optimize this Python code, it must be transformed from bytecode into a control flow graph. To do this, we first discover basic block boundaries. Jumps, returns, and </span><span style="font-weight: 400; font-family: Courier New;">raise</span><span style="font-weight: 400;"> terminate basic blocks, which means that the functions above only have one basic block each. Then the JIT does abstract interpretation on the stack-based bytecode to turn it into our infinite register IR.</span></p> 
         <p><span style="font-weight: 400;">Below is the initial HIR when translated straight off the bytecode:</span></p> 
         <pre class="line-numbers"><code class="language-none"># Initial HIR
fun __main__:callee {
  bb 0 {
	v0 = LoadArg&lt;0; "x"&gt;
	v0 = CheckVar&lt;"x"&gt; v0
	v1 = LoadConst&lt;MortalLongExact[1]&gt;
	v2 = BinaryOp&lt;Add&gt; v0 v1
	Return v2
  }
}

fun __main__:caller {
  bb 0 {
	v0 = LoadGlobalCached&lt;0; "callee"&gt;
	v0 = GuardIs&lt;0xdeadbeef&gt; v0
	v1 = LoadConst&lt;MortalLongExact[3]&gt;
	v2 = VectorCall&lt;1&gt; v0 v1
	Return v2
  }
}
</code></pre> 
         <p><span style="font-weight: 400;">It has some additional information not present in the bytecode. For starters, it has objects embedded into the instructions (with all pointers replaced with </span><span style="font-weight: 400; font-family: Courier New;">0xdeadbeef</span><span style="font-weight: 400;">). </span><span style="font-weight: 400; font-family: Courier New;">LoadConst</span><span style="font-weight: 400;"> is parameterized by the type </span><span style="font-weight: 400; font-family: Courier New;">MortalLongExact[1]</span><span style="font-weight: 400;">, which describes precisely the </span><span style="font-weight: 400; font-family: Courier New;">PyObject*</span><span style="font-weight: 400;"> for </span><span style="font-weight: 400; font-family: Courier New;">1</span><span style="font-weight: 400;">. It also has this new </span><span style="font-weight: 400; font-family: Courier New;">GuardIs</span><span style="font-weight: 400;"> instruction, which has an address. This is automatically inserted after </span><span style="font-weight: 400; font-family: Courier New;">LoadGlobalCached</span><span style="font-weight: 400;"> and is based on the assumption that globals change infrequently. Global variables are normally stored in a big module-scope dictionary, mapping global names to values. Instead of reloading from the dictionary each time, we can do a fast pointer comparison and leave the JIT (deoptimize) if it fails.</span></p> 
         <p><span style="font-weight: 400;">This representation is useful but not entirely what we need. Before we can run our other optimization passes on the HIR, it needs to be converted to SSA. So we run the SSA pass on it, which also does basic flow typing:</span></p> 
         <pre class="line-numbers"><code class="language-none"># SSA HIR
fun __main__:callee {
  bb 0 {
	v3:Object = LoadArg&lt;0; "x"&gt;
	v4:Object = CheckVar&lt;"x"&gt; v3
	v5:MortalLongExact[1] = LoadConst&lt;MortalLongExact[1]&gt;
	v6:Object = BinaryOp&lt;Add&gt; v4 v5
	Return v6
  }
}

fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	v6:Object = VectorCall&lt;1&gt; v4 v5
	Return v6
  }
}
</code></pre> 
         <p><span style="font-weight: 400;">You can see that now variable definitions are annotated with the type that the JIT has inferred. For </span><span style="font-weight: 400; font-family: Courier New;">LoadConst</span><span style="font-weight: 400;">, this is the type of the constant. For other operations like </span><span style="font-weight: 400; font-family: Courier New;">LoadGlobalCached</span><span style="font-weight: 400;">, it is the type of the global variable when the function was compiled. Because of our assumption about the stability of module globals, the JIT can infer function call targets and burn in addresses to generated code (see </span><span style="font-weight: 400; font-family: Courier New;">MortalFunc[function:0xdeadbeef]</span><span style="font-weight: 400;"> above) after the guard.</span></p> 
         <p class="line-numbers"><span style="font-weight: 400;">After SSA, the JIT will pass the HIR to the optimizer. Our current set of optimization passes will remove the </span><span style="font-weight: 400; font-family: Courier New;">CheckVar</span><span style="font-weight: 400;"> (CPython guarantees arguments will not be null), but that’s about it for these two functions. We can’t optimize away the generic binary operation (</span><span style="font-weight: 400; font-family: Courier New;">BinaryOp&lt;Add&gt;</span><span style="font-weight: 400;">) or the generic function call (</span><span style="font-weight: 400; font-family: Courier New;">VectorCall&lt;1&gt;</span><span style="font-weight: 400;">). So we get this:</span></p> 
         <pre class="line-numbers"><code class="language-none"># Final HIR (without inlining)
fun __main__:callee {
  bb 0 {
	v3:Object = LoadArg&lt;0; "x"&gt;
	v5:MortalLongExact[1] = LoadConst&lt;MortalLongExact[1]&gt;
	v6:Object = BinaryOp&lt;Add&gt; v3 v5
	Return v6
  }
}

fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	v6:Object = VectorCall&lt;1&gt; v4 v5
	Return v6
  }
}
</code></pre> 
         <p><span style="font-weight: 400;">We can’t optimize these generic operations away because we lack type information. And we lack type information because the JIT is method-at-a-time (as opposed to tracing or some kind of global optimization). Type information and specialization happen only within a function. Additionally, functions are compiled prefork, before they are ever run.</span></p> 
         <p><span style="font-weight: 400;">But what if we had more information?</span></p> 
         <h2><span style="font-weight: 400;"><a id="inlining"></a>Inlining and its benefits</span></h2> 
         <p><span style="font-weight: 400;">If we could inline the body of </span><span style="font-weight: 400; font-family: Courier New;">callee</span><span style="font-weight: 400;"> into </span><span style="font-weight: 400; font-family: Courier New;">caller</span><span style="font-weight: 400;">, we would get more information about the argument to </span><span style="font-weight: 400; font-family: Courier New;">callee</span><span style="font-weight: 400;">. It also would remove the function call overhead. For our code here, that is more than enough. On other code, it has other benefits, as well, like removing inline cache pressure (monomorphizing caches in callees) and reducing register stack spills due to the native code calling conventions.</span></p> 
         <p class="line-numbers"><span style="font-weight: 400;">If we hypothetically inline </span><span style="font-weight: 400; font-family: Courier New;">callee</span><span style="font-weight: 400;"> into </span><span style="font-weight: 400; font-family: Courier New;">caller</span><span style="font-weight: 400;"> manually, it might look something like the following:</span></p> 
         <pre class="line-numbers"><code class="language-none"># Hypothetical inlined HIR
fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	# Inlined "callee"
	v13:MortalLongExact[1] = LoadConst&lt;MortalLongExact[1]&gt;
	v16:Object = BinaryOp&lt;Add&gt; v5 v13
	# End inlined "callee"
	Return v16
  }
}
</code></pre> 
         <p class="line-numbers"><span style="font-weight: 400;">Now we have a lot more information about the types to </span><span style="font-weight: 400; font-family: Courier New;">BinaryOp</span><span style="font-weight: 400;">. An optimization pass can now specialize this to an opcode called </span><span style="font-weight: 400; font-family: Courier New;">LongBinaryOp</span><span style="font-weight: 400;">, which calls </span><span style="font-weight: 400; font-family: Courier New;">int.__add__</span><span style="font-weight: 400;"> directly:</span></p> 
         <pre class="line-numbers"><code class="language-none"># Hypothetical inlined+optimized HIR
fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	# Inlined "callee"
	v13:MortalLongExact[1] = LoadConst&lt;MortalLongExact[1]&gt;
	v16:LongExact = LongBinaryOp&lt;Add&gt; v5 v13
	# End inlined "callee"
	Return v16
  }
}
</code></pre> 
         <p><span style="font-weight: 400;">This lets us reason better about the memory effects of the binary operation: We know precisely what built-in function it’s calling. Or — even better — we could constant fold it completely:</span></p> 
         <pre class="line-numbers"><code class="language-none"># Hypothetical inlined+optimized HIR II
fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	# Inlined "callee"
	v17:MortalLongExact[4] = LoadConst&lt;MortalLongExact[4]&gt;
	# End inlined "callee"
	Return v17
  }
}
</code></pre> 
         <p><span style="font-weight: 400;">This is pretty neat. With one compiler pass adding more information, the other passes reduced our function call to a constant. For now, we still need the </span><span style="font-weight: 400; font-family: Courier New;">LoadGlobalCached</span><span style="font-weight: 400;"> and </span><span style="font-weight: 400; font-family: Courier New;">GuardIs</span><span style="font-weight: 400;"> in case somebody changes the definition of </span><span style="font-weight: 400; font-family: Courier New;">callee</span><span style="font-weight: 400;">, but they do not take much time.</span></p> 
         <p><span style="font-weight: 400;">Now that we have seen what inlining can do, let’s take a look at the concrete implementation inside Cinder.</span></p> 
         <h2><span style="font-weight: 400;">How the inliner compiler pass works</span></h2> 
         <p class="line-numbers"><span style="font-weight: 400;">Let’s go back to the original nonhypothetical optimized HIR for </span><span style="font-weight: 400; font-family: Courier New;">caller</span><span style="font-weight: 400;">. The inliner is a compiler pass that will receive HIR, which looks roughly like this:</span></p> 
         <pre class="line-numbers"><code class="language-none"># Original HIR, pre-inlining
fun __main__:caller {
  bb 0 {
    v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
    v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
    v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
    v6:Object = VectorCall&lt;1&gt; v4 v5
    Return v6
  }
}</code></pre> 
         <p><span style="font-weight: 400;">It iterates over all the </span><span style="font-weight: 400; font-family: Courier New;">VectorCall</span><span style="font-weight: 400;">s and collects the calls for which the target is known. In this case, </span><span style="font-weight: 400; font-family: Courier New;">v4</span><span style="font-weight: 400;"> is known to be a particular </span><span style="font-weight: 400; font-family: Courier New;">function</span><span style="font-weight: 400;">. We collect all the call sites ahead of time so we are not modifying the CFG as we iterate.</span></p> 
         <p><span style="font-weight: 400;">Then, for each call, if the callee can be inlined, we inline the callee into the caller. A function might not be inlinable if, for example, the arguments don’t match the parameters. This means a couple of separate steps:</span></p> 
         <p><b>1.</b><span style="font-weight: 400;"> Construct HIR of the target inside the caller’s CFG, but keep the graphs separate. The caller is already in SSA form, and we need to maintain that invariant, so we SSA-ify the callee’s graph separately. We don’t support running SSA on a program twice, otherwise we would probably run SSA on the whole CFG post-inline. We also rewrite all the </span><span style="font-weight: 400;">Return</span><span style="font-weight: 400;"> instructions into one big return. This ensures that we only have one entry point into the callee and one exit from the callee.</span></p> 
         <pre class="line-numbers"><code class="language-none">fun __main__:caller {
  bb 0 {
    v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
    v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
    v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
    v6:Object = VectorCall&lt;1&gt; v4 v5
    Return v6
  }

  # Non-linked callee
  bb 1 {
    v7 = LoadArg&lt;0; "x"&gt;
    v8 = CheckVar&lt;"x"&gt; v7
    v9 = LoadConst&lt;MortalLongExact[1]&gt;
    v10 = BinaryOp&lt;Add&gt; v8 v9
    Return v10
  }
}</code></pre> 
         <p><strong>2.</strong> Split the basic block containing the call instruction after the call instruction. For example, in our above example, split <span style="font-weight: 400; font-family: Courier New;">bb 0</span><span style="font-weight: 400;"> into:</span></p> 
         <pre class="line-numbers"><code class="language-none">fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	v6:Object = VectorCall&lt;1&gt; v4 v5
  }

  # Non-linked callee
  bb 1 {
	v7 = LoadArg&lt;0; "x"&gt;
	v8 = CheckVar&lt;"x"&gt; v7
	v9 = LoadConst&lt;MortalLongExact[1]&gt;
	v10 = BinaryOp&lt;Add&gt; v8 v9
	Return v10
  }

  bb 2 {
	Return v6
  }
}
</code></pre> 
         <p><strong>3. </strong>Add bookkeeping instructions and a branch instruction to the callee constructed in step one. Remember shadow frames? We use <span style="font-weight: 400; font-family: Courier New;">BeginInlinedFunction</span><span style="font-weight: 400;"> and </span><span style="font-weight: 400; font-family: Courier New;">EndInlinedFunction</span><span style="font-weight: 400;"> to push and pop shadow frames for inlined functions. We also remove the call.</span></p> 
         <pre class="line-numbers"><code class="language-none">fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	BeginInlinedFunction
	Branch&lt;1&gt;
  }

  # Linked callee
  bb 1 (preds 0) {
	v7 = LoadArg&lt;0; "x"&gt;
	v8 = CheckVar&lt;"x"&gt; v7
	v9 = LoadConst&lt;MortalLongExact[1]&gt;
	v10 = BinaryOp&lt;Add&gt; v8 v9
	Return v10
  }

  bb 2 {
	EndInlinedFunction
	Return v6
  }
}
</code></pre> 
         <p><strong>4.</strong> <span style="font-weight: 400;">Since </span><span style="font-weight: 400; font-family: Courier New;">LoadArg</span><span style="font-weight: 400;"> does not make sense for the callee — there is no function call anymore, so no more args — rewrite it to an </span><span style="font-weight: 400; font-family: Courier New;">Assign</span><span style="font-weight: 400;">. Since we checked the arguments against the parameters earlier, we assign directly from the register that held the argument.</span></p> 
         <pre class="line-numbers"><code class="language-none">fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	BeginInlinedFunction
	Branch&lt;1&gt;
  }

  # Linked callee with rewritten LoadArg
  bb 1 (preds 0) {
	v7 = Assign v5
	v8 = CheckVar&lt;"x"&gt; v7
	v9 = LoadConst&lt;MortalLongExact[1]&gt;
	v10 = BinaryOp&lt;Add&gt; v8 v9
	Return v10
  }

  bb 2 {
	EndInlinedFunction
	Return v6
  }
}
</code></pre> 
         <p><strong>5.</strong> <span style="font-weight: 400;">Now we rewrite the inlined </span><span style="font-weight: 400; font-family: Courier New;">Return</span><span style="font-weight: 400;"> to an </span><span style="font-weight: 400; font-family: Courier New;">Assign</span><span style="font-weight: 400;"> to the output of the original </span><span style="font-weight: 400; font-family: Courier New;">VectorCall</span><span style="font-weight: 400;"> instruction. Since we only have one </span><span style="font-weight: 400;">Return</span><span style="font-weight: 400;"> point and do not need to join many of them (they have already been joined in the callee), we can reuse the output of the call instruction.</span></p> 
         <pre class="line-numbers"><code class="language-none">fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	BeginInlinedFunction
	Branch&lt;1&gt;
  }

  # Linked callee with rewritten Return
  bb 1 (preds 0) {
	v7 = Assign v5
	v8 = CheckVar&lt;"x"&gt; v7
	v9 = LoadConst&lt;MortalLongExact[1]&gt;
	v10 = BinaryOp&lt;Add&gt; v8 v9
	v6 = Assign v10
	Branch&lt;2&gt;
  }

  bb 2 (preds 1) {
	EndInlinedFunction
	Return v6
  }
}
</code></pre> 
         <p><strong>6.</strong> <span style="font-weight: 400;">You will notice that despite being straight-line code, we have some unnecessary branches. We run a </span><span style="font-weight: 400; font-family: Courier New;">CleanCFG</span><span style="font-weight: 400;"> pass to take care of this for us.</span></p> 
         <pre class="line-numbers"><code class="language-none">fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	BeginInlinedFunction
	v7 = Assign v5
	v8 = CheckVar&lt;"x"&gt; v7
	v9 = LoadConst&lt;MortalLongExact[1]&gt;
	v10 = BinaryOp&lt;Add&gt; v8 v9
	v6 = Assign v10
	EndInlinedFunction
	Return v6
  }
} 
</code></pre> 
         <p><strong>7.&nbsp;</strong><span style="font-size: 1rem;">We have now added new untyped code to our typed CFG. To run other optimization passes, we need to do another round of type inference and reflow the types.</span></p> 
         <pre class="line-numbers"><code class="language-none">fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	BeginInlinedFunction
	v7:MortalLongExact[3] = Assign v5
	v8:MortalLongExact[3] = CheckVar&lt;"x"&gt; v7
	v9:MortalLongExact[1] = LoadConst&lt;MortalLongExact[1]&gt;
	v10:Object = BinaryOp&lt;Add&gt; v8 v9
	v6:Object = Assign v10
	EndInlinedFunction
	Return v6
  }
}
</code></pre> 
         <p><strong>8.</strong> <span style="font-weight: 400;">Now that we once more have fully typed code, we can run more optimization passes. </span><span style="font-weight: 400; font-family: Courier New;">CopyPropagation</span><span style="font-weight: 400;"> will take care of the useless </span><span style="font-weight: 400; font-family: Courier New;">Assign</span><span style="font-weight: 400;">s, </span><span style="font-weight: 400; font-family: Courier New;">Simplify</span><span style="font-weight: 400;"> will take care of the unnecessary </span><span style="font-weight: 400; font-family: Courier New;">CheckVar</span><span style="font-weight: 400;">, and then we are done!</span></p> 
         <pre class="line-numbers"><code class="language-none">fun __main__:caller {
  bb 0 {
	v3:OptObject = LoadGlobalCached&lt;0; "callee"&gt;
	v4:MortalFunc[function:0xdeadbeef] = GuardIs&lt;0xdeadbeef&gt; v3
	v5:MortalLongExact[3] = LoadConst&lt;MortalLongExact[3]&gt;
	BeginInlinedFunction
	v9:MortalLongExact[1] = LoadConst&lt;MortalLongExact[1]&gt;
	v10:LongExact = LongBinaryOp&lt;Add&gt; v5 v9
	EndInlinedFunction
	Return v10
  }
}
</code></pre> 
         <p><span style="font-weight: 400;">Here we have compiled </span><span style="font-weight: 400; font-family: Courier New;">callee</span><span style="font-weight: 400;"> in the context of </span><span style="font-weight: 400; font-family: Courier New;">caller</span><span style="font-weight: 400;">, but </span><span style="font-weight: 400; font-family: Courier New;">callee</span><span style="font-weight: 400;"> might not always be inlined into its other callers. It can still be compiled as a normal standalone function.</span></p> 
         <h2><span style="font-weight: 400;">What makes inlining tricky</span></h2> 
         <p><span style="font-weight: 400;">Inlining is not just all fun and graph transformations. There are Python APIs and profiling tools that rely on being able to have an accurate view of the Python stack, as if the inlining never happened.</span></p> 
         <p><b>Sampling profilers:</b><span style="font-weight: 400;"> We have a sampling stack profiler that cannot run any code and needs to be able to walk a chain of pointers and discover what functions are currently running. We do this with shadow frames.</span></p> 
         <p><b>Deoptimization metadata:</b><span style="font-weight: 400;"> When a function raises an exception or otherwise transfers control to the interpreter (deoptimization), it needs to materialize a </span><span style="font-weight: 400; font-family: Courier New;">PyFrameObject</span><span style="font-weight: 400;"> with all the variables that should have existed at the time (but might have been erased by the JIT), line numbers, etc. And this needs information about what any given point in the machine code refers back to in the Python code.</span></p> 
         <p><b>Coroutines:</b><span style="font-weight: 400;"> Inlining normal functions into coroutines is fine because functions execute by starting at the top and continuing until they are finished. We can replace a </span><span style="font-weight: 400; font-family: Courier New;">Call</span><span style="font-weight: 400;"> with its call target. But coroutines have to yield control every so often and also materialize a </span><span style="font-weight: 400; font-family: Courier New;">coroutine</span><span style="font-weight: 400;"> or </span><span style="font-weight: 400; font-family: Courier New;">generator</span><span style="font-weight: 400;"> object when called. This is a little bit trickier, and we will tackle this in the future. Inlining functions into coroutines is not exactly tricky, but it is more work because coroutines have a slightly different frame layout and we have not yet modified the frame to support multiple shadow frames.</span></p> 
         <p><b>Frame materialization outside the interpreter:</b><span style="font-weight: 400;"> It turns out Python allows both Python programmers and C extension developers to get a Python frame whenever they want. For Python programmers, CPython exposes (as an implementation detail, not a guarantee, to be fair) </span><span style="font-weight: 400; font-family: Courier New;">sys._getframe</span><span style="font-weight: 400;">. For C extension programmers and standard library developers, </span><span style="font-weight: 400; font-family: Courier New;">PyEval_GetFrame</span><span style="font-weight: 400;"> is available. This means that even though there might be no deoptimization events in the middle of an inlined function, some managed or native code might decide to request that a frame be created anyway. And the JIT-ed code, which otherwise would have expected the shadow frames to still be around, would also have to handle the case where they have been replaced by real Python frames.</span></p> 
         <p><b>When to inline:</b><span style="font-weight: 400;"> Inlining every callee into its caller is not necessarily the best move. Some callees never get called, and inlining them would increase the code size. Even if they do get called, it may still make more sense to leave the function call than to bloat the caller’s code. Runtimes often have heuristics and rules about when to inline functions, and people spend years tuning them for different workloads to optimize performance.</span></p> 
         <p><b>But what if someone changes the target’s </b><b>__code__</b><b>?</b><span style="font-weight: 400;"> We have a hook to detect this from Python code. In this case, we invalidate the JIT-ed code for that function. For inlined functions, we can either check that it hasn’t changed before every execution (slow) or react to changes by patching our generated code. Neither of these exists yet, but they are not so hard to implement. For native (C) extensions, we have to trust that the extensions are well behaved and will notify us after messing with the </span><span style="font-weight: 400; font-family: Courier New;">PyFunctionObject</span><span style="font-weight: 400;"> fields.</span></p> 
         <h3>Surprisingly not-tricky things</h3> 
         <p><b>What if the callee changes?</b><span style="font-weight: 400;"> Python is a very dynamic language. Variables can change type over time, programmers can write to global variables in other modules, etc. But the inliner does not have to deal with this at all. The inliner starts with the knowledge that the callee is known and works from there. If the value changes, the guard instruction will maintain the invariant for the native code and deoptimize into the interpreter otherwise.</span></p> 
         <h2>Looking forward</h2> 
         <p><span style="font-weight: 400;">It’s time to collect data about the performance characteristics of our workload and figure out whether we can develop good heuristics about what functions to inline. There are papers to read and evaluate.&nbsp;</span></p> 
         <p><span style="font-weight: 400;">Take a look at our </span><a href="https://github.com/facebookincubator/cinder"><span style="font-weight: 400;">GitHub repo</span></a><span style="font-weight: 400;">, and play around with Cinder. We have included a Dockerfile and </span><a href="https://github.com/facebookincubator/cinder/pkgs/container/cinder"><span style="font-weight: 400;">prebuilt Docker image</span></a><span style="font-weight: 400;"> to make this easier.</span></p> 
        </div><!-- .entry-content --> 
       </article><!-- #post-## --> 
       <footer class="entry-footer"> 
        <div>
         TAGS: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://engineering.fb.com/tag/instagram/" rel="tag">Instagram</a>
        </div> 
       </footer><!-- .entry-footer --> 
       <div class="fb-like" data-href="https://engineering.fb.com/2022/05/02/open-source/cinder-jits-instagram/" data-width="" data-layout="standard" data-action="like" data-size="small" data-share="true"> 
       </div> 
       <div class="related-articles"> 
        <div class="related-articles__header"> 
         <h3 class="related-articles__header__headline">Read More in Open Source</h3> <a aria-label="View all articles in this Open Source" class="related-articles__header__link" href="https://engineering.fb.com/category/open-source/"> View All </a> 
        </div> 
        <div class="article-grids related-articles__grid"> 
         <div class="row"> 
          <div class="article-grid col-12 col-md-4"> 
           <article class="post post-18657 type-post status-publish format-standard has-post-thumbnail hentry category-developer-tools category-open-source tag-instagram fb_content_type-article" id="post-18765"> 
            <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2022/05/JestOpenJs-copy.jpg?w=580&amp;h=326&amp;crop=1" class="attachment-thumbnail size-thumbnail" alt="Jest Meta Open Source OpenJS Foundation" loading="lazy" title="JestOpenJs copy"> 
            <header class="entry-header"> 
             <div class="entry-header__top"> <span class="posted-on"> <time class="entry-date published" datetime="2022-05-11T09:00:45-07:00"> MAY 11, 2022 </time> </span> 
             </div> 
             <div class="entry-title"> 
              <div> <a href="https://engineering.fb.com/2022/05/11/open-source/jest-openjs-foundation/" rel="bookmark" aria-label="Read More about Meta Open Source is transferring Jest to the OpenJS Foundation"> Meta Open Source is transferring Jest to the OpenJS Foundation </a> 
              </div> 
             </div> 
            </header><!-- .entry-header --> 
           </article><!-- #post-## --> 
          </div><!-- /.article-grid --> 
          <div class="article-grid col-12 col-md-4"> 
           <article class="post post-18657 type-post status-publish format-standard has-post-thumbnail hentry category-developer-tools category-open-source tag-instagram fb_content_type-article" id="post-18540"> 
            <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2022/03/WhatsApp-Code-Verify-Hero2.jpg?w=580&amp;h=326&amp;crop=1" class="attachment-thumbnail size-thumbnail" alt="WhatsApp Code Verify" loading="lazy" title="WhatsApp-Code-Verify-Hero2"> 
            <header class="entry-header"> 
             <div class="entry-header__top"> <span class="posted-on"> <time class="entry-date published" datetime="2022-03-10T10:30:59-08:00"> MAR 10, 2022 </time> </span> 
             </div> 
             <div class="entry-title"> 
              <div> <a href="https://engineering.fb.com/2022/03/10/security/code-verify/" rel="bookmark" aria-label="Read More about Code Verify: An open source browser extension for verifying code authenticity on the web"> Code Verify: An open source browser extension for verifying code authenticity on the web </a> 
              </div> 
             </div> 
            </header><!-- .entry-header --> 
           </article><!-- #post-## --> 
          </div><!-- /.article-grid --> 
          <div class="article-grid col-12 col-md-4"> 
           <article class="post post-18657 type-post status-publish format-standard has-post-thumbnail hentry category-developer-tools category-open-source tag-instagram fb_content_type-article" id="post-18523"> 
            <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2021/03/RiB_LightNavy.jpg?w=580&amp;h=326&amp;crop=1" class="attachment-thumbnail size-thumbnail" alt="HHVM Jump-Start: Boosting the performance of virtual machines" loading="lazy" title="RiB_LightNavy"> 
            <header class="entry-header"> 
             <div class="entry-header__top"> <span class="posted-on"> <time class="entry-date published" datetime="2022-03-08T09:00:41-08:00"> MAR 8, 2022 </time> </span> 
             </div> 
             <div class="entry-title"> 
              <div> <a href="https://engineering.fb.com/2022/03/08/android/deadlock-detector-for-android-java/" rel="bookmark" aria-label="Read More about An open source compositional deadlock detector for Android Java"> An open source compositional deadlock detector for Android Java </a> 
              </div> 
             </div> 
            </header><!-- .entry-header --> 
           </article><!-- #post-## --> 
          </div><!-- /.article-grid --> 
          <div class="article-grid col-12 col-md-4"> 
           <article class="post post-18657 type-post status-publish format-standard has-post-thumbnail hentry category-developer-tools category-open-source tag-instagram fb_content_type-article" id="post-18297"> 
            <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2021/11/OCP-Summit-HERO.png?w=580&amp;h=326&amp;crop=1" class="attachment-thumbnail size-thumbnail" alt="OCP Summit 2021: Open networking hardware lays the groundwork for the metaverse" loading="lazy" title="OCP Summit HERO"> 
            <header class="entry-header"> 
             <div class="entry-header__top"> <span class="posted-on"> <time class="entry-date published" datetime="2021-11-09T09:30:40-08:00"> NOV 9, 2021 </time> </span> 
             </div> 
             <div class="entry-title"> 
              <div> <a href="https://engineering.fb.com/2021/11/09/data-center-engineering/ocp-summit-2021/" rel="bookmark" aria-label="Read More about OCP Summit 2021: Open networking hardware lays the groundwork for the metaverse"> OCP Summit 2021: Open networking hardware lays the groundwork for the metaverse </a> 
              </div> 
             </div> 
            </header><!-- .entry-header --> 
           </article><!-- #post-## --> 
          </div><!-- /.article-grid --> 
          <div class="article-grid col-12 col-md-4"> 
           <article class="post post-18657 type-post status-publish format-standard has-post-thumbnail hentry category-developer-tools category-open-source tag-instagram fb_content_type-article" id="post-18261"> 
            <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2021/10/RiB_DarkBlue.jpg?w=580&amp;h=326&amp;crop=1" class="attachment-thumbnail size-thumbnail" alt="" loading="lazy" title="RiB_DarkBlue"> 
            <header class="entry-header"> 
             <div class="entry-header__top"> <span class="posted-on"> <time class="entry-date published" datetime="2021-10-26T12:00:42-07:00"> OCT 26, 2021 </time> </span> 
             </div> 
             <div class="entry-title"> 
              <div> <a href="https://engineering.fb.com/2021/10/26/core-data/kangaroo/" rel="bookmark" aria-label="Read More about Kangaroo: A new flash cache optimized for tiny objects"> Kangaroo: A new flash cache optimized for tiny objects </a> 
              </div> 
             </div> 
            </header><!-- .entry-header --> 
           </article><!-- #post-## --> 
          </div><!-- /.article-grid --> 
          <div class="article-grid col-12 col-md-4"> 
           <article class="post post-18657 type-post status-publish format-standard has-post-thumbnail hentry category-developer-tools category-open-source tag-instagram fb_content_type-article" id="post-18226"> 
            <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2020/10/OSiB_RichTeal.jpg?w=580&amp;h=326&amp;crop=1" class="attachment-thumbnail size-thumbnail" alt="hsthrift - Open-sourcing Thrift for Haskell" loading="lazy" title="OSiB_RichTeal"> 
            <header class="entry-header"> 
             <div class="entry-header__top"> <span class="posted-on"> <time class="entry-date published" datetime="2021-10-19T09:00:25-07:00"> OCT 19, 2021 </time> </span> 
             </div> 
             <div class="entry-title"> 
              <div> <a href="https://engineering.fb.com/2021/10/19/open-source/rtmp-go-away/" rel="bookmark" aria-label="Read More about RTMP Go Away: Lossless reconnections for live streaming"> RTMP Go Away: Lossless reconnections for live streaming </a> 
              </div> 
             </div> 
            </header><!-- .entry-header --> 
           </article><!-- #post-## --> 
          </div><!-- /.article-grid --> 
         </div><!-- /.row --> 
        </div><!--/.article-grids --> 
       </div><!-- /.related-articles --> <!-- include the carousel nav here. --> 
      </main><!-- #main --> 
     </div><!-- #primary --> <!-- Do the right sidebar check. --> 
     <div class="col-md-4 widget-area" id="right-sidebar" role="complementary"> 
      <aside id="fb_related_post_widget-4" class="widget widget_fb_related_post_widget">
       <h3 class="widget-title">Related Posts</h3>
       <hr> 
       <div class="aside-related-projects">
        <div class="article-grid-redesign"> 
         <article class="post-18572 post type-post status-publish has-post-thumbnail hentry" id="post-18572"> <a href="https://engineering.fb.com/2022/03/15/developer-tools/vespa/" rel="bookmark" aria-label="Read More about VESPA: Static profiling for binary optimization"> <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2021/08/RiB_RichTeal.jpg?w=580&amp;h=326&amp;crop=1" class="wp-post-image" alt="" srcset="https://engineering.fb.com/wp-content/uploads/2021/08/RiB_RichTeal.jpg?w=580&amp;h=326&amp;crop=1 580w, https://engineering.fb.com/wp-content/uploads/2021/08/RiB_RichTeal.jpg?w=580&amp;h=326&amp;crop=1 326w" sizes="(max-width: 580px) 100vw, 580px" loading="lazy"> 
           <header class="entry-header"> <span class="posted-on"><time class="entry-date published" datetime="Mar 15, 2022">Mar 15, 2022</time></span> 
            <h4 class="entry-title">VESPA: Static profiling for binary optimization</h4> 
           </header><!-- .entry-header --> </a> 
         </article><!-- #post-## --> 
        </div>
        <div class="article-grid-redesign"> 
         <article class="post-18072 post type-post status-publish has-post-thumbnail hentry" id="post-18072"> <a href="https://engineering.fb.com/2021/09/13/core-data/superpack/" rel="bookmark" aria-label="Read More about Superpack: Pushing the limits of compression in Facebook’s mobile apps"> <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2021/09/Superpack_Hero_FINAL.jpg?w=580&amp;h=326&amp;crop=1" class="wp-post-image" alt="" srcset="https://engineering.fb.com/wp-content/uploads/2021/09/Superpack_Hero_FINAL.jpg?w=580&amp;h=326&amp;crop=1 580w, https://engineering.fb.com/wp-content/uploads/2021/09/Superpack_Hero_FINAL.jpg?w=580&amp;h=326&amp;crop=1 326w" sizes="(max-width: 580px) 100vw, 580px" loading="lazy"> 
           <header class="entry-header"> <span class="posted-on"><time class="entry-date published" datetime="Sep 13, 2021">Sep 13, 2021</time></span> 
            <h4 class="entry-title">Superpack: Pushing the limits of compression in Facebook’s mobile apps</h4> 
           </header><!-- .entry-header --> </a> 
         </article><!-- #post-## --> 
        </div>
        <div class="article-grid-redesign"> 
         <article class="post-6632 post type-post status-publish has-post-thumbnail hentry" id="post-6632"> <a href="https://engineering.fb.com/2016/09/22/networking-traffic/redesigning-the-hhvm-jit-compiler-for-better-performance/" rel="bookmark" aria-label="Read More about Redesigning the HHVM JIT compiler for better performance"> <img width="580" height="326" src="https://engineering.fb.com/wp-content/uploads/2016/09/gi2l3ac361jblryeaaaaaaaqvywpbj0jaaab.jpg?w=580&amp;h=326&amp;crop=1" class="wp-post-image" alt="" srcset="https://engineering.fb.com/wp-content/uploads/2016/09/gi2l3ac361jblryeaaaaaaaqvywpbj0jaaab.jpg?w=580&amp;h=326&amp;crop=1 580w, https://engineering.fb.com/wp-content/uploads/2016/09/gi2l3ac361jblryeaaaaaaaqvywpbj0jaaab.jpg?w=580&amp;h=326&amp;crop=1 326w" sizes="(max-width: 580px) 100vw, 580px" loading="lazy"> 
           <header class="entry-header"> <span class="posted-on"><time class="entry-date published" datetime="Sep 22, 2016">Sep 22, 2016</time></span> 
            <h4 class="entry-title">Redesigning the HHVM JIT compiler for better performance</h4> 
           </header><!-- .entry-header --> </a> 
         </article><!-- #post-## --> 
        </div>
       </div>
      </aside>
      <aside id="wpb_widget-3" class="widget widget_wpb_widget">
       <h3 class="widget-title">Related Positions</h3>
       <hr>
       <ul class="available-positions-list">
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/278145961104814/"> 
          <div class="job-description">
            Business Engineer, Android (Chinese Markets) 
          </div> 
          <div class="job-location">
            SINGAPORE 
          </div> </a> </li>
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/278252850917850/"> 
          <div class="job-description">
            Senior UI Engineer - Unit 2 Games 
          </div> 
          <div class="job-location">
            LEAMINGTON SPA, UK 
          </div> </a> </li>
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/341466507933910/"> 
          <div class="job-description">
            Software Engineer (Leadership) | Ingénieur logiciel (Chef d'équipe) 
          </div> 
          <div class="job-location">
            REMOTE, CANADA 
          </div> </a> </li>
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/333409021564328/"> 
          <div class="job-description">
            Engineering Manager, BPE 
          </div> 
          <div class="job-location">
            AUSTIN, US 
          </div> </a> </li>
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/333409021564328/"> 
          <div class="job-description">
            Engineering Manager, BPE 
          </div> 
          <div class="job-location">
            MENLO PARK, US 
          </div> </a> </li> 
       </ul> <a href="https://www.facebook.com/careers/"> 
        <div class="btn available-positions-btn">
          See All Jobs 
        </div> </a> 
      </aside> 
     </div><!-- #secondary --> <!-- <php get_template_part('content-single-side-bar'); ?> --> <!-- Do the right sidebar check. --> 
    </div><!-- Container end --> 
   </div><!-- Wrapper end --> 
  </div> <!-- ******************* The Footer Full-width Widget Area ******************* --> 
  <div class="wrapper wrapper-community-outer"> 
   <div class="wrapper-community"> 
    <div class="community" tabindex="-1"> 
     <div class="row"> <!-- community section is generated through WordPress widget --> 
      <div id="wpb_widget-2" class="footer-widget widget_wpb_widget widget-count-3 col-md-4">
       <h3 class="widget-title">Available Positions</h3>
       <hr>
       <ul class="available-positions-list">
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/278145961104814/"> 
          <div class="job-description">
            Business Engineer, Android (Chinese Markets) 
          </div> 
          <div class="job-location">
            SINGAPORE 
          </div> </a> </li>
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/278252850917850/"> 
          <div class="job-description">
            Senior UI Engineer - Unit 2 Games 
          </div> 
          <div class="job-location">
            LEAMINGTON SPA, UK 
          </div> </a> </li>
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/341466507933910/"> 
          <div class="job-description">
            Software Engineer (Leadership) | Ingénieur logiciel (Chef d'équipe) 
          </div> 
          <div class="job-location">
            REMOTE, CANADA 
          </div> </a> </li>
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/333409021564328/"> 
          <div class="job-description">
            Engineering Manager, BPE 
          </div> 
          <div class="job-location">
            AUSTIN, US 
          </div> </a> </li>
        <li class="available-positions-item"> <a href="https://www.metacareers.com/jobs/333409021564328/"> 
          <div class="job-description">
            Engineering Manager, BPE 
          </div> 
          <div class="job-location">
            MENLO PARK, US 
          </div> </a> </li> 
       </ul> <a href="https://www.facebook.com/careers/"> 
        <div class="btn available-positions-btn">
          See All Jobs 
        </div> </a> 
      </div><!-- .footer-widget -->
      <div id="custom_html-2" class="widget_text footer-widget widget_custom_html widget-count-3 col-md-4">
       <h3 class="widget-title">Stay Connected</h3>
       <div class="textwidget custom-html-widget">
        <ul class="stay-connected-lists"> 
         <li class="stay-connected-item"> <img class="footer-fb-engineering stay-connected-item-left" src="/wp-content/themes/code-fb-com/img/datahallway_thumb.jpg" alt="footer-fb-engineering" loading="lazy" width="70" height="70"> 
          <div class="stay-connected-item-right"> 
           <div class="stay-connected-label">
             Engineering at Meta 
           </div> <a href="https://www.facebook.com/Engineering/"> <button class="btn stay-connected-btn"> Like </button> </a> 
          </div> </li> 
         <li class="stay-connected-item"> <img class="stay-connected-item-left" src="/wp-content/themes/code-fb-com/img/fbopensource.png" alt="footer-fbopensource" loading="lazy" width="70" height="70"> 
          <div class="stay-connected-item-right"> 
           <div class="stay-connected-label">
             Meta Open Source 
           </div> <a onclick="return twitterFollow(&quot;metaOpenSource&quot;)"> <button class="btn stay-connected-btn"> Follow </button> </a> 
          </div> </li> 
         <li class="stay-connected-item"> <img class="stay-connected-item-left facebook-research" src="/wp-content/themes/code-fb-com/img/meta_logo.png" alt="footer-research" loading="lazy" width="70" height="70"> 
          <div class="stay-connected-item-right"> 
           <div class="stay-connected-label">
             Meta Research 
           </div> <a href="https://www.facebook.com/MetaResearch"> <button class="btn stay-connected-btn"> Like </button> </a> 
          </div> </li> 
         <li class="stay-connected-item"> <img class="stay-connected-item-left facebook-developers" src="/wp-content/themes/code-fb-com/img/facebook-developers.png" alt="footer-developers" loading="lazy" width="70" height="70"> 
          <div class="stay-connected-item-right"> 
           <div class="stay-connected-label">
             Meta for Developers 
           </div> <a href=" https://www.facebook.com/MetaforDevelopers"> <button class="btn stay-connected-btn"> Like </button> </a> 
          </div> </li> 
         <li class="stay-connected-item"> <img class="stay-connected-item-left" src="/wp-content/themes/code-fb-com/img/rss.png" alt="footer-rss" loading="lazy" width="70" height="70"> 
          <div class="stay-connected-item-right"> 
           <div class="stay-connected-label">
             RSS 
           </div> <a href="https://code.facebook.com/posts/rss/"> <button class="btn stay-connected-btn"> Subscribe </button> </a> 
          </div> </li> 
        </ul>
       </div>
      </div><!-- .footer-widget -->
      <div id="custom_html-3" class="widget_text footer-widget widget_custom_html widget-count-3 col-md-4">
       <h3 class="widget-title">Open Source</h3>
       <div class="textwidget custom-html-widget">
        <p class="opensource-desc"> Meta believes in building community through open source technology. Explore our latest projects in Artificial Intelligence, Data Infrastructure, Development Tools, Front End, Languages, Platforms, Security, Virtual Reality, and more. </p> 
        <ul class="opensource-cats"> 
         <li class="opensource-cat"> <img src="/wp-content/themes/code-fb-com/img/android.png" alt="android" loading="lazy" width="50" height="59"> 
          <div class="opensource-cap">
            ANDROID 
          </div> </li> 
         <li class="opensource-cat"> <img src="/wp-content/themes/code-fb-com/img/ios.png" alt="ios" loading="lazy" width="48" height="58"> 
          <div class="opensource-cap">
            iOS 
          </div> </li> 
         <li class="opensource-cat"> <img src="/wp-content/themes/code-fb-com/img/web.png" alt="web" loading="lazy" width="55" height="49"> 
          <div class="opensource-cap">
            WEB 
          </div> </li> 
         <li class="opensource-cat"> <img src="/wp-content/themes/code-fb-com/img/backend.png" alt="backend" loading="lazy" width="56" height="51"> 
          <div class="opensource-cap">
            BACKEND 
          </div> </li> 
         <li class="opensource-cat"> <img src="/wp-content/themes/code-fb-com/img/hardware.png" alt="hardware" loading="lazy" width="55" height="44"> 
          <div class="opensource-cap">
            HARDWARE 
          </div> </li> 
        </ul> <button class="btn opensource-btn" onclick="window.location.href='https://opensource.fb.com/'"> Learn More </button> 
       </div>
      </div><!-- .footer-widget --> 
     </div> 
    </div> 
   </div> 
  </div><!-- #wrapper-footer-full --> 
  <div class="wrapper-footer" id="wrapper-footer"> 
   <div class="inner-container"> 
    <div class="footer"> 
     <div class="row"> 
      <div class="col-md-12"> 
       <footer class="meta-footer" id="meta-footer"> 
        <div class="site-info row justify-content-between"> 
         <div class="col-md-5 meta-logo-container"> <a href="https://about.facebook.com/"> <img src="https://engineering.fb.com/wp-content/themes/code-fb-com/img/meta_logo_full.svg" width="89" height="18" alt="Meta"> </a> 
          <div id="text-2" class="widget widget_text"> 
           <div class="textwidget">
            <p>Engineering at Meta is a technical news resource for engineers interested in how we solve large-scale technical challenges at Meta.</p> 
           </div> 
          </div> 
         </div> 
         <div class="col-md-6 footer-meta-links-container"> 
          <ul class="meta-footer-links"> 
           <li class="footer-link"><a href="https://engineering.fb.com">Home</a></li>
           <li class="footer-link"><a href="https://about.facebook.com">Company Info</a></li>
           <li class="footer-link"><a href="https://facebookcareers.com">Careers</a></li> 
          </ul> 
         </div> 
        </div> 
       </footer> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="footer"> 
    <div class="row"> 
     <div class="col-md-12"> 
      <footer class="site-footer" id="colophon"> 
       <div class="inner-container"> 
        <div class="site-info row justify-content-between"> 
         <div class="col-md-4 copyright-container"> 
          <div class="copyright">
            © 2022 Meta
          </div> 
         </div> <!-- static footer --> 
         <div class="col-md-7 footer-links-container"> 
          <ul class="footer-links"> 
           <li class="footer-link"><a href="https://www.facebook.com/policies">Terms</a></li>
           <li class="footer-link"><a href="https://www.facebook.com/about/privacy">Privacy</a></li>
           <li class="footer-link"><a href="https://www.facebook.com/help/cookies">Cookies</a></li>
           <li class="footer-link"><a href="https://www.facebook.com/help">Help</a></li> 
          </ul> 
         </div> 
        </div> 
       </div><!-- .site-info --> 
      </footer><!-- #colophon --> 
     </div><!--col end --> 
    </div><!-- row end --> 
   </div><!-- //.inner-container --> 
  </div><!-- wrapper end --> <!-- #page we need this extra closing tag here --> 
  <div class="gdprconsent-container" id="GDPRConsentBar"> 
   <div class="gdprconsent-wrapper"> 
    <div class="gdprconsent-content"> 
     <p>To help personalize content, tailor and measure ads, and provide a safer experience, we use cookies. By clicking or navigating the site, you agree to allow our collection of information on and off Facebook through cookies. Learn more, including about available controls: <a href="https://www.facebook.com/policies/cookies/">Cookies Policy</a></p> 
     <div class="gdprconsent-button"> <button type="button" data-gdpr-accept>I Agree</button> 
     </div> 
    </div> 
   </div> 
  </div> <!-- Twitter universal website tag code --> 
  <script>
	!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
	},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
	a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
	// Insert Twitter Pixel ID and Standard Event data below
	twq('init','o31u0');
	twq('track','PageView');
	</script> <!-- End Twitter universal website tag code --> 
  <script id="child-understrap-scripts-js-extra">
var loadmore_params = {"restfulURL":"https:\/\/engineering.fb.com\/wp-json\/fb\/v1\/loadmore","searchText":"","posts":"{\"page\":0,\"year\":2022,\"monthnum\":5,\"day\":2,\"name\":\"cinder-jits-instagram\",\"category_name\":\"open-source\",\"error\":\"\",\"m\":\"\",\"p\":0,\"post_parent\":\"\",\"subpost\":\"\",\"subpost_id\":\"\",\"attachment\":\"\",\"attachment_id\":0,\"pagename\":\"\",\"page_id\":0,\"second\":\"\",\"minute\":\"\",\"hour\":\"\",\"w\":0,\"tag\":\"\",\"cat\":\"\",\"tag_id\":\"\",\"author\":\"\",\"author_name\":\"\",\"feed\":\"\",\"tb\":\"\",\"paged\":0,\"meta_key\":\"\",\"meta_value\":\"\",\"preview\":\"\",\"s\":\"\",\"sentence\":\"\",\"title\":\"\",\"fields\":\"\",\"menu_order\":\"\",\"embed\":\"\",\"category__in\":[],\"category__not_in\":[],\"category__and\":[],\"post__in\":[],\"post__not_in\":[],\"post_name__in\":[],\"tag__in\":[],\"tag__not_in\":[],\"tag__and\":[],\"tag_slug__in\":[],\"tag_slug__and\":[],\"post_parent__in\":[],\"post_parent__not_in\":[],\"author__in\":[],\"author__not_in\":[],\"ignore_sticky_posts\":false,\"suppress_filters\":false,\"cache_results\":false,\"update_post_term_cache\":true,\"lazy_load_term_meta\":true,\"update_post_meta_cache\":true,\"post_type\":\"\",\"posts_per_page\":12,\"nopaging\":false,\"comments_per_page\":\"50\",\"no_found_rows\":false,\"order\":\"DESC\"}","current_page":"1","max_page":"0","post_type":"post"};
var search_params = {"ajaxurl":"https:\/\/engineering.fb.com\/wp-admin\/admin-ajax.php","posts":"{\"page\":0,\"year\":2022,\"monthnum\":5,\"day\":2,\"name\":\"cinder-jits-instagram\",\"category_name\":\"open-source\",\"error\":\"\",\"m\":\"\",\"p\":0,\"post_parent\":\"\",\"subpost\":\"\",\"subpost_id\":\"\",\"attachment\":\"\",\"attachment_id\":0,\"pagename\":\"\",\"page_id\":0,\"second\":\"\",\"minute\":\"\",\"hour\":\"\",\"w\":0,\"tag\":\"\",\"cat\":\"\",\"tag_id\":\"\",\"author\":\"\",\"author_name\":\"\",\"feed\":\"\",\"tb\":\"\",\"paged\":0,\"meta_key\":\"\",\"meta_value\":\"\",\"preview\":\"\",\"s\":\"\",\"sentence\":\"\",\"title\":\"\",\"fields\":\"\",\"menu_order\":\"\",\"embed\":\"\",\"category__in\":[],\"category__not_in\":[],\"category__and\":[],\"post__in\":[],\"post__not_in\":[],\"post_name__in\":[],\"tag__in\":[],\"tag__not_in\":[],\"tag__and\":[],\"tag_slug__in\":[],\"tag_slug__and\":[],\"post_parent__in\":[],\"post_parent__not_in\":[],\"author__in\":[],\"author__not_in\":[],\"ignore_sticky_posts\":false,\"suppress_filters\":false,\"cache_results\":false,\"update_post_term_cache\":true,\"lazy_load_term_meta\":true,\"update_post_meta_cache\":true,\"post_type\":\"\",\"posts_per_page\":12,\"nopaging\":false,\"comments_per_page\":\"50\",\"no_found_rows\":false,\"order\":\"DESC\"}","current_page":"1","max_page":"0","article_filter":"c18514aa38"};
var more_articles = {"next_article":{"label":"Next","permalink":"https:\/\/engineering.fb.com\/2022\/05\/04\/data-infrastructure\/delta\/","title":"Delta: A highly available, strongly consistent storage service using chain replication","thumbnail":["https:\/\/engineering.fb.com\/wp-content\/uploads\/2022\/05\/Delta-Title-Slide2.jpg?w=580&h=326&crop=1","580","326",true]},"prev_article":{"label":"Prev","permalink":"https:\/\/engineering.fb.com\/2022\/05\/01\/connectivity\/fiber-routes\/","title":"A new way to survey potential fiber routes \u2014 without access to paved roads","thumbnail":["https:\/\/engineering.fb.com\/wp-content\/uploads\/2022\/04\/fiber_route_hero.jpg?w=580&h=326&crop=1","580","326",true]}};
</script> 
  <script type="text/javascript" src="https://engineering.fb.com/wp-content/themes/code-fb-com/dist/js/child-theme.min.js?m=1650909728g"></script>
  <script src="https://stats.wp.com/e-202220.js" defer></script> 
  <script>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:10.9',blog:'147945108',post:'18657',tz:'-7',srv:'engineering.fb.com',hp:'vip'} ]);
	_stq.push([ 'clickTrackerInit', '147945108', '18657' ]);
</script>  
 </body>
</html>